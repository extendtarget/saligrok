(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{223:function(e,t,a){"use strict";var r=a(6),o=a(7),n=a(9),l=a(8),s=a(10),c=a(0),i=a.n(c),u=a(18),m=a.n(u),d=a(222),p=a.n(d),g=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(a=Object(n.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={shareButton:!1,androidShareButton:!1},a.shareLink=function(e){navigator.share&&navigator.share({url:e.link}).then(function(){return console.log("Successful share")}).catch(function(e){return console.log("Error sharing",e)})},a.shareLinkViaAndroidApp=function(e){"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&window.Android.shareDataThroughIntent(e.link)},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){navigator.share&&this.setState({shareButton:!0}),"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&this.setState({shareButton:!1,androidShareButton:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,this.state.shareButton&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-share-btn",style:{position:"relative"},onClick:function(){return e.shareLink(e.props)}},i.a.createElement("i",{className:"si si-share"}),i.a.createElement(m.a,{duration:"500"})),this.state.androidShareButton&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-share-btn",style:{position:"relative"},onClick:function(){return e.shareLinkViaAndroidApp(e.props)}},i.a.createElement("i",{className:"si si-share"}),i.a.createElement(m.a,{duration:"500"})))}}]),t}(c.Component),h=function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 p-0 fixed",style:{zIndex:"9"}},i.a.createElement("div",{className:"block m-0"},i.a.createElement("div",{className:"block-content p-0 ".concat(this.props.dark&&"nav-dark")},i.a.createElement("div",{className:"input-group ".concat(this.props.boxshadow&&"search-box")},!this.props.disable_back_button&&i.a.createElement("div",{className:"input-group-prepend"},this.props.back_to_home&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(m.a,{duration:"500"})),this.props.goto_orders_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-orders")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(m.a,{duration:"500"})),this.props.goto_accounts_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-account")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(m.a,{duration:"500"})),!this.props.back_to_home&&!this.props.goto_orders_page&&!this.props.goto_accounts_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns ".concat(this.props.dark&&"nav-dark"),style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.goBack()},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(m.a,{duration:"500"}))),i.a.createElement("p",{className:"form-control search-input d-flex align-items-center ".concat(this.props.dark&&"nav-dark")},this.props.logo&&i.a.createElement("img",{src:"/assets/img/logos/logo.png",alt:localStorage.getItem("storeName"),width:"120"}),this.props.has_title?i.a.createElement(i.a.Fragment,null,this.props.from_checkout?i.a.createElement("span",{className:"nav-page-title",id:"checkoutNavPageTitle"},localStorage.getItem("cartToPayText")," ",i.a.createElement("span",{style:{color:localStorage.getItem("storeColor")}},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.title,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))):i.a.createElement("span",{className:"nav-page-title"},this.props.title)):null,this.props.has_delivery_icon&&i.a.createElement(p.a,{left:!0},i.a.createElement("img",{src:"/assets/img/various/delivery-bike.png",alt:this.props.title,className:"nav-page-title"}))),this.props.has_restaurant_info?i.a.createElement("div",{className:"fixed-restaurant-info hidden",ref:function(t){e.heading=t}},i.a.createElement("span",{className:"font-w700 fixedRestaurantName"},this.props.restaurant.name),i.a.createElement("br",null),i.a.createElement("span",{className:"font-w400 fixedRestaurantTime"},i.a.createElement("i",{className:"si si-clock"})," ",this.props.restaurant.delivery_time," ",localStorage.getItem("homePageMinsText"))):null,i.a.createElement("div",{className:"input-group-append"},!this.props.disable_search&&i.a.createElement("button",{type:"submit",className:"btn search-navs-btns",style:{position:"relative"}},i.a.createElement("i",{className:"si si-magnifier"}),i.a.createElement(m.a,{duration:"500"})),this.props.homeButton&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-home-btn",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},i.a.createElement("i",{className:"si si-home"}),i.a.createElement(m.a,{duration:"500"})),this.props.shareButton&&i.a.createElement(g,{link:window.location.href})))))))}}]),t}(c.Component);h.contextTypes={router:function(){return null}};t.a=h},224:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r=function(e){if(e){var t=parseFloat(e);return t=t.toFixed(2)}return 0}},230:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"c",function(){return c}),a.d(t,"b",function(){return i});var r=a(192),o=a(5),n=a(4),l=a.n(n),s=function(e,t,a,n){return function(s){return l.a.post(o.e,{token:e,coupon:t,restaurant_id:a,subtotal:n}).then(function(e){var t=e.data;return[s({type:r.a,payload:t}),s({type:r.b,payload:null})]}).catch(function(e){if(console.log(e),401===e.response.status)return s({type:r.b,payload:"NOTLOGGEDIN"})})}},c=function(){return function(e){console.log("Triggred Coupon Removed");return e({type:r.a,payload:{hideMessage:!0,coupon_error:""}})}},i=function(e,t){return function(a){return e.appliedAmount=t,a({type:r.a,payload:e})}}},231:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(203),o=a(224),n=function(e){return function(t){var a={productQuantity:e.reduce(function(e,t){return++e},0),totalPrice:e.reduce(function(e,t){var a=0;return t.selectedaddons&&t.selectedaddons.map(function(e){return a+=parseFloat(e.price)}),e+=t.price*t.quantity+a*t.quantity,e=parseFloat(e),Object(o.a)(e),e},0)};t({type:r.a,payload:a})}}},234:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r=function(e,t,a,r){function o(e){return e*Math.PI/180}var n=o(r-t),l=o(a-e),s=Math.sin(n/2)*Math.sin(n/2)+Math.cos(o(t))*Math.cos(o(r))*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}},245:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(205),o=a(5),n=a(192),l=a(4),s=a.n(l),c=a(231),i=function(e,t,a,l,i,u,m,d,p,g,h,f,y,v){return function(S,b){return s.a.post(o.jb,{token:e.data.auth_token,user:e,order:t,coupon:a,location:l,order_comment:i,total:u,method:m,payment_token:d,delivery_type:p,partial_wallet:g,dis:h,pending_payment:f,tipAmount:y,cash_change_amount:v,schedule_date:null!==localStorage.getItem("orderDate")?JSON.parse(localStorage.getItem("orderDate")):null,schedule_slot:null!==localStorage.getItem("orderSlot")?JSON.parse(localStorage.getItem("orderSlot")):null}).then(function(e){var t=e.data;if(console.log("From Checkout"),!t.success)return t;S({type:r.a,payload:t});var a=b().cart.products;localStorage.removeItem("orderComment"),localStorage.removeItem("orderSlot"),localStorage.removeItem("orderDate");for(var o=a.length-1;o>=0;o--)a.splice(o,1);S(Object(c.a)(a)),localStorage.removeItem("appliedCoupon");S({type:n.a,payload:[]})}).catch(function(e){return e.response})}}},246:function(e,t,a){"use strict";var r=a(28),o=a.n(r),n=a(42),l=a(4),s=a.n(l),c=(a(234),a(3),a(5)),i=function(){var e=Object(n.a)(o.a.mark(function e(t,a,r,n,l,i){var u,m,d,p,g,h,f;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return[{lat:parseFloat(a),lng:parseFloat(t)}],[{lat:parseFloat(n),lng:parseFloat(r)}],l.maps.TravelMode.DRIVING,new l.maps.DistanceMatrixService,u=parseFloat(t),m=parseFloat(a),d=parseFloat(r),p=parseFloat(n),e.prev=8,g=c.C,h={originLat:m,originLong:u,destinationLat:p,destinationLong:d},e.next=13,s.a.post(g,h);case 13:f=e.sent,i(f.data),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),console.error("Error fetching data:",e.t0),i(5);case 21:case"end":return e.stop()}},e,this,[[8,17]])}));return function(t,a,r,o,n,l){return e.apply(this,arguments)}}();t.a=i},291:function(e,t,a){},345:function(e,t,a){"use strict";a.r(t);var r=a(51),o=a(28),n=a.n(o),l=a(42),s=a(2),c=a(6),i=a(7),u=a(9),m=a(8),d=a(10),p=a(88),g=a(0),h=a.n(g),f=a(201),y=a(223),v=a(17),S=a(224),b=a(230),_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={delivery_charges:0,finalDeliveryCharge:0,distance:0,tips:0,couponAppliedAmount:0,couponIgnored:!1,couponError:null},a.validateCoupon=function(e,t){if(console.log("Validating coupon",{coupon:e,total:t,restaurant_id:a.props.restaurant_info?a.props.restaurant_info.id:"none",delivery_charges:a.state.delivery_charges}),!e||!e.code)return console.log("No coupon or coupon code provided"),void(a.state.couponError&&a.setState({couponError:null},function(){console.log("Cleared coupon error",a.state)}));var r=null;if("PERCENTAGE"===e.discount_type||"AMOUNT"===e.discount_type){var o=parseFloat(e.amount||e.discount||1e5),n=parseFloat(t)+parseFloat(a.state.delivery_charges||0);console.log("Coupon validation details",{discountValue:o,total:t,totalWithDelivery:n,min_subtotal:e.min_subtotal}),parseFloat(t)<=0?(r="Total must be greater than 0.",a.props.removeCoupon(),console.log("Coupon removed: Total is zero or negative")):e.min_subtotal&&parseFloat(t)<parseFloat(e.min_subtotal)?(r="Total must be at least ".concat(e.min_subtotal," SYP."),a.props.removeCoupon(),console.log("Coupon removed: Subtotal below minimum")):o>parseFloat(n)&&console.log("Coupon discount exceeds total, but will be capped in calculation")}else"FREE"===e.discount_type&&e.is_used_for_delivery&&(parseFloat(a.state.delivery_charges)<=0?(r="Cannot apply free delivery coupon when delivery is already free.",a.props.removeCoupon(),console.log("Coupon removed: No delivery charges to discount (free delivery already applied)")):a.setState({couponIgnored:!1}));r!==a.state.couponError&&a.setState({couponError:r},function(){console.log("Coupon error state updated",{couponError:r})})},a.updateDeliveryCharges=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=e.restaurant_info,o=e.total,n=e.distance,l=e.coupon;if(console.log("Updating delivery charges",{restaurant_info:r,total:o,distance:n,coupon:l,userSelected:localStorage.getItem("userSelected")}),"SELFPICKUP"!==localStorage.getItem("userSelected")){if("DELIVERY"===localStorage.getItem("userSelected")){var s=0,c=!1;r&&"DYNAMIC"===r.delivery_charge_type?parseFloat(r.free_delivery_subtotal)>0&&parseFloat(o)>=parseFloat(r.free_delivery_subtotal)&&(void 0===n||parseFloat(n)<=parseFloat(r.free_delivery_distance))?(console.log("Free delivery"),s=0,c=l&&("FREE"===l.discount_type||l.is_used_for_delivery)):s=a.calculateDeliveryCharge():r&&(parseFloat(r.free_delivery_subtotal)>0&&parseFloat(o)>=parseFloat(r.free_delivery_subtotal)&&(void 0===n||parseFloat(n)<=parseFloat(r.free_delivery_distance))?(console.log("Free delivery"),s=0,c=l&&("FREE"===l.discount_type||l.is_used_for_delivery)):s=r.delivery_charges),console.log("Updating delivery charges",{delivery_charge:s,distance:n,couponIgnored:c});var i=a.getFinalDeliveryCharge(s);a.state.delivery_charges!==s||a.state.distance!==n||a.state.couponIgnored!==c||a.state.finalDeliveryCharge!==i?a.setState({delivery_charges:s,finalDeliveryCharge:i,distance:n,couponIgnored:c},function(){console.log("Delivery charges state updated",a.state),t()}):t()}}else 0!==a.state.delivery_charges||a.state.distance!==n?a.setState({delivery_charges:0,finalDeliveryCharge:0,distance:n,couponIgnored:!1},function(){console.log("Delivery charges set to 0 for SELFPICKUP",a.state),t()}):t()},a.calculateDeliveryCharge=function(){var e=a.props,t=e.restaurant_info,r=e.distance;console.log("Calculating delivery charge",{distance:r,base_delivery_distance:t&&t.base_delivery_distance,base_delivery_charge:t&&t.base_delivery_charge,extra_delivery_distance:t&&t.extra_delivery_distance,extra_delivery_charge:t&&t.extra_delivery_charge});var o=0;if(t&&r>(t.base_delivery_distance||0)){var n=r-(t.base_delivery_distance||0);console.log("Extra distance: "+n+" km");var l=n/(t.extra_delivery_distance||1)*(t.extra_delivery_charge||0);console.log("Extra charge: "+l),o=parseFloat(t.base_delivery_charge||0)+parseFloat(l),console.log("Total: "+o),"true"===localStorage.getItem("enDelChrRnd")&&(o=Math.ceil(o),console.log("Rounded delivery charge: "+o))}else t&&(o=t.base_delivery_charge||0,console.log("Base delivery charge applied: "+o));return o},a.getFinalDeliveryCharge=function(e){var t=a.props,r=t.restaurant_info,o=t.coupon;if(console.log("Getting final delivery charge",{delivery_charge:e,coupon:o,restaurant_info:r}),0===parseFloat(e))return console.log("Coupon ignored: Delivery charge is 0 (free delivery)"),0;var n=parseFloat(e);if(o&&("FREE"===o.discount_type||o.is_used_for_delivery)){var l=o.delivery_discount_percentage||100,s=n;n*=1-l/100,console.log("Applied delivery discount",{discountPercentage:l,originalCharge:s,finalCharge:n})}if(r&&r.zone){var c=parseFloat(r.zone.delivery_surcharge_rate||0);if(r.zone.delivery_surcharge_active&&c>0)if("fixed"===r.zone.delivery_surcharge_type)n+=c,console.log("Added fixed delivery surcharge",{deliverySurcharge:c,finalCharge:n});else if("percentage"===r.zone.delivery_surcharge_type){var i=n*(c/100);n+=parseFloat(i),console.log("Added percentage delivery surcharge",{surchargeAmount:i,finalCharge:n})}}var u=parseFloat(Object(S.a)(Math.ceil(n)));return console.log("Final formatted delivery charge",{formattedCharge:u}),u},a.getTotalAfterCalculation=function(){var e=a.props,t=e.total,r=e.restaurant_info,o=e.coupon,n=e.tips,l=a.state.finalDeliveryCharge,s=0;if(console.log("Calculating total",{total:parseFloat(t),finalDeliveryCharge:l,restaurant_charges:parseFloat(r&&r.restaurant_charges?r.restaurant_charges:0),coupon:o,tips:n&&n.value?parseFloat(n.value):0,restaurant_id:r?r.id:"none"}),s=parseFloat(t)+parseFloat(r&&r.restaurant_charges?r.restaurant_charges:0)+parseFloat(l||0),console.log("Total before coupon discount",{calc:s}),!a.state.couponError&&o&&o.code){var c=0;if("FREE"===o.discount_type||o.is_used_for_delivery){var i=o.delivery_discount_percentage||100,u=parseFloat(a.state.delivery_charges)*(1-i/100);s=parseFloat(t)+parseFloat(r&&r.restaurant_charges?r.restaurant_charges:0)+parseFloat(u),console.log("Applied free delivery coupon",{discountPercentage:i,discountedDeliveryCharge:u,newTotal:s})}else{if("PERCENTAGE"===o.discount_type){c=parseFloat(o.discount)/100*parseFloat(t),o.max_discount&&parseFloat(o.max_discount)>0&&(c=Math.min(c,parseFloat(o.max_discount)));var m=parseFloat(t)+parseFloat(l||0);c=Math.min(c,m)}else{c=parseFloat(o.amount||o.discount||1e5);var d=parseFloat(t)+parseFloat(l||0);c=Math.min(c,d)}console.log("Applying coupon discount",{discount:c,coupon:o}),a.props.couponApplied(o,c),localStorage.setItem("couponAppliedAmount",c),(s-=c)<0&&(s=0),console.log("Applied coupon discount",{discount:c,newTotal:s})}if("true"===localStorage.getItem("taxApplicable")){var p=parseFloat(localStorage.getItem("taxPercentage"))/100*s;s+=p,console.log("Tax added:",{tax:p,newTotal:s})}return n&&n.value>0&&(s+=parseFloat(n.value),console.log("Tip added:",{tip:n.value,newTotal:s})),console.log("Calculated total:",{calc:s}),Object(S.a)(s)}if(console.log("No valid coupon or coupon error",{couponError:a.state.couponError}),"true"===localStorage.getItem("taxApplicable")){var g=parseFloat(localStorage.getItem("taxPercentage"))/100*s;s+=g,console.log("Tax added:",{tax:g,newTotal:s})}return n&&n.value>0&&(s+=parseFloat(n.value),console.log("Tip added:",{tip:n.value,newTotal:s})),console.log("Calculated total:",{calc:s}),Object(S.a)(s)},a.checkAndSetAppliedAmount=function(){var e=parseFloat(localStorage.getItem("couponAppliedAmount")||0),t="";return t="left"===localStorage.getItem("currencySymbolAlign")?"(-".concat(localStorage.getItem("currencyFormat")).concat(Object(S.a)(e),")"):"(-".concat(Object(S.a)(e)).concat(localStorage.getItem("currencyFormat"),")"),a.refs.appliedAmount&&(a.refs.appliedAmount.innerHTML=t,console.log("Applied amount set in DOM",{elem:t,appliedAmount:e})),t},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("BillDetails mounted",{distance:this.props.distance,restaurant_info:this.props.restaurant_info,coupon:this.props.coupon,total:this.props.total}),this.setState({distance:this.props.distance||0},function(){console.log("Initial state set",e.state),e.updateDeliveryCharges(e.props,function(){e.validateCoupon(e.props.coupon,e.props.total)})})}},{key:"componentDidUpdate",value:function(e){var t=this;(e.total!==this.props.total||e.distance!==this.props.distance||e.restaurant_info&&this.props.restaurant_info&&(e.restaurant_info.delivery_charges!==this.props.restaurant_info.delivery_charges||e.restaurant_info.free_delivery_subtotal!==this.props.restaurant_info.free_delivery_subtotal||e.restaurant_info.free_delivery_distance!==this.props.restaurant_info.free_delivery_distance)||e.coupon!==this.props.coupon)&&(console.log("Props changed",{newDistance:this.props.distance,oldDistance:e.distance,restaurant_info:this.props.restaurant_info,coupon:this.props.coupon,total:this.props.total}),this.setState({distance:this.props.distance||0},function(){console.log("State updated after props change",t.state),t.updateDeliveryCharges(t.props,function(){t.validateCoupon(t.props.coupon,t.props.total)})}))}},{key:"render",value:function(){var e=this.props,t=e.total,a=e.restaurant_info,r=e.coupon,o=e.tips,n=e.removeTip;return console.log("Rendering BillDetails",{total:t,restaurant_info:a,coupon:r,tips:o,state:this.state}),h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"px-15"},this.state.couponError&&h.a.createElement("div",{className:"auth-error"},h.a.createElement("div",{className:"error-shake"},this.state.couponError)),h.a.createElement("div",{className:"bg-white bill-details mb-200 ".concat(!this.props.alreadyRunningOrders&&"border-radius-4px")},h.a.createElement("div",{className:"p-15"},h.a.createElement("h2",{className:"bill-detail-text m-0"},localStorage.getItem("cartBillDetailsText")),h.a.createElement("div",{className:"display-flex"},h.a.createElement("div",{className:"flex-auto"},localStorage.getItem("cartItemTotalText")),h.a.createElement("div",{className:"flex-auto text-right"},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),Object(S.a)(t),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))),h.a.createElement("hr",null),r&&r.code&&!this.state.couponError&&h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"display-flex"},h.a.createElement("div",{className:"flex-auto coupon-text"},localStorage.getItem("cartCouponText")," (",r.code,")"),h.a.createElement("div",{className:"flex-auto text-right coupon-text"},h.a.createElement("span",null,"-"),this.state.couponIgnored?h.a.createElement("span",{className:"text-warning"},"Ignored: Free delivery applied"):"FREE"===r.discount_type||r.is_used_for_delivery?100===r.delivery_discount_percentage?h.a.createElement("span",null,"Free delivery"):h.a.createElement("span",null,r.delivery_discount_percentage,"% delivery discount"):"PERCENTAGE"===r.discount_type?h.a.createElement(h.a.Fragment,null,r.discount,"% (-","left"===localStorage.getItem("currencySymbolAlign")?"".concat(localStorage.getItem("currencyFormat")).concat(Object(S.a)(parseFloat(localStorage.getItem("couponAppliedAmount")||0))):"".concat(Object(S.a)(parseFloat(localStorage.getItem("couponAppliedAmount")||0))).concat(localStorage.getItem("currencyFormat")),")"):h.a.createElement(h.a.Fragment,null,"left"===localStorage.getItem("currencySymbolAlign")?"".concat(localStorage.getItem("currencyFormat")).concat(Object(S.a)(parseFloat(localStorage.getItem("couponAppliedAmount")||0))):"".concat(Object(S.a)(parseFloat(localStorage.getItem("couponAppliedAmount")||0))).concat(localStorage.getItem("currencyFormat"))))),"FREE"===r.discount_type&&!this.state.couponIgnored&&h.a.createElement("div",{className:"coupon-message text-success"},r.delivery_discount_percentage,"% discount on delivery fee"),"AMOUNT"===r.discount_type&&!this.state.couponIgnored&&h.a.createElement("div",{className:"coupon-message text-success"},"left"===localStorage.getItem("currencySymbolAlign")?"".concat(localStorage.getItem("currencyFormat")).concat(Object(S.a)(parseFloat(localStorage.getItem("couponAppliedAmount")||0))):"".concat(Object(S.a)(parseFloat(localStorage.getItem("couponAppliedAmount")||0))).concat(localStorage.getItem("currencyFormat"))," discount applied"),h.a.createElement("hr",null)),!a||"0.00"!==a.restaurant_charges&&null!==a.restaurant_charges?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"display-flex"},h.a.createElement("div",{className:"flex-auto"},localStorage.getItem("cartRestaurantCharges")),h.a.createElement("div",{className:"flex-auto text-right"},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),a&&a.restaurant_charges,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))),h.a.createElement("hr",null)):null,0===this.state.finalDeliveryCharge?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"display-flex"},h.a.createElement("div",{className:"flex-auto flex-column"},localStorage.getItem("cartDeliveryCharges"),h.a.createElement("p",{className:"p-0"},!r||"FREE"!==r.discount_type&&!r.is_used_for_delivery||this.state.couponIgnored?"You have free delivery!":100===r.delivery_discount_percentage?"Free delivery with coupon!":"".concat(r.delivery_discount_percentage,"% delivery discount applied!"))),h.a.createElement("div",{className:"flex-auto text-right"},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),"0","right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))),h.a.createElement("hr",null)):h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"display-flex"},h.a.createElement("div",{className:"flex-auto"},localStorage.getItem("cartDeliveryCharges")," ",h.a.createElement("span",{className:"cart-delivery-distance"},"(",parseFloat(this.state.distance).toFixed(1),"km)"),a&&a.free_delivery_subtotal>0&&this.state.finalDeliveryCharge>0&&parseFloat(this.state.distance)<=parseFloat(a.free_delivery_distance)&&h.a.createElement(h.a.Fragment,null,h.a.createElement("br",null),h.a.createElement("div",{className:"freeDeliveryMessageBlock"},localStorage.getItem("freeDeliveryPrefixText")," ",h.a.createElement("b",null,"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),parseFloat(a.free_delivery_subtotal)-parseFloat(t),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))," ",localStorage.getItem("freeDeliverySuffixText")))),h.a.createElement("div",{className:"flex-auto text-right"},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),Object(S.a)(this.state.finalDeliveryCharge),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),a&&a.zone&&a.zone.delivery_surcharge_active&&null!==a.zone.delivery_surcharge_reason&&h.a.createElement(h.a.Fragment,null,h.a.createElement("br",null),h.a.createElement("div",{className:"freeDeliveryMessageBlock deliverySurchargeReasonBlock"},"Delivery charges may be higher due to"," ",h.a.createElement("b",null,a.zone.delivery_surcharge_reason))))),h.a.createElement("hr",null)),"true"===localStorage.getItem("taxApplicable")&&h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"display-flex"},h.a.createElement("div",{className:"flex-auto text-danger"},localStorage.getItem("taxText")),h.a.createElement("div",{className:"flex-auto text-right text-danger"},h.a.createElement("span",null,"+"),localStorage.getItem("taxPercentage"),"%")),h.a.createElement("hr",null)),o&&0!==o.value&&h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"display-flex"},h.a.createElement("div",{className:"flex-auto"},localStorage.getItem("tipText")),h.a.createElement("div",{className:"flex-auto text-right"},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),Object(S.a)(o.value),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),h.a.createElement("span",{onClick:n},h.a.createElement("u",null,localStorage.getItem("cartRemoveTipText"))))),h.a.createElement("hr",null)),h.a.createElement("div",{className:"display-flex"},h.a.createElement("div",{className:"flex-auto font-w700"},localStorage.getItem("cartToPayText")),h.a.createElement("div",{className:"flex-auto text-right font-w700"},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.getTotalAfterCalculation(),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))),"SELFPICKUP"===localStorage.getItem("userSelected")&&h.a.createElement("p",{className:"my-2 mt-3 text-danger font-weight-bold"},localStorage.getItem("selectedSelfPickupMessage"))))))}}]),t}(g.Component),E=Object(v.b)(function(e){return{coupon:e.coupon.coupon,restaurant_info:e.items.restaurant_info}},{couponApplied:b.b,removeCoupon:b.c})(_),I=a(18),C=a.n(I),N=a(209),x=a(5),A=a(4),k=a.n(A),F=function(e){return function(t){return k.a.post(x.i,{items:e}).then(function(e){return e.data}).catch(function(e){console.log(e)})}},O=a(245),w=a(202),T=a(231),D=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={process_cart_loading:!1},a.processCart=function(){var e=a.props,t=e.handleProcessCartLoading,r=e.checkCartItemsAvailability,o=e.cartProducts,n=e.addProduct,l=e.updateCart,s=e.checkConfirmCart,c=e.handleItemsAvailability;t(!0),r(o).then(function(e){if(t(!1),a.setState({process_cart_loading:!1}),e&&e.length){var r=!1;e.map(function(e){var t=o.find(function(t){return t.id===e.id});return t.is_active=e.is_active,t.freeitem||(t.price=e.price),t.freeitem&&(t.quantity=1),n(t),r||e.is_active||(r=!0),t}),r?(l(a.props.cartProducts),c(!1)):(l(a.props.cartProducts),s(),a.context.router.history.push("/checkout"))}})},a.gotoNewAddressPage=function(){new Promise(function(e){localStorage.setItem("fromCart",1),e("Saved")}).then(function(){a.context.router.history.push("/search-location")})},a.gotoMyAddressPage=function(){localStorage.setItem("fromCart",1),a.context.router.history.push("/my-addresses")},a.gotoLoginPage=function(){localStorage.setItem("fromCartToLogin",1),a.context.router.history.push("/login")},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){e.checkout!==this.props.checkout&&this.context.router.history.push("/running-order")}},{key:"render",value:function(){var e=this.props.user;return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"bg-white cart-checkout-block",style:{height:e.success&&"SELFPICKUP"===localStorage.getItem("userSelected")?"auto":"22vh"}},e.success?null==e.data.default_address?h.a.createElement(h.a.Fragment,null,"SELFPICKUP"===localStorage.getItem("userSelected")&&h.a.createElement("div",{style:{marginTop:"1.6rem"}},h.a.createElement("div",{onClick:this.processCart,className:"btn btn-lg btn-make-payment",style:{backgroundColor:localStorage.getItem("cartColorBg"),color:localStorage.getItem("cartColorText"),position:"relative"}},localStorage.getItem("checkoutSelectPayment"),h.a.createElement(C.a,{duration:400}))),"DELIVERY"===localStorage.getItem("userSelected")&&h.a.createElement("div",{className:"p-15"},h.a.createElement("h2",{className:"almost-there-text m-0 pb-5"},localStorage.getItem("cartSetYourAddress")),h.a.createElement("button",{onClick:this.gotoNewAddressPage,className:"btn btn-lg btn-continue",style:{position:"relative",backgroundColor:localStorage.getItem("storeColor")}},localStorage.getItem("buttonNewAddress"),h.a.createElement(C.a,{duration:500})))):h.a.createElement(h.a.Fragment,null,("DELIVERY"===localStorage.getItem("userSelected")||null===localStorage.getItem("userSelected"))&&h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"px-15 py-10"},h.a.createElement("button",{onClick:this.gotoMyAddressPage,className:"change-address-text m-0 p-5 pull-right",style:{color:localStorage.getItem("storeColor")}},localStorage.getItem("cartChangeLocation"),h.a.createElement(C.a,{duration:400})),h.a.createElement("h2",{className:"deliver-to-text m-0 pl-0 pb-5"},localStorage.getItem("cartDeliverTo")),h.a.createElement("div",{className:"user-address truncate-text m-0 pt-10"},e.data.default_address.address,null!==e.data.default_address.house&&h.a.createElement("p",{className:"truncate-text"},e.data.default_address.house)))),h.a.createElement(h.a.Fragment,null,this.props.is_operational?h.a.createElement("div",{style:{marginTop:"1.6rem"}},h.a.createElement("div",{onClick:this.processCart,className:"btn btn-lg btn-make-payment",style:{backgroundColor:localStorage.getItem("cartColorBg"),color:localStorage.getItem("cartColorText"),position:"relative"}},localStorage.getItem("checkoutSelectPayment"),h.a.createElement(C.a,{duration:400}))):h.a.createElement("div",{className:"auth-error bg-danger"},h.a.createElement("div",{className:"error-shake"},localStorage.getItem("cartRestaurantNotOperational"))))):h.a.createElement("div",{className:"p-15"},h.a.createElement("h2",{className:"almost-there-text m-0 pb-5"},localStorage.getItem("cartLoginHeader")),h.a.createElement("span",{className:"almost-there-sub text-muted"},localStorage.getItem("cartLoginSubHeader")),h.a.createElement("button",{onClick:this.gotoLoginPage,className:"btn btn-lg btn-continue",style:{backgroundColor:localStorage.getItem("storeColor"),position:"relative"}},localStorage.getItem("cartLoginButtonText"),h.a.createElement(C.a,{duration:500})))))}}]),t}(g.Component);D.contextTypes={router:function(){return null}};var P=Object(v.b)(function(e){return{user:e.user.user,addresses:e.addresses.addresses,cartProducts:e.cart.products,cartTotal:e.total.data,coupon:e.coupon.coupon,checkout:e.checkout.checkout,restaurant:e.restaurant}},{placeOrder:O.a,checkConfirmCart:function(){return function(e){return e({type:N.a,payload:!0})}},checkCartItemsAvailability:F,addProduct:w.a,updateCart:T.a})(D),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o))))._getItemTotal=function(e){var t=0,a=0;return e.selectedaddons&&e.selectedaddons.map(function(e){return t+=parseFloat(e.price)}),a+=e.price*e.quantity+t*e.quantity,a=parseFloat(a),"left"===localStorage.getItem("currencySymbolAlign")?localStorage.getItem("currencyFormat")+Object(S.a)(a):Object(S.a)(a)+localStorage.getItem("currencyFormat")},a._generateKey=function(e){var t="".concat(e,"_").concat((new Date).getTime(),"_").concat(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15));return console.log(t),t},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.addProductQuantity,a=e.removeProductQuantity,r=e.item,o=e.removeProduct;return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"cart-item-meta pt-15 pb-15 align-items-center"},h.a.createElement("div",{className:"cart-item-name"},"true"===localStorage.getItem("showVegNonVegBadge")&&null!==r.is_veg&&h.a.createElement(h.a.Fragment,null,r.is_veg?h.a.createElement("img",{src:"/assets/img/various/veg-icon-bg.png",alt:"Veg",style:{width:"1rem"},className:"mr-1"}):h.a.createElement("img",{src:"/assets/img/various/non-veg-icon-bg.png",alt:"Non-Veg",style:{width:"1rem"},className:"mr-1"})),h.a.createElement("span",{className:"".concat(!r.is_active&&"text-danger")},h.a.createElement("strong",null," ",r.name)),r.selectedaddons&&h.a.createElement(h.a.Fragment,null,h.a.createElement("br",null),r.selectedaddons.map(function(e,t){return h.a.createElement(h.a.Fragment,{key:r.id+e.addon_id},"true"===localStorage.getItem("showAddonPricesOnCart")?h.a.createElement("span",{style:{color:"#adadad",fontSize:"0.8rem"}},h.a.createElement("p",{className:"p-0 m-0"},e.addon_name+"- "+localStorage.getItem("currencyFormat")+e.price)):h.a.createElement("span",{style:{color:"#adadad",fontSize:"0.8rem"}},(t?", ":"")+e.addon_name))}))),r.is_active?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"btn-group btn-group-sm cart-item-btn"},h.a.createElement("button",{type:"button",className:"btn btn-add-remove",style:{color:localStorage.getItem("cartColor-bg")},onClick:function(){return a(r)}},h.a.createElement("span",{className:"btn-dec"},1===r.quantity?h.a.createElement("i",{className:"si si-trash",style:{fontSize:"0.8rem",top:"-0.2rem",WebkitTextStroke:"0.4px #f44336",color:"#f44336"}}):"-"),h.a.createElement(C.a,{duration:"500"})),h.a.createElement("button",{type:"button",className:"btn btn-quantity"},r.quantity),h.a.createElement("button",{type:"button",className:"btn btn-add-remove",style:{color:localStorage.getItem("cartColor-bg")},onClick:function(){return t(r)}},h.a.createElement("span",{className:"btn-inc"},"+"),h.a.createElement(C.a,{duration:"500"}))),h.a.createElement("div",{className:"cart-item-price"},h.a.createElement(h.a.Fragment,null,this._getItemTotal(r)))):h.a.createElement(h.a.Fragment,null,h.a.createElement("button",{type:"button",className:"btn btn-add-remove text-danger",style:{color:localStorage.getItem("cartColor-bg"),minWidth:"132.05px"},onClick:function(){o(r)}},localStorage.getItem("cartRemoveItemButton")),h.a.createElement("div",{className:"cart-item-price text-danger"},localStorage.getItem("cartItemNotAvailable")))))}}]),t}(g.Component),M=Object(v.b)(function(e){return{cartProducts:e.cart.products,cartTotal:e.total.data}},{})(j),R=a(50),L=a(262),B=a.n(L),Y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={coupon:sessionStorage.getItem("coupon"),inputCoupon:null,couponFailed:!1,couponFailedType:"",couponSubtotalMessage:"",couponAmount:0,isCouponApplied:!1},a.handleInput=function(e){a.setState({inputCoupon:e.target.value})},a.toggleCoupon=function(){localStorage.setItem("Couponpopup","false"),a.setState({isCouponApplied:!1})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.setItem("orderSubtotal",this.props.subtotal),localStorage.getItem("appliedCoupon")&&this.setState({inputCoupon:localStorage.getItem("appliedCoupon")},function(){var t=e.props.user.success?e.props.user.data.auth_token:null;console.log(localStorage.getItem("Couponpopup")),console.log(localStorage.getItem("Couponpopup")),"true"===localStorage.getItem("Couponpopup")&&e.setState({isCouponApplied:!0});var a=e.props.subtotal?e.props.subtotal:localStorage.getItem("orderSubtotal");e.props.applyCoupon(t,localStorage.getItem("appliedCoupon"),localStorage.getItem("restaurant_id"),e.props.subtotal),k.a.post(x.e,{token:t,coupon:localStorage.getItem("appliedCoupon"),restaurant_id:localStorage.getItem("restaurant_id"),subtotal:a}).then(function(t){var r=t.data;localStorage.setItem("appliedCoupon",r.code);var o=0;"PERCENTAGE"===r.discount_type?"DELIVERYCHARGE"===r.deduction_target?(o=sessionStorage.getItem("actualDeliveryCharge")*r.discount/100)>r.min_subtotal?e.setState({couponAmount:r.max_discount}):e.setState({couponAmount:o}):(o=a*r.discount/100)>r.max_discount?e.setState({couponAmount:r.max_discount}):e.setState({couponAmount:o}):"AMOUNT"===r.discount_type&&e.setState({couponAmount:r.discount}),e.setState({couponAmount:Math.floor(e.state.couponAmount)})})})}},{key:"componentWillReceiveProps",value:function(e){this.props.coupon!==e.coupon&&(e.coupon.success?(console.log("SUCCESS COUPON"),localStorage.setItem("appliedCoupon",e.coupon.code),this.setState({couponFailed:!1})):(console.log("COUPON Removed"),console.log("FAILED COUPON"),localStorage.removeItem("appliedCoupon"),this.setState({couponFailed:!e.coupon.hideMessage,couponFailedType:e.coupon.type,couponSubtotalMessage:e.coupon.message}))),e.coupon&&console.log("nextProps.coupon",e.coupon)}},{key:"render",value:function(){return null!==localStorage.getItem("couponAmount")&&this.setState({couponAmount:localStorage.getItem("couponAmount")}),h.a.createElement(h.a.Fragment,null,null!==this.state.inputCoupon&&""!==this.state.inputCoupon&&localStorage.getItem("appliedCoupon")?h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{onClick:this.toggleCoupon},this.state.isCouponApplied&&h.a.createElement("div",{className:"celebrate"},this.state.isCouponApplied&&h.a.createElement(B.a,null),h.a.createElement("div",{onClick:this.toggleCoupon},h.a.createElement("p",{className:"text-center"},h.a.createElement("span",null,'"',this.state.inputCoupon,'"'),h.a.createElement("br",null),"coupon applied"),h.a.createElement("button",{className:"btn btn-main celebrate-main-btn",style:{backgroundColor:localStorage.getItem("storeColor"),width:"90%",borderRadius:"4px"},onClick:this.toggleCoupon},"AWESOME!")))),h.a.createElement(R.a,{to:"/cart/coupons",delay:250},h.a.createElement("div",{className:"coupon-block d-flex justify-content-between px-15 pb-15 mx-15 mb-15 position-relative"},h.a.createElement("div",null,h.a.createElement("span",null,'"',this.state.inputCoupon,'" Code Applied'),h.a.createElement("br",null),this.props.coupon&&"DELIVERYCHARGE"===this.props.coupon.deduction_target&&h.a.createElement(h.a.Fragment,null,h.a.createElement("span",{style:{color:"#1ba672"},className:"font-weight-bold"},"YAY! ",localStorage.getItem("currencyFormat"),this.state.couponAmount," "," saved on Delivery Charge"),h.a.createElement("br",null))),h.a.createElement("div",null,h.a.createElement("i",{className:"si si-arrow-right text-muted font-size-md mt-2",style:{lineHeight:"3"}})),h.a.createElement("canvas",{height:"0",width:"0",style:{borderRadius:"inherit",height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%"}}),h.a.createElement(C.a,{duration:"500"})))):h.a.createElement(R.a,{to:"/cart/coupons",delay:250},h.a.createElement("div",{className:"coupon-block d-flex justify-content-between px-15 pb-15 mx-15 mb-15 position-relative"},h.a.createElement("div",null,h.a.createElement("img",{src:"/assets/img/various/offer.png",alt:"coupon",className:"mr-2",style:{width:"25px"}}),h.a.createElement("span",{style:{lineHeight:"2.5rem"}},localStorage.getItem("applyCouponButtonText")+" "+localStorage.getItem("cartCouponText"))),h.a.createElement("div",null,h.a.createElement("i",{className:"si si-arrow-right text-muted font-size-md",style:{lineHeight:"2"}})),h.a.createElement("canvas",{height:"0",width:"0",style:{borderRadius:"inherit",height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%"}}),h.a.createElement(C.a,{duration:"500"}))))}}]),t}(g.Component);Y.contextTypes={router:function(){return null}};var J=Object(v.b)(function(e){return{coupon:e.coupon.coupon,restaurant_info:e.items.restaurant_info,user:e.user.user}},{applyCoupon:b.a})(Y),z=a(90),U=a(43),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={comment:""},a.handleInput=function(e){a.setState({comment:e.target.value}),localStorage.setItem("orderComment",e.target.value)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.setState({comment:localStorage.getItem("orderComment")})}},{key:"render",value:function(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("textarea",{className:"form-control order-comment",type:"text",placeholder:localStorage.getItem("cartSuggestionPlaceholder"),onChange:this.handleInput,value:this.state.comment||"",rows:"1"}))}}]),t}(g.Component),H=a(317),W=a(49),K=a(358),q=a(276),G=a.n(q),Q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1,isHomeDelivery:!0},a.handlePopup=function(){a.setState({open:!a.state.open})},a.setDeliveryType=function(e){a.setState({isHomeDelivery:"delivery"===e},function(){a.state.isHomeDelivery?(a.setState({userPreferredSelectionDelivery:!0,userPreferredSelectionSelfPickup:!1}),localStorage.setItem("userPreferredSelection","DELIVERY"),localStorage.setItem("userSelected","DELIVERY")):a.state.isHomeDelivery||(a.setState({userPreferredSelectionSelfPickup:!0,userPreferredSelectionDelivery:!1}),localStorage.setItem("userPreferredSelection","SELFPICKUP"),localStorage.setItem("userSelected","SELFPICKUP")),setTimeout(function(){a.setState({open:!a.state.open}),window.location.reload()},500)})},a.displaySliderForDeliveryType=function(){return h.a.createElement("div",{className:"d-flex justify-content-center"},h.a.createElement("div",{onClick:function(){a.setDeliveryType("delivery")},className:"position-relative cart-delivery-type-img mr-30",style:{filter:"DELIVERY"===localStorage.getItem("userSelected")?"grayscale(0)":"grayscale(1)"}},h.a.createElement(G.a,{left:!0,duration:350},h.a.createElement("img",{src:"assets/img/various/home-delivery.png",className:"img-fluid",alt:localStorage.getItem("deliveryTypeDelivery")}),h.a.createElement("p",{className:"text-center font-weight-bold text-muted mb-0 mt-1"},localStorage.getItem("deliveryTypeDelivery"))),h.a.createElement(C.a,{duration:"500"})),h.a.createElement("div",{onClick:function(){a.setDeliveryType("selfpickup")},className:"position-relative cart-delivery-type-img",style:{filter:"SELFPICKUP"===localStorage.getItem("userSelected")?"grayscale(0)":"grayscale(1)"}},h.a.createElement(G.a,{right:!0,duration:350},h.a.createElement("img",{src:"assets/img/various/self-pickup.png",className:"img-fluid",alt:localStorage.getItem("deliveryTypeSelfPickup")}),h.a.createElement("p",{className:"text-center font-weight-bold text-muted mb-0 mt-1"},localStorage.getItem("deliveryTypeSelfPickup"))),h.a.createElement(C.a,{duration:"500"})))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){"false"===localStorage.getItem("enSPU")?this.setState({userPreferredSelectionDelivery:!0,isHomeDelivery:!0}):("DELIVERY"===localStorage.getItem("userSelected")&&this.setState({userPreferredSelectionDelivery:!0,isHomeDelivery:!0}),"SELFPICKUP"===localStorage.getItem("userSelected")&&this.setState({userPreferredSelectionSelfPickup:!0,isHomeDelivery:!1}))}},{key:"render",value:function(){var e=this.props.restaurant;return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"bg-white"},0===e.length?h.a.createElement(W.a,{height:150,width:400,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},h.a.createElement("rect",{x:"20",y:"70",rx:"4",ry:"4",width:"80",height:"78"}),h.a.createElement("rect",{x:"144",y:"85",rx:"0",ry:"0",width:"115",height:"18"}),h.a.createElement("rect",{x:"144",y:"115",rx:"0",ry:"0",width:"165",height:"16"})):h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"bg-light pb-10 d-flex store-info-cartpage",style:{paddingTop:"5rem"}},h.a.createElement("div",{className:"px-15 mt-5"},h.a.createElement("img",{src:e.image,alt:e.name,className:"restaurant-image mt-0"})),h.a.createElement("div",{className:"mt-5 pb-15 w-100"},h.a.createElement("h4",{className:"font-w600 mb-5 text-dark"},e.name),h.a.createElement("div",{className:"font-size-sm text-muted truncate-text text-muted"},e.description),1===e.is_pureveg&&h.a.createElement("p",{className:"mb-0"},h.a.createElement("span",{className:"font-size-sm pr-1 text-muted"},localStorage.getItem("pureVegText")),h.a.createElement("img",{src:"/assets/img/various/pure-veg.png",alt:"PureVeg",style:{width:"20px"}})),h.a.createElement("div",{className:"text-center restaurant-meta mt-5 d-flex align-items-center justify-content-between text-muted"},h.a.createElement("div",{className:"col-2 p-0 text-left store-rating-block"},h.a.createElement("i",{className:"fa fa-star",style:{color:localStorage.getItem("storeColor")}})," ",("0"===e.avgRating?e.rating:e.avgRating)+" ("+e.countRating+")"),h.a.createElement("div",{className:"col-4 p-0 text-center store-distance-block"},h.a.createElement("i",{className:"si si-clock"})," ",e.delivery_time," ",localStorage.getItem("homePageMinsText")),h.a.createElement("div",{className:"col-6 p-0 text-center store-avgprice-block"},h.a.createElement("i",{className:"si si-wallet"})," ","left"===localStorage.getItem("currencySymbolAlign")&&h.a.createElement(h.a.Fragment,null,localStorage.getItem("currencyFormat"),e.price_range," "),"right"===localStorage.getItem("currencySymbolAlign")&&h.a.createElement(h.a.Fragment,null,e.price_range,localStorage.getItem("currencyFormat")," "),localStorage.getItem("homePageForTwoText"))))),"true"===localStorage.getItem("enSPU")&&3===e.delivery_type&&h.a.createElement("div",{className:"px-15 py-1 bg-light",style:{fontSize:"12px"}},h.a.createElement("p",{className:"mb-0"},localStorage.getItem("cartDeliveryTypeOptionAvailableText")),h.a.createElement("span",{className:"mr-1"},localStorage.getItem("cartDeliveryTypeSelectedText"),":"," "),h.a.createElement("span",{className:"font-weight-bold mr-1",style:{color:localStorage.getItem("storeColor")}},"DELIVERY"===localStorage.getItem("userSelected")?localStorage.getItem("deliveryTypeDelivery"):localStorage.getItem("deliveryTypeSelfPickup")),h.a.createElement("span",{onClick:this.handlePopup},"(",h.a.createElement("u",null,localStorage.getItem("cartDeliveryTypeChangeButtonText")),")")),h.a.createElement(K.a,{fullWidth:!0,fullScreen:!1,open:this.state.open,onClose:this.handlePopup,style:{width:"100%",margin:"auto"},PaperProps:{style:{backgroundColor:"#fff",borderRadius:"4px"}}},h.a.createElement("div",{className:"container",style:{borderRadius:"4px",height:"220px"}},h.a.createElement("div",{className:"col-12 pt-20 pb-30"},h.a.createElement("h1",{className:"mt-2 mb-0 font-weight-black h4 mb-30 text-center"},localStorage.getItem("cartChooseDeliveryTypeTitle")),this.displaySliderForDeliveryType()))))))}}]),t}(g.Component),$=a(234),X=a(246),Z=a(59),ee=a(238),te=a(12),ae=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"bg-white"},h.a.createElement("div",{className:"d-flex justify-content-center mt-100 mb-20"},h.a.createElement("img",{className:"offline-mode-img text-center",src:"/assets/img/various/user-ban.png",alt:"user-ban"})),"<p><br></p>"!==localStorage.getItem("userInActiveMessage")&&"null"!==localStorage.getItem("userInActiveMessage")&&""!==localStorage.getItem("userInActiveMessage")&&h.a.createElement("div",{dangerouslySetInnerHTML:{__html:localStorage.getItem("userInActiveMessage")}})))}}]),t}(g.Component),re=a(289),oe=a.n(re),ne=a(247),le=a.n(ne),se=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={timeStops:[],time:[],day:"",slotsArray:[],days:[],sortedArray:[],open:!1,todayDate:null,selectedDate:null,slotsDays:[],selectedSlot:{}},a.getCurrentDay=function(e){var t;switch(e){case 0:t="sunday";break;case 1:t="monday";break;case 2:t="tuesday";break;case 3:t="wednesday";break;case 4:t="thursday";break;case 5:t="friday";break;case 6:t="saturday";break;default:t=""}return a.setState({day:t}),t},a.getCurrentWeek=function(){for(var e=le()(),t=e.clone().startOf("isoWeek"),r=e.clone().endOf("isoWeek")+1,o=[],n=[],l=0;l<=6;l++)o.push({day:le()(t).add(l,"days").format("dddd"),date:le()(t).add(l,"days").format("YYYY-MM-DD")}),n.push({day:le()(r).add(l,"days").format("dddd"),date:le()(r).add(l,"days").format("YYYY-MM-DD")});for(var s=[],c=0;c<o.length;c++)le()(o[c].date).isSameOrAfter(le()(new Date).format("YYYY-MM-DD"))&&s.push(o[c]);if(parseInt(localStorage.getItem("orderSchedulingFutureDays"))>s.length){var i=s.concat(n).filter(function(e){return a.state.slotsDays.some(function(t){return e.day.toLowerCase()===t.days.toLowerCase()})});a.setState({days:i},function(){a.daysAvailable(a.state.days)})}else{var u=s.filter(function(e){return a.state.slotsDays.some(function(t){return e.day.toLowerCase()===t.days.toLowerCase()})});a.setState({days:u},function(){a.daysAvailable(a.state.days)})}},a.daysAvailable=function(){if(a.state.days.length>0)if(a.state.days.sort(function(e,t){return new Date(e.date)-new Date(t.date)}),"true"===localStorage.getItem("enFixedNumberOfDays")){var e=a.state.days.slice(0,parseInt(localStorage.getItem("orderSchedulingFutureDays")));if(e.length>0){var t=e.filter(function(e){return a.state.slotsDays.some(function(t){return e.day.toLowerCase()===t.days.toLowerCase()})});a.setState({sortedArray:t})}}else a.setState({sortedArray:a.state.days})},a.getSlots=function(e,t,r){var o=[];if(e&&e.length>0)for(var n=0;n<e.length;n++)for(var l=le()(),s=l.format().split("T")[0],c=l.format().split("+")[1],i=le()(s+"T"+e[n].open+":00+"+c),u=le()(s+"T"+e[n].close+":00+"+c),m=le.a.duration(u.diff(i)),d=Math.floor(2*m.asHours()),p="",g=0;g<d;g++){0===g&&(p=e[n].open);var h=le()(p,"hh:mm A");h.add(t,r);var f={open:le()(p,"hh:mm A").format("hh:mm A"),close:h.format("hh:mm A")};o.push(f),p=h.format("HH:mm A").split(" ")[0]}return a.setState({slotsArray:o}),o},a.setDay=function(e){a.setState({day:e.day,selectedDate:e.date,selectedSlot:{}});var t={day:e.day,date:e.date};if(localStorage.setItem("orderDate",JSON.stringify(t)),e.day!==a.state.day&&localStorage.removeItem("orderSlot"),e){var r=JSON.parse(a.props.restaurant.schedule_data)[a.getCurrentDay("sunday"===e.day.toLowerCase()?0:"monday"===e.day.toLowerCase()?1:"tuesday"===e.day.toLowerCase()?2:"wednesday"===e.day.toLowerCase()?3:"thursday"===e.day.toLowerCase()?4:"friday"===e.day.toLowerCase()?5:6)];a.getSlots(r,30,"m")}},a.toggleSchedulePopup=function(){a.setState({open:!a.state.open})},a.chooseOrderSlot=function(e){if(null===localStorage.getItem("orderDate")){var t={day:a.state.day,date:le()(new Date).format("YYYY-MM-DD")};localStorage.setItem("orderDate",JSON.stringify(t))}localStorage.setItem("orderSlot",JSON.stringify(e)),a.setState({selectedSlot:e})},a.renderScheduleButton=function(){var e=localStorage.getItem("orderDate"),t=localStorage.getItem("orderSlot");if(null===e||null===t)return h.a.createElement(h.a.Fragment,null,h.a.createElement("i",{className:"si si-clock"}),h.a.createElement("span",{className:"ml-2"},localStorage.getItem("modOSScheduleThisOrderText")));var r=JSON.parse(e),o=JSON.parse(t);return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"d-flex justify-content-between w-100"},h.a.createElement("div",null,h.a.createElement("span",null,localStorage.getItem("modOSScheduleForText")," ",r.day," ",h.a.createElement("small",{className:"text-white"},"(",r.date,")")," ",h.a.createElement("br",null),"(",o.open," ","- ",o.close,")")),h.a.createElement("div",null,h.a.createElement("button",{className:"btn btn-sm",onClick:a.removeSelectedSchedule},localStorage.getItem("modOSRemoveBtnText")))))},a.removeSelectedSchedule=function(e){e.stopPropagation(),localStorage.removeItem("orderDate"),localStorage.removeItem("orderSlot"),a.setState({selectedDate:null,selectedSlot:{},slotsArray:[]})},a.renderDoneButton=function(){var e=localStorage.getItem("orderDate"),t=localStorage.getItem("orderSlot");if(null!==e&&null!==t&&a.state.open)return h.a.createElement(h.a.Fragment,null,h.a.createElement("button",{className:"btn btn-main",style:{color:localStorage.getItem("cartColorText"),backgroundColor:localStorage.getItem("cartColorBg"),position:"fixed",bottom:"0",zIndex:"9999999"},onClick:a.toggleSchedulePopup},localStorage.getItem("modOSDoneBtnText")))},a.getFirstSlot=function(e){var t=le()(a.state.currentTime,"hh:mm A").add(a.props.restaurant.schedule_slot_buffer,"minutes"),r=le()(e.open,"hh:mm A");return!!t.isSameOrBefore(r)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getCurrentDay(),JSON.parse(this.props.restaurant.schedule_data)&&this.getSlots(JSON.parse(this.props.restaurant.schedule_data)[this.getCurrentDay((new Date).getDay())],30,"m");var t=new Date;this.setState({todayDate:le()(new Date).format("YYYY-MM-DD"),currentTime:le()(t.getTime()).format("hh:mm A"),selectedDate:le()(new Date).format("YYYY-MM-DD")});for(var a=[],r=0;r<Object.keys(JSON.parse(this.props.restaurant.schedule_data)).length;r++)a.push({days:Object.keys(JSON.parse(this.props.restaurant.schedule_data))[r]});this.setState({slotsDays:a},function(){e.getCurrentWeek()})}},{key:"render",value:function(){var e=this;return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"schedule-order-btn p-10 mx-15 mt-2",onClick:this.toggleSchedulePopup},h.a.createElement(h.a.Fragment,null,this.renderScheduleButton())),h.a.createElement(K.a,{maxWidth:!1,fullWidth:!0,fullScreen:!0,open:this.state.open,onClose:this.toggleSchedulePopup,style:{margin:"auto",position:"absolute",bottom:"0",top:"25%"},PaperProps:{style:{backgroundColor:"#fff",borderTopLeftRadius:"15px",borderTopRightRadius:"15px"}}},h.a.createElement("div",{className:"container p-0 m-0",style:{borderRadius:"5px"}},h.a.createElement("h3",{className:"text-center my-20"},localStorage.getItem("modOSSelectDateTimeText")),h.a.createElement("div",{className:"slider-wrapper secondary-slider-wrapper sticky-top my-0 mr-20"},this.state.sortedArray.length>0&&h.a.createElement(h.a.Fragment,null,this.state.sortedArray.map(function(t){return h.a.createElement("div",{key:t.date,className:"slider-wrapper__img-wrapper time-slots",style:{backgroundColor:e.state.day.toLowerCase()===t.day.toLowerCase()&&e.state.selectedDate===t.date?localStorage.getItem("cartColorBg"):"transparent",color:e.state.day.toLowerCase()===t.day.toLowerCase()&&e.state.selectedDate===t.date?localStorage.getItem("cartColorText"):"#000"},onClick:function(){return e.setDay(t)}},t.date===e.state.todayDate?"Today":t.date===le()().clone().add(1,"days").format("YYYY-MM-DD")?"Tomorrow":le()(t.date).format("Do MMM")+" "+t.day.slice(0,3))}))),h.a.createElement("div",{className:"time-slots-holder"},this.state.slotsArray.map(function(t,a){return h.a.createElement(h.a.Fragment,{key:a},e.state.todayDate===e.state.selectedDate?h.a.createElement(h.a.Fragment,null,e.getFirstSlot(t)&&h.a.createElement("div",{className:"available-time-slot-block"},h.a.createElement("span",{className:e.state.selectedSlot.open===t.open?"selected-slot":"",onClick:function(){return e.chooseOrderSlot(t)}},t.open+" - "+t.close),h.a.createElement("hr",null))):h.a.createElement("div",{className:"available-time-slot-block"},h.a.createElement("span",{className:e.state.selectedSlot.open===t.open?"selected-slot":"",onClick:function(){return e.chooseOrderSlot(t)}},t.open+" - "+t.close),h.a.createElement("hr",null)))})))),this.renderDoneButton())}}]),t}(g.Component),ce=(a(291),function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,i=new Array(o),d=0;d<o;d++)i[d]=arguments[d];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={loading:!0,alreadyRunningOrders:!1,is_operational_loading:!0,is_operational:!0,distance:0,is_active:!1,min_order_satisfied:!1,process_cart_loading:!1,is_all_items_available:!1,process_distance_calc_loading:!1,userBan:!1,tips:[],tips_percentage:[],tipsPercentageSetting:!1,tipsAmountSetting:!1,others:!1,percentage:!1,selectedTips:{type:"amount",value:0},is_tips_show:!0,isfreeitemApplied:!0},a.fetchCheckBanAgain=function(e){a.props.checkBan(e).then(function(e){e&&(e.success?a.cartOperationalSteps():a.setState({userBan:!0,loading:!1}))})},a.cartOperationalSteps=function(){var e=a.props.user;a.setState({loading:!1}),a.props.cartProducts.length&&(document.getElementsByTagName("body")[0].classList.add("bg-grey"),a.checkForItemsAvailability()),e.success?(a.props.checkUserRunningOrder(e.data.id,e.data.auth_token),a.props.cartProducts.length>0&&a.props.updateUserInfo(e.data.id,e.data.auth_token).then(function(e){if("undefined"!==typeof e)if(null!==e.payload.data.default_address){var t={lat:e.payload.data.default_address.latitude,lng:e.payload.data.default_address.longitude,address:e.payload.data.default_address.address,house:e.payload.data.default_address.house,tag:e.payload.data.default_address.tag};new Promise(function(e){localStorage.setItem("userSetAddress",JSON.stringify(t)),e("Address Saved")}).then(function(){a.initRestaurantInfoApi()})}else a.initRestaurantInfoApi();else console.warn("Failed to fetch update user info... Solution: Reload Page")})):(a.initRestaurantInfoApi(),a.setState({alreadyRunningOrders:!1}))},a.initRestaurantInfoApi=function(){null!==localStorage.getItem("activeRestaurant")&&a.props.cartProducts.length>0&&a.props.getRestaurantInfoById(localStorage.getItem("activeRestaurant")).then(function(e){e&&e.payload.id&&a.__doesRestaurantOperatesAtThisLocation(e.payload)})},a.__checkMinFreeItemAndAddToCart=function(e,t){var r=a.props,o=r.cartProducts,n=r.updateCart;if(console.log(e),t>=e.item_offer_min_subtotal){var l=e.free_items,c=Math.floor(Math.random()*l.length),i=Object(s.a)({},l[c],{price:"0.00",quantity:1,freeitem:!0});o.push(i),n(o),a.setState({isfreeitemApplied:!1}),localStorage.setItem("isfreeitemApplied","false")}},a.__checkMinFreeItemAndRemoveFromCart=function(){var e=a.props,t=e.cartProducts,r=e.updateCart,o=e.cartTotal;if(!(e.restaurant_info.item_offer_min_subtotal<=o.totalPrice)&&!1===a.state.isfreeitemApplied){var n=t.findIndex(function(e){return!0===e.freeitem});console.log(n),t.splice(n,1),r(t),localStorage.setItem("isfreeitemApplied","true"),a.setState({isfreeitemApplied:!0})}},a.addProductQuantity=function(e){var t=a.props,r=t.cartProducts,o=t.updateCart,n=!1;r.forEach(function(t){t.id===e.id&&JSON.stringify(t.selectedaddons)===JSON.stringify(e.selectedaddons)&&(t.quantity+=1,n=!0)}),n||r.push(e),localStorage.getItem("appliedCoupon")&&(localStorage.removeItem("appliedCoupon"),localStorage.removeItem("couponAppliedAmount")),o(r),a.props.removeCoupon()},a.removeProductQuantity=function(){var e=Object(l.a)(n.a.mark(function e(t){var r,o,l,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.props,o=r.cartProducts,l=r.updateCart,!((s=o.findIndex(function(e){return e.id===t.id&&JSON.stringify(e)===JSON.stringify(t)}))>=0)){e.next=9;break}return o.forEach(function(e){e.id===t.id&&JSON.stringify(e)===JSON.stringify(t)&&(1===e.quantity?o.splice(s,1):e.quantity-=1)}),localStorage.getItem("appliedCoupon")&&(localStorage.removeItem("appliedCoupon"),localStorage.removeItem("couponAppliedAmount")),e.next=7,l(o);case 7:a.props.removeCoupon(),a.__checkMinFreeItemAndRemoveFromCart();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.removeProduct=function(e){var t=a.props,r=t.cartProducts,o=t.updateCart,n=r.findIndex(function(t){return t.id===e.id});r.splice(n,1),o(r),a.props.removeCoupon(),a.checkForItemsAvailability()},a.__doesRestaurantOperatesAtThisLocation=function(e){var t=a.props.user;if(t.success&&null!==t.data.default_address){var r=Object(p.a)(Object(p.a)(a)),o=0;"true"===localStorage.getItem("enGDMA")?(a.setState({process_distance_calc_loading:!0}),o=Object(X.a)(e.longitude,e.latitude,t.data.default_address.longitude,t.data.default_address.latitude,a.props.google,function(a){console.log("Distance:",a),r.setState({distance:a,process_distance_calc_loading:!1},r.__processRestaurantOperationalState(e.id,t.data.default_address.latitude,t.data.default_address.longitude))})):(o=Object($.a)(e.longitude,e.latitude,t.data.default_address.longitude,t.data.default_address.latitude),a.setState({distance:o},a.__processRestaurantOperationalState(e.id,t.data.default_address.latitude,t.data.default_address.longitude)))}else{var n=Object(p.a)(Object(p.a)(a)),l=0;null!==localStorage.getItem("userSetAddress")?"true"===localStorage.getItem("enGDMA")?l=Object(X.a)(e.longitude,e.latitude,JSON.parse(localStorage.getItem("userSetAddress")).lng,JSON.parse(localStorage.getItem("userSetAddress")).lat,a.props.google,function(t){console.log(t),n.setState({distance:t},n.__processRestaurantOperationalState(e.id,JSON.parse(localStorage.getItem("userSetAddress")).lat,JSON.parse(localStorage.getItem("userSetAddress")).lng))}):(l=Object($.a)(e.longitude,e.latitude,JSON.parse(localStorage.getItem("userSetAddress")).lng,JSON.parse(localStorage.getItem("userSetAddress")).lat),a.setState({distance:l},a.__processRestaurantOperationalState(e.id,JSON.parse(localStorage.getItem("userSetAddress")).lat,JSON.parse(localStorage.getItem("userSetAddress")).lng))):a.setState({is_operational:!0,is_operational_loading:!1}),console.log("Distance -> ",a.state.distance)}},a.__processRestaurantOperationalState=function(e,t,r){a.props.getRestaurantInfoAndOperationalStatus(e,t,r).then(function(e){e&&(e.payload.is_operational?a.setState({is_operational:!0,is_operational_loading:!1}):a.setState({is_operational:!1,is_operational_loading:!1}))})},a.__isRestaurantActive=function(e){e.is_active&&a.setState({is_active:!0})},a.__checkMinOrderSatisfied=function(e,t){e.min_order_price>0?parseFloat(Object(S.a)(t.totalPrice))>=parseFloat(Object(S.a)(e.min_order_price))?a.setState({min_order_satisfied:!0}):a.setState({min_order_satisfied:!1}):a.setState({min_order_satisfied:!0})},a.checkForItemsAvailability=function(){var e=a.props,t=e.checkCartItemsAvailability,r=e.cartProducts,o=e.addProduct,n=e.updateCart;a.handleProcessCartLoading(!0),t(r).then(function(e){if(a.handleProcessCartLoading(!1),a.setState({process_cart_loading:!1}),e&&e.length){var t=!1;e.map(function(e){var a=r.find(function(t){return t.id===e.id});return a.is_active=e.is_active,a.freeitem||(a.price=e.price),o(a),t||e.is_active||(t=!0),a}),t?a.handleItemsAvailability(!1):a.handleItemsAvailability(!0)}n(a.props.cartProducts)})},a.handleProcessCartLoading=function(e){a.setState({process_cart_loading:e})},a.handleItemsAvailability=function(e){a.setState({is_all_items_available:e})},a.showOtherText=function(e){localStorage.setItem("cart_tips",JSON.stringify({type:e,value:0})),a.setState({others:"total"===e,percentage:"percentage"===e,selectedTips:{type:e,value:0}})},a.addTip=function(e,t){localStorage.setItem("cart_tips",JSON.stringify({type:e,value:t})),a.setState({others:!1,percentage:!1,selectedTips:{type:e,value:t}})},a.addTipInPercentage=function(e,t){var r=a.props.cartTotal.totalPrice*t/100;localStorage.setItem("cart_tips",JSON.stringify({type:e,value:r})),a.setState({others:!1,percentage:!1,selectedTips:{type:e,value:r}})},a.restrictAlphabates=function(e){var t=e.target,o=t.value,n=t.min,l=t.max;if(o=Math.max(Number(n),Math.min(Number(l),Number(o))),""===e.target.value||/^[0-9\b]+$/.test(e.target.value)){if("percentageValue"===e.target.name&&""!==o){var s,c=a.props.cartTotal.totalPrice*o/100;localStorage.setItem("cart_tips",JSON.stringify({type:"percentage",value:c})),a.setState((s={},Object(r.a)(s,e.target.name,o),Object(r.a)(s,"selectedTips",{type:e.target.name,value:c}),s))}var i;if("flatAmount"===e.target.name&&""!==o)localStorage.setItem("cart_tips",JSON.stringify({type:"total",value:o})),a.setState((i={},Object(r.a)(i,e.target.name,o),Object(r.a)(i,"selectedTips",{type:e.target.name,value:o}),i))}a.setState({value:o})},a.removeTip=function(){a.setState({others:!1,percentage:!1,selectedTips:{type:"amount",value:0}}),localStorage.removeItem("cart_tips"),a.setState({tipsAmountSetting:!1,tipsPercentageSetting:!1},function(){a.setState({tipsAmountSetting:JSON.parse(localStorage.getItem("showTipsAmount").toLowerCase()),tipsPercentageSetting:JSON.parse(localStorage.getItem("showTipsPercentage").toLowerCase())})})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(n.a.mark(function e(){var t,a=this;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(sessionStorage.setItem("offerItemsAdded",!1),localStorage.removeItem("cart_tips"),localStorage.removeItem("fromCart"),"false"!==localStorage.getItem("isfreeitemApplied")){e.next=6;break}return e.next=6,this.setState({isfreeitemApplied:!1});case 6:if(!(t=this.props.user).success){e.next=21;break}return e.next=10,this.props.checkBan(t.data.auth_token).then(function(){var e=Object(l.a)(n.a.mark(function e(r){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=10;break}if(r.success){e.next=6;break}return e.next=4,a.setState({userBan:!0,loading:!1});case 4:e.next=8;break;case 6:return e.next=8,a.cartOperationalSteps();case 8:e.next=11;break;case 10:setTimeout(Object(l.a)(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchCheckBanAgain(t.data.auth_token);case 2:case"end":return e.stop()}},e,this)})),2500);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,this.setState({tips:null!==localStorage.getItem("tips")&&localStorage.getItem("tips").split(","),tips_percentage:null!==localStorage.getItem("tips_percentage")&&localStorage.getItem("tips_percentage").split(","),tipsAmountSetting:null!==localStorage.getItem("showTipsAmount")&&JSON.parse(localStorage.getItem("showTipsAmount").toLowerCase()),tipsPercentageSetting:null!==localStorage.getItem("showTipsPercentage")&&JSON.parse(localStorage.getItem("showTipsPercentage").toLowerCase())});case 12:if("SELFPICKUP"!==localStorage.getItem("userSelected")){e.next=17;break}return e.next=15,this.setState({is_tips_show:!0});case 15:e.next=19;break;case 17:return e.next=19,this.setState({is_tips_show:!1});case 19:e.next=23;break;case 21:return e.next=23,this.cartOperationalSteps();case 23:setTimeout(Object(l.a)(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.__checkMinFreeItemAndRemoveFromCart();case 1:case"end":return e.stop()}},e,this)})),1e3);case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){e.restaurant_info.id&&(this.__isRestaurantActive(e.restaurant_info),this.__checkMinOrderSatisfied(e.restaurant_info,e.cartTotal)),e.running_order&&this.setState({alreadyRunningOrders:!0}),e.force_reload&&(this.setState({loading:!0}),window.location.reload())}},{key:"componentWillUnmount",value:function(){document.getElementsByTagName("body")[0].classList.remove("bg-grey"),this.props.confirmCart||localStorage.removeItem("cart_tips")}},{key:"render",value:function(){var e=this;if(this.state.userBan)return h.a.createElement(ae,null);if(window.innerWidth>768)return h.a.createElement(H.a,{to:"/"});this.props.cartProducts.length||document.getElementsByTagName("body")[0].classList.remove("bg-grey");var t=this.props,a=t.cartTotal,r=t.cartProducts,o=t.restaurant_info,n=t.user;return h.a.createElement(h.a.Fragment,null,h.a.createElement(U.a,{seotitle:localStorage.getItem("cartPageTitle"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),(this.state.loading||this.state.process_distance_calc_loading||this.state.process_cart_loading)&&h.a.createElement("div",{className:"height-100 overlay-loading ongoing-payment-spin"},h.a.createElement("div",{className:"spin-load"})),!this.state.loading&&h.a.createElement(h.a.Fragment,null,h.a.createElement(y.a,{boxshadow:!0,has_title:!0,title:localStorage.getItem("cartPageTitle"),disable_search:!0,homeButton:!0}),r.length?h.a.createElement(h.a.Fragment,null,"<p><br></p>"!==localStorage.getItem("customCartMessage")&&"null"!==localStorage.getItem("customCartMessage")&&""!==localStorage.getItem("customCartMessage")&&h.a.createElement("div",{style:{position:"relative",paddingTop:"4rem",marginBottom:"-3rem"},dangerouslySetInnerHTML:{__html:localStorage.getItem("customCartMessage")}}),h.a.createElement(Q,{restaurant:o}),n.success&&1===parseInt(o.is_schedulable)&&1===parseInt(o.accept_scheduled_orders)&&"true"===localStorage.getItem("enableOrderSchedulingOnCustomer")&&null!==o.schedule_data&&this.state.is_active&&h.a.createElement(se,{restaurant:o}),h.a.createElement("div",{className:"p-15"},h.a.createElement("div",{className:"block-content block-content-full bg-white pt-10 pb-5",style:{borderTopLeftRadius:"5px",borderTopRightRadius:"5px"}},h.a.createElement("h2",{className:"item-text mb-10"},localStorage.getItem("cartItemsInCartText")),r.map(function(t,a){return h.a.createElement(M,{item:t,addProductQuantity:e.addProductQuantity,removeProductQuantity:e.removeProductQuantity,removeProduct:e.removeProduct,key:t.name+t.id+a})})),h.a.createElement(V,null)),1===o.item_offers&&o.item_offer_min_subtotal<=a.totalPrice&&"false"===sessionStorage.getItem("offerItemsAdded")&&this.state.isfreeitemApplied&&h.a.createElement("div",{onClick:function(){return e.__checkMinFreeItemAndAddToCart(o,a.totalPrice)}},h.a.createElement("div",{className:"celebrate"},h.a.createElement(B.a,null),h.a.createElement("div",{className:"w-75"},h.a.createElement("h3",{className:"text-center"},"YAY!"),h.a.createElement("h1",{className:"text-center"},"You've got a free item!"),h.a.createElement("img",{src:"/assets/img/cart-gift.gif",alt:"gift",className:"text-center",width:"100%"}),h.a.createElement("button",{className:"btn btn-main celebrate-main-btn",style:{backgroundColor:localStorage.getItem("storeColor"),width:"90%",borderRadius:"4px"}},"CLAIM!")))),(this.state.tipsAmountSetting||this.state.tipsPercentageSetting)&&h.a.createElement("div",{className:"mx-15 mb-15 tips-block"},this.state.tips&&!1===this.state.is_tips_show&&h.a.createElement("div",{className:"block-content block-content-full bg-white pt-10 pb-5"},h.a.createElement("div",{className:this.state.tipsAmountSetting||this.state.tipsPercentageSetting?"d-show":"d-none"},h.a.createElement("p",{className:"item-text mb-10"},h.a.createElement("strong",null,localStorage.getItem("tipsForDeliveryText"))),h.a.createElement("p",null," ",localStorage.getItem("tipsThanksText"),".")),this.state.tipsAmountSetting&&h.a.createElement("div",{className:"tip-switch-field"},this.state.tips.map(function(t,a){return h.a.createElement("div",{key:a,className:"tips"},h.a.createElement("input",{style:{backgroundColor:localStorage.getItem("cartColorBg"),color:"#ffffff"},type:"radio",value:t,id:a,name:"switch-two",onClick:function(){return e.addTip("amount",t)}}),h.a.createElement("label",{htmlFor:a,className:" ".concat(a>0&&"ml-5")},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),t,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")))}),h.a.createElement("div",{className:"tips"},h.a.createElement("input",{style:{backgroundColor:localStorage.getItem("cartColorBg"),color:"#ffffff"},type:"radio",value:"other",id:"others",name:"switch-two",onClick:function(t){return e.showOtherText("total")}}),h.a.createElement("label",{htmlFor:"others",className:"ml-5"},localStorage.getItem("tipsOtherText")))),this.state.others&&h.a.createElement("input",{className:"form-control custom-tip-input mb-15",name:"flatAmount",type:"text",placeholder:localStorage.getItem("cartTipAmountPlaceholderText"),value:this.state.flatAmount||"",onChange:this.restrictAlphabates,onKeyPress:this.restrictAlphabates,min:"0",max:"10000"}),this.state.tipsPercentageSetting&&h.a.createElement("div",{className:"tip-switch-field"},this.state.tips_percentage.map(function(t,a){return h.a.createElement("div",{key:a,className:"tips_percentage"},h.a.createElement("input",{style:{backgroundColor:localStorage.getItem("cartColorBg"),color:"#ffffff"},type:"radio",value:t,id:"".concat(a,"_tips_percentage"),name:"switch-two",onClick:function(){return e.addTipInPercentage("amount",t)}}),h.a.createElement("label",{htmlFor:"".concat(a,"_tips_percentage"),className:" ".concat(a>0&&"ml-5")}," ",t,"%"))}),h.a.createElement("div",{className:"tips"},h.a.createElement("input",{style:{backgroundColor:localStorage.getItem("cartColorBg"),color:"#ffffff"},type:"radio",value:"percentage",id:"percentage",name:"switch-two",onClick:function(){return e.showOtherText("percentage")}}),h.a.createElement("label",{htmlFor:"percentage",className:"ml-5"},localStorage.getItem("tipsOtherText")))),this.state.percentage&&h.a.createElement("input",{className:"form-control custom-tip-input mb-15",name:"percentageValue",type:"text",placeholder:localStorage.getItem("cartTipPercentagePlaceholderText"),value:this.state.percentageValue||"",onChange:this.restrictAlphabates,onKeyPress:this.restrictAlphabates,min:"0",max:"100"}))),h.a.createElement("div",null,h.a.createElement(J,{subtotal:this.props.cartTotal.totalPrice}),this.state.alreadyRunningOrders&&h.a.createElement("div",{className:"px-15"},h.a.createElement("div",{className:"auth-error ongoing-order-notify"},h.a.createElement(R.a,{to:"/my-orders",delay:250,className:"ml-2"},localStorage.getItem("ongoingOrderMsg")," ",h.a.createElement("i",{className:"si si-arrow-right ml-1",style:{fontSize:"0.7rem"}}),h.a.createElement(C.a,{duration:"500"})))),this.props.restaurant_info.zone&&1===this.props.restaurant_info.zone.delivery_surcharge_active&&h.a.createElement("div",{className:"px-15 mt-2 mb-2"},h.a.createElement("div",{className:"auth-error home-page-delivery-surcharge-notify ongoing-order-notify bg-danger",style:{borderRadius:"4px",position:"relative",zIndex:"0"}},"Due to ",h.a.createElement("b",null,this.props.restaurant_info.zone.delivery_surcharge_reason),", delivery costs have been increased by "," ","fixed"===this.props.restaurant_info.zone.delivery_surcharge_type&&h.a.createElement("b",null,localStorage.getItem("currencyFormat")+this.props.restaurant_info.zone.delivery_surcharge_rate),"percentage"===this.props.restaurant_info.zone.delivery_surcharge_type&&h.a.createElement("b",null,this.props.restaurant_info.zone.delivery_surcharge_rate+"%")))),Object.keys(this.props.restaurant_info).length>0&&h.a.createElement("div",null,h.a.createElement(E,{total:a.totalPrice,distance:this.state.distance,alreadyRunningOrders:this.state.alreadyRunningOrders,tips:this.state.selectedTips,removeTip:this.removeTip})),this.state.is_operational_loading?h.a.createElement(te.a,null):h.a.createElement(h.a.Fragment,null,this.state.is_active?h.a.createElement(h.a.Fragment,null,this.state.min_order_satisfied?h.a.createElement(h.a.Fragment,null,this.state.is_all_items_available&&h.a.createElement(P,{restaurant_id:this.props.restaurant_info.id,cart_page:this.context.router.route.location.pathname,is_operational_loading:this.state.is_operational_loading,is_operational:this.state.is_operational,handleProcessCartLoading:this.handleProcessCartLoading,checkForItemsAvailability:this.checkForItemsAvailability,handleItemsAvailability:this.handleItemsAvailability})):h.a.createElement("div",{className:"auth-error no-click"},h.a.createElement("div",{className:"error-shake"},localStorage.getItem("restaurantMinOrderMessage")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.restaurant_info.min_order_price,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")))):h.a.createElement("div",{className:"auth-error no-click"},h.a.createElement("div",{className:"error-shake"},this.props.restaurant_info&&this.props.restaurant_info.name," :"," ",localStorage.getItem("notAcceptingOrdersMsg"))))):h.a.createElement("div",{className:"bg-white cart-empty-block"},h.a.createElement(oe.a,null,h.a.createElement("div",{className:"d-flex justify-content-center"},h.a.createElement("img",{className:"cart-empty-img",src:"/assets/img/various/cart-empty-dkpg.png",alt:localStorage.getItem("cartEmptyText")}))),h.a.createElement("h2",{className:"cart-empty-text mt-50 text-center"},localStorage.getItem("cartEmptyText")),this.state.alreadyRunningOrders&&h.a.createElement("div",{className:"auth-error ongoing-order-notify",style:{position:"fixed",bottom:"4.5rem"}},h.a.createElement(R.a,{to:"/my-orders",delay:250,className:"ml-2"},localStorage.getItem("ongoingOrderMsg")," ",h.a.createElement("i",{className:"si si-arrow-right ml-1",style:{fontSize:"0.7rem"}}),h.a.createElement(C.a,{duration:"500"}))),h.a.createElement(z.a,{active_cart:!0,user:n}))))}}]),t}(g.Component));ce.contextTypes={router:function(){return null}};t.default=Object(ee.GoogleApiWrapper)({apiKey:localStorage.getItem("googleApiKey"),LoadingContainer:te.a})(Object(v.b)(function(e){return{restaurant_info:e.items.restaurant_info,cartProducts:e.cart.products,cartTotal:e.total.data,user:e.user.user,running_order:e.user.running_order,restaurant:e.restaurant,coupon:e.coupon.coupon,force_reload:e.helper.force_reload,tips:e.tips,tips_percentage:e.tips_percentage,confirmCart:e.confirmCart.confirmCart}},{checkUserRunningOrder:f.d,updateCart:T.a,getRestaurantInfoById:Z.d,updateUserInfo:f.p,addProduct:w.a,checkCartItemsAvailability:F,checkBan:f.c,getRestaurantInfoAndOperationalStatus:Z.c,removeCoupon:b.c})(ce))}}]);