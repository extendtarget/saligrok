(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{223:function(e,t,a){"use strict";var r=a(6),o=a(7),l=a(9),n=a(8),c=a(10),s=a(0),i=a.n(s),m=a(18),d=a.n(m),u=a(222),g=a.n(u),p=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(n.a)(t)).call.apply(e,[this].concat(c)))).state={shareButton:!1,androidShareButton:!1},a.shareLink=function(e){navigator.share&&navigator.share({url:e.link}).then(function(){return console.log("Successful share")}).catch(function(e){return console.log("Error sharing",e)})},a.shareLinkViaAndroidApp=function(e){"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&window.Android.shareDataThroughIntent(e.link)},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){navigator.share&&this.setState({shareButton:!0}),"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&this.setState({shareButton:!1,androidShareButton:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,this.state.shareButton&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-share-btn",style:{position:"relative"},onClick:function(){return e.shareLink(e.props)}},i.a.createElement("i",{className:"si si-share"}),i.a.createElement(d.a,{duration:"500"})),this.state.androidShareButton&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-share-btn",style:{position:"relative"},onClick:function(){return e.shareLinkViaAndroidApp(e.props)}},i.a.createElement("i",{className:"si si-share"}),i.a.createElement(d.a,{duration:"500"})))}}]),t}(s.Component),h=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(n.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 p-0 fixed",style:{zIndex:"9"}},i.a.createElement("div",{className:"block m-0"},i.a.createElement("div",{className:"block-content p-0 ".concat(this.props.dark&&"nav-dark")},i.a.createElement("div",{className:"input-group ".concat(this.props.boxshadow&&"search-box")},!this.props.disable_back_button&&i.a.createElement("div",{className:"input-group-prepend"},this.props.back_to_home&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(d.a,{duration:"500"})),this.props.goto_orders_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-orders")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(d.a,{duration:"500"})),this.props.goto_accounts_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-account")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(d.a,{duration:"500"})),!this.props.back_to_home&&!this.props.goto_orders_page&&!this.props.goto_accounts_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns ".concat(this.props.dark&&"nav-dark"),style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.goBack()},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(d.a,{duration:"500"}))),i.a.createElement("p",{className:"form-control search-input d-flex align-items-center ".concat(this.props.dark&&"nav-dark")},this.props.logo&&i.a.createElement("img",{src:"/assets/img/logos/logo.png",alt:localStorage.getItem("storeName"),width:"120"}),this.props.has_title?i.a.createElement(i.a.Fragment,null,this.props.from_checkout?i.a.createElement("span",{className:"nav-page-title",id:"checkoutNavPageTitle"},localStorage.getItem("cartToPayText")," ",i.a.createElement("span",{style:{color:localStorage.getItem("storeColor")}},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.title,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))):i.a.createElement("span",{className:"nav-page-title"},this.props.title)):null,this.props.has_delivery_icon&&i.a.createElement(g.a,{left:!0},i.a.createElement("img",{src:"/assets/img/various/delivery-bike.png",alt:this.props.title,className:"nav-page-title"}))),this.props.has_restaurant_info?i.a.createElement("div",{className:"fixed-restaurant-info hidden",ref:function(t){e.heading=t}},i.a.createElement("span",{className:"font-w700 fixedRestaurantName"},this.props.restaurant.name),i.a.createElement("br",null),i.a.createElement("span",{className:"font-w400 fixedRestaurantTime"},i.a.createElement("i",{className:"si si-clock"})," ",this.props.restaurant.delivery_time," ",localStorage.getItem("homePageMinsText"))):null,i.a.createElement("div",{className:"input-group-append"},!this.props.disable_search&&i.a.createElement("button",{type:"submit",className:"btn search-navs-btns",style:{position:"relative"}},i.a.createElement("i",{className:"si si-magnifier"}),i.a.createElement(d.a,{duration:"500"})),this.props.homeButton&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-home-btn",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},i.a.createElement("i",{className:"si si-home"}),i.a.createElement(d.a,{duration:"500"})),this.props.shareButton&&i.a.createElement(p,{link:window.location.href})))))))}}]),t}(s.Component);h.contextTypes={router:function(){return null}};t.a=h},224:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r=function(e){if(e){var t=parseFloat(e);return t=t.toFixed(2)}return 0}},231:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(203),o=a(224),l=function(e){return function(t){var a={productQuantity:e.reduce(function(e,t){return++e},0),totalPrice:e.reduce(function(e,t){var a=0;return t.selectedaddons&&t.selectedaddons.map(function(e){return a+=parseFloat(e.price)}),e+=t.price*t.quantity+a*t.quantity,e=parseFloat(e),Object(o.a)(e),e},0)};t({type:r.a,payload:a})}}},234:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r=function(e,t,a,r){function o(e){return e*Math.PI/180}var l=o(r-t),n=o(a-e),c=Math.sin(l/2)*Math.sin(l/2)+Math.cos(o(t))*Math.cos(o(r))*Math.sin(n/2)*Math.sin(n/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}},245:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(205),o=a(5),l=a(192),n=a(4),c=a.n(n),s=a(231),i=function(e,t,a,n,i,m,d,u,g,p,h,y,f,v){return function(b,S){return c.a.post(o.jb,{token:e.data.auth_token,user:e,order:t,coupon:a,location:n,order_comment:i,total:m,method:d,payment_token:u,delivery_type:g,partial_wallet:p,dis:h,pending_payment:y,tipAmount:f,cash_change_amount:v,schedule_date:null!==localStorage.getItem("orderDate")?JSON.parse(localStorage.getItem("orderDate")):null,schedule_slot:null!==localStorage.getItem("orderSlot")?JSON.parse(localStorage.getItem("orderSlot")):null}).then(function(e){var t=e.data;if(console.log("From Checkout"),!t.success)return t;b({type:r.a,payload:t});var a=S().cart.products;localStorage.removeItem("orderComment"),localStorage.removeItem("orderSlot"),localStorage.removeItem("orderDate");for(var o=a.length-1;o>=0;o--)a.splice(o,1);b(Object(s.a)(a)),localStorage.removeItem("appliedCoupon");b({type:l.a,payload:[]})}).catch(function(e){return e.response})}}},246:function(e,t,a){"use strict";var r=a(28),o=a.n(r),l=a(42),n=a(4),c=a.n(n),s=(a(234),a(3),a(5)),i=function(){var e=Object(l.a)(o.a.mark(function e(t,a,r,l,n,i){var m,d,u,g,p,h,y;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return[{lat:parseFloat(a),lng:parseFloat(t)}],[{lat:parseFloat(l),lng:parseFloat(r)}],n.maps.TravelMode.DRIVING,new n.maps.DistanceMatrixService,m=parseFloat(t),d=parseFloat(a),u=parseFloat(r),g=parseFloat(l),e.prev=8,p=s.C,h={originLat:d,originLong:m,destinationLat:g,destinationLong:u},e.next=13,c.a.post(p,h);case 13:y=e.sent,i(y.data),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),console.error("Error fetching data:",e.t0),i(5);case 21:case"end":return e.stop()}},e,this,[[8,17]])}));return function(t,a,r,o,l,n){return e.apply(this,arguments)}}();t.a=i},348:function(e,t,a){"use strict";a.r(t);var r=a(6),o=a(7),l=a(9),n=a(8),c=a(10),s=a(0),i=a.n(s),m=a(17),d=a(336),u=a(365),g=a(223),p=a(43),h=a(51),y=a(2),f=a(88),v=a(49),b=a(60),S=a(298),E=a.n(S),k=a(303),_=a.n(k),w=a(5),I=a(224),C=a(245),N=a(201),x=a(234),P=a(246),F=a(4),O=a.n(F),T=a(59),A=a(28),j=a.n(A),M=a(42),W=a(250),D=a(251),B=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(n.a)(t)).call.apply(e,[this].concat(c)))).state={postal:""},a.handleSubmit=function(){var e=Object(M.a)(j.a.mark(function e(t){var r,o,l,n,c,s,i,m,d;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.props,o=r.stripe,l=r.elements,n=r.data,c=l.getElement(D.CardNumberElement),e.next=5,o.createPaymentMethod({type:"card",card:c});case 5:s=e.sent,i=s.error,m=s.paymentMethod,i?console.log(i):(n.data.handlePaymentProcessing(!0),d=m.id,O.a.post(w.vb,{token:n.data.user.data.auth_token,id:d,amount:100*n.data.total,currency:localStorage.getItem("currencyId"),payment_method_types:["card"]}).then(function(e){console.log("STRIPE DATA",e.data);var t=e.data.client_secret;console.log(t),o.confirmCardPayment(t).then(function(e){e.paymentIntent&&"succeeded"===e.paymentIntent.status?(console.log("Payment successful!!!"),n.data.placeOrder("","STRIPE")):(console.log("Something went wrong..."),n.data.handlePaymentProcessing(!1))}).catch(function(e){console.log(e)})}).catch(function(e){n.data.handlePaymentProcessing(!1),console.log(e)}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.stripe,r=t.data;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",{htmlFor:"cardNumber"},localStorage.getItem("checkoutCardNumber")),i.a.createElement(D.CardNumberElement,{id:"cardNumber"}),i.a.createElement("label",{htmlFor:"expiry"},localStorage.getItem("checkoutCardExpiration")),i.a.createElement(D.CardExpiryElement,{id:"expiry"}),i.a.createElement("label",{htmlFor:"cvc"},localStorage.getItem("checkoutCardCvv")),i.a.createElement(D.CardCvcElement,{id:"cvc"}),"true"===localStorage.getItem("stripeCheckoutPostalCode")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{htmlFor:"postal"},localStorage.getItem("checkoutCardPostalCode")),i.a.createElement("input",{id:"postal",required:!0,value:this.state.postal,className:"form-control StripeElement",onChange:function(t){e.setState({postal:t.target.value})}})),i.a.createElement("button",{type:"submit",disabled:!a,className:"btn stripe-pay-btn"},localStorage.getItem("checkoutPayText")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),r.data.total,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))))}}]),t}(s.Component),L=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(D.ElementsConsumer,null,function(t){var a=t.stripe,r=t.elements;return i.a.createElement(B,{stripe:a,elements:r,data:e})}))},R=Object(W.a)(localStorage.getItem("stripePublicKey"),{locale:localStorage.getItem("stripeLocale")}),z=function(e){return i.a.createElement(D.Elements,{stripe:R},i.a.createElement(L,{data:e}))},G={classes:{base:"StripeElementIdeal",focus:"StripeElementIdeal--focus"},style:{base:{padding:"10px 8px",fontSize:"15px",color:"#5f5f5f",letterSpacing:"0.025em","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},K=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(n.a)(t)).call.apply(e,[this].concat(c)))).state={name:"",errorMessage:null,paymentMethod:null,client_secret:""},a.handleSubmit=function(){var e=Object(M.a)(j.a.mark(function e(t){var r,o,l,n,c,s,i,m;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.props,o=r.stripe,l=r.elements,n=r.data,e.next=4,o.createPaymentMethod({type:"ideal",ideal:l.getElement(D.IdealBankElement)});case 4:c=e.sent,s=c.error,i=c.paymentMethod,s||(n.data.handlePaymentProcessing(!0),m=i.id,O.a.post(w.vb,{token:n.data.user.data.auth_token,id:m,amount:100*n.data.total,currency:"eur",payment_method_types:["ideal"]}).then(function(e){new Promise(function(e){n.data.placeOrder("","STRIPE",!0),e("Order Placed")}).then(function(){a.setState({client_secret:e.data.client_secret})})}).catch(function(e){n.data.handlePaymentProcessing(!1),console.log(e)}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleConfirmIdealPayment=function(e){var t=a.props,r=t.stripe,o=t.elements;if(""!==a.state.client_secret){var l=r.confirmIdealPayment(a.state.client_secret,{payment_method:{ideal:o.getElement(D.IdealBankElement),billing_details:{name:a.state.name}},return_url:w.wb+"?order_id="+e.data.id}).error;l&&console.log(l.message)}},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.data.data.checkout!==e.data.data.checkout&&(console.log("Order Placed"),this.handleConfirmIdealPayment(e.data.data.checkout))}},{key:"render",value:function(){var e=this,t=this.props,a=t.stripe,r=t.data;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",{htmlFor:"name"},localStorage.getItem("checkoutCardFullname")),i.a.createElement("input",{id:"name",required:!0,className:"form-control StripeElement",onChange:function(t){e.setState({name:t.target.value})}}),i.a.createElement("label",{htmlFor:"ideal"},localStorage.getItem("checkoutIdealSelectBankText")),i.a.createElement(D.IdealBankElement,{id:"ideal",options:G}),i.a.createElement("button",{type:"submit",disabled:!a,className:"btn stripe-pay-btn"},localStorage.getItem("checkoutPayText")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),r.data.total,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))))}}]),t}(s.Component),q=function(e){return i.a.createElement(D.ElementsConsumer,null,function(t){var a=t.stripe,r=t.elements;return i.a.createElement(K,{stripe:a,elements:r,data:e})})},U=Object(W.a)(localStorage.getItem("stripePublicKey"),{locale:localStorage.getItem("stripeLocale")}),Y=Object(m.b)(function(e){return{checkout:e.checkout.checkout}},{})(function(e){return i.a.createElement(D.Elements,{stripe:U},i.a.createElement(q,{data:e}))}),H={accountHolderType:"individual",classes:{base:"StripeElementFpx",focus:"StripeElementFpx--focus"},style:{base:{padding:"10px 8px",fontSize:"15px",color:"#5f5f5f",letterSpacing:"0.025em","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},V=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(n.a)(t)).call.apply(e,[this].concat(c)))).state={name:"",errorMessage:null,paymentMethod:null,client_secret:""},a.handleSubmit=function(){var e=Object(M.a)(j.a.mark(function e(t){var r,o,l,n,c,s,i,m;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.props,o=r.stripe,l=r.elements,n=r.data,e.next=4,o.createPaymentMethod({type:"fpx",fpx:l.getElement(D.FpxBankElement)});case 4:c=e.sent,s=c.error,i=c.paymentMethod,s||(n.data.handlePaymentProcessing(!0),m=i.id,O.a.post(w.vb,{token:n.data.user.data.auth_token,id:m,amount:100*n.data.total,currency:"myr",payment_method_types:["fpx"]}).then(function(e){new Promise(function(e){n.data.placeOrder("","STRIPE",!0),e("Order Placed")}).then(function(){a.setState({client_secret:e.data.client_secret})})}).catch(function(e){n.data.handlePaymentProcessing(!1),console.log(e)}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleConfirmFpxPayment=function(e){var t=a.props,r=t.stripe,o=t.elements;if(""!==a.state.client_secret){var l=r.confirmFpxPayment(a.state.client_secret,{payment_method:{fpx:o.getElement(D.FpxBankElement),billing_details:{name:a.state.name}},return_url:w.wb+"?order_id="+e.data.id}).error;l&&console.log(l.message)}},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.data.data.checkout!==e.data.data.checkout&&(console.log("Order Placed"),this.handleConfirmFpxPayment(e.data.data.checkout))}},{key:"render",value:function(){var e=this,t=this.props,a=t.stripe,r=t.data;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",{htmlFor:"name"},localStorage.getItem("checkoutCardFullname")),i.a.createElement("input",{id:"name",required:!0,className:"form-control StripeElement",onChange:function(t){e.setState({name:t.target.value})}}),i.a.createElement("label",{htmlFor:"fpx"},localStorage.getItem("checkoutFpxSelectBankText")),i.a.createElement(D.FpxBankElement,{accountHolderType:"individual",id:"fpx",options:H}),i.a.createElement("button",{type:"submit",disabled:!a,className:"btn stripe-pay-btn"},localStorage.getItem("checkoutPayText")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),r.data.total,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))))}}]),t}(s.Component),Z=function(e){return i.a.createElement(D.ElementsConsumer,null,function(t){var a=t.stripe,r=t.elements;return i.a.createElement(V,{stripe:a,elements:r,data:e})})},J=Object(W.a)(localStorage.getItem("stripePublicKey"),{locale:localStorage.getItem("stripeLocale")}),Q=Object(m.b)(function(e){return{checkout:e.checkout.checkout}},{})(function(e){return i.a.createElement(D.Elements,{stripe:J},i.a.createElement(Z,{data:e}))}),X=a(189),$=a(317),ee=a(307),te=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(n.a)(t)).call.apply(e,[this].concat(c)))).getCountryId=function(){switch(localStorage.getItem("currencyId")){case"KES":return"KE";case"GHS":return"GH";case"ZAR":return"ZA";case"TZS":return"TZ";default:return"NG"}},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.total,a=e.user,r=e.placeOrder,o=e.reset,l={public_key:localStorage.getItem("flutterwavePublicKey"),tx_ref:Date.now(),amount:t,currency:localStorage.getItem("currencyId"),country:this.getCountryId(),payment_options:"card,account,ussd,qr,mpesa,mobilemoneyghana,mobilemoneyuganda,mobilemoneyrwanda,mobilemoneyzambia,mobilemoneytanzania,barter,bank transfer,wechat",customer:{email:a.data.email,phonenumber:a.data.phone,name:a.data.name},customizations:{logo:window.location.origin+"/assets/img/favicons/"+localStorage.getItem("favicon-96x96")}},n=Object(y.a)({},l,{text:"Pay with Flutterwave",className:"flutterwave-btn",callback:function(e){console.log(e),"successful"===e.status&&r("","FLUTTERWAVE"),Object(ee.b)()},onClose:function(){console.log("flutterwave closed."),o()}});return i.a.createElement(i.a.Fragment,null,i.a.createElement(ee.a,n))}}]),t}(s.Component),ae=a(308),re=a.n(ae),oe=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(n.a)(t)).call.apply(e,[this].concat(c)))).state={payment_gateway_loading:!0,loading:!1,stripe_opened:!1,delivery_charges:0,error:!1,razorpay_opened:!1,razorpay_success:!1,canPayPartialWithWallet:!1,walletRedeemed:!1,canPayFullWithWallet:!1,distance:0,placeOrderError:!1,errorMessage:"",payWithStripeCard:!1,payWithStripeIdeal:!1,payWithStripeFpx:!1,paymongoCCNumber:"",paymongoCCExp:"",paymongoCCCvv:"",showPaymongoForm:!1,paymongoRedirect:"",paymongo_processing:!1,cashChange:"",regexp:/^[0-9\b]+$/,showCod:!1,isZeroTotalWithFreeDelivery:!1,albaraka_processing:!1,albaraka_html:null},a.__handleAlBarakaPayment=function(){var e=!0;a.setState({albaraka_processing:!0,placeOrderError:!1,errorMessage:""});var t=a.props,r=t.user,o=t.cartProducts,l=t.coupon,n=t.cartTotal,c=parseInt(a.getTotalAfterCalculation()),s=a.state.walletRedeemed,i=localStorage.getItem("activeRestaurant"),m=o.map(function(e){return{id:e.id,name:e.name,quantity:e.quantity,price:e.price,restaurant_id:i,selectedaddons:e.selectedaddons||[]}}),d=r&&r.data&&r.data.email?r.data.email:"",u=r&&r.data&&r.data.phone?r.data.phone:"",g=JSON.parse(localStorage.getItem("userSetAddress"))||{data:{default_address:{house:"Default House",address:"Default Address",latitude:"33.3152",longitude:"44.3661"}}},p="SELFPICKUP"===localStorage.getItem("userSelected")?2:1,h=localStorage.getItem("orderComment")||"",f=localStorage.getItem("cart_tips"),v=f&&JSON.parse(f).value||0,b=a.state.distance;return m.length?!c||c<=0?(window.alert("\u0627\u0644\u0645\u0628\u0644\u063a \u063a\u064a\u0631 \u0635\u0627\u0644\u062d. \u062a\u062d\u0642\u0642 \u0645\u0646 \u0637\u0644\u0628\u0643."),void a.setState({albaraka_processing:!1})):d&&u?i?(console.log("Sending placeOrder request with data:",{user:r,orderItems:m,coupon:l,address:g,orderComment:h,cartTotal:n,method:"ALBARAKA",deliveryType:p,partialWallet:s,distance:b,tipAmount:v,cashChange:a.state.cashChange}),a.props.placeOrder(r,m,l.success?l:null,g,h,Object(y.a)({},n,{totalPrice:c}),"ALBARAKA","",p,s,b,!0,v,a.state.cashChange).then(function(t){if(e){console.log("placeOrder response:",t);var r=t,o=t.includes("orderId")?t.match(/name="orderId" value="([^"]+)"/)[1]:null;r&&o?(a.setState({albaraka_processing:!1}),a.context.router.history.push({pathname:"/payment/albaraka",state:{htmlContent:r,orderId:o,fromPayment:!0}})):(console.log("placeOrder failed: Missing HTML content or orderId",{htmlContent:r,orderId:o}),a.setState({placeOrderError:!0,errorMessage:"\u0641\u0634\u0644 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0637\u0644\u0628: HTML \u0623\u0648 orderId \u0645\u0641\u0642\u0648\u062f",albaraka_processing:!1}))}}).catch(function(t){e&&(console.error("placeOrder error:",t),a.setState({placeOrderError:!0,errorMessage:t.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0637\u0644\u0628",albaraka_processing:!1}))}),function(){e=!1}):(window.alert("\u0645\u0639\u0631\u0641 \u0627\u0644\u0645\u0637\u0639\u0645 \u0645\u0641\u0642\u0648\u062f. \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649."),void a.setState({albaraka_processing:!1})):(window.alert("\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u0645\u0641\u0642\u0648\u062f."),void a.setState({albaraka_processing:!1})):(window.alert("\u0633\u0644\u0629 \u0627\u0644\u062a\u0633\u0648\u0642 \u0641\u0627\u0631\u063a\u0629. \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649."),void a.setState({albaraka_processing:!1}))},a.__doesRestaurantOperatesAtThisLocation=function(e){var t=a.props.user;if(t.success){var r=Object(f.a)(Object(f.a)(a));if("true"===localStorage.getItem("enGDMA"))"DELIVERY"===localStorage.getItem("userSelected")&&(a.props.handleProcessDistanceCalcLoading(!0),Object(P.a)(e.longitude,e.latitude,t.data.default_address.longitude,t.data.default_address.latitude,a.props.google,function(e){"DYNAMIC"===r.props.restaurant_info.delivery_charge_type&&r.setState({distance:e},function(){r.calculateDynamicDeliveryCharge()}),r.props.handleProcessDistanceCalcLoading(!1)}));else if("DELIVERY"===localStorage.getItem("userSelected")){var o=Object(x.a)(e.longitude,e.latitude,t.data.default_address.longitude,t.data.default_address.latitude);"DYNAMIC"===r.props.restaurant_info.delivery_charge_type&&r.setState({distance:o},function(){r.calculateDynamicDeliveryCharge()})}}},a.calculateDynamicDeliveryCharge=function(){var e=a.props,t=e.restaurant_info,r=e.coupon,o=a.state.distance,l=0;if(r.code&&r.is_used_for_delivery&&"FREE"===r.discount_type){var n=t.base_delivery_charge;if(o>t.base_delivery_distance){var c=(o-t.base_delivery_distance)/t.extra_delivery_distance*t.extra_delivery_charge;n=parseFloat(t.base_delivery_charge)+parseFloat(c),"true"===localStorage.getItem("enDelChrRnd")&&(n=Math.ceil(n))}if(r.delivery_discount_percentage&&r.delivery_discount_percentage<100)l=n*(1-r.delivery_discount_percentage/100),console.log("Applied ".concat(r.delivery_discount_percentage,"% Delivery Discount: ").concat(l));else console.log("Free Delivery Coupon Applied in Dynamic Calculation \ud83d\ude0d"),l=0}else if(o>t.base_delivery_distance){var s=(o-t.base_delivery_distance)/t.extra_delivery_distance*t.extra_delivery_charge,i=parseFloat(t.base_delivery_charge)+parseFloat(s);"true"===localStorage.getItem("enDelChrRnd")&&(i=Math.ceil(i)),l=i,console.log("Dynamic Delivery Charge: "+l)}else l=t.base_delivery_charge,console.log("Fixed Delivery Charge: "+l);parseFloat(t.free_delivery_subtotal)>0&&parseFloat(a.props.cartTotal.totalPrice)>=parseFloat(t.free_delivery_subtotal)?(console.log("Free Delivery \ud83d\ude0d"),a.setState({delivery_charges:0})):a.setState({delivery_charges:Math.ceil(l)})},a.onOpened=function(){a.setState({stripe_opened:!0})},a.onToken=function(e){a.__placeOrder(e,"STRIPE")},a.onSuccess=function(e){a.__placeOrder("","PAYPAL")},a.onCancel=function(e){console.log("Paypal Payment Canceled")},a.onError=function(e){console.log("Error!")},a.callback=function(e){if("success"===e.status){var t=e.reference;a.__placeOrder(t,"PAYSTACK")}else console.log(e)},a.close=function(){console.log("PayStack Payment Closed")},a.getReference=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-.=",a=0;a<15;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},a.__placeOrder=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];document.getElementById("checkoutNavPageTitle")&&document.getElementById("checkoutNavPageTitle").remove();for(var o=document.getElementsByClassName("paymentGatewayBlock"),l=0;l<o.length;l++)o[l].classList.add("no-click");var n=null;null!=JSON.parse(localStorage.getItem("cart_tips"))&&(n=JSON.parse(localStorage.getItem("cart_tips")).value);var c=a.props,s=c.user,i=c.cartProducts,m=c.coupon,d=c.cartTotal;if(s.success){var u=a.state.walletRedeemed&&"COD"===t,g=parseFloat(a.getTotalAfterCalculation());console.log("Placing Order with:",{user:s.data.id,cartTotal:d,totalToPay:g,payment_method:t,partialWallet:u,distance:a.state.distance,tipAmount:n,cashChange:a.state.cashChange}),"SELFPICKUP"===localStorage.getItem("userSelected")?a.props.placeOrder(s,i,m.success?m:null,JSON.parse(localStorage.getItem("userSetAddress")),localStorage.getItem("orderComment"),Object(y.a)({},d,{totalPrice:g}),t,e,2,u,parseFloat(a.state.distance),r,null,null).then(function(e){e&&(e.success||(a.setState({placeOrderError:!0,errorMessage:e.message}),429===e.status&&a.setState({errorMessage:localStorage.getItem("tooManyApiCallMessage")}),a.resetPage()))}):a.props.placeOrder(s,i,m.success?m:null,JSON.parse(localStorage.getItem("userSetAddress")),localStorage.getItem("orderComment"),Object(y.a)({},d,{totalPrice:g}),t,e,1,u,parseFloat(a.state.distance),r,n,a.state.cashChange).then(function(e){e&&(console.log("Place Order Response:",e),401===e.status?(a.setState({placeOrderError:!0,errorMessage:localStorage.getItem("userInActiveMessage")}),a.resetPage()):e.success||(a.setState({placeOrderError:!0,errorMessage:e.message}),429===e.status&&a.setState({errorMessage:localStorage.getItem("tooManyApiCallMessage")}),a.resetPage()))});var p=document.getElementById("progressBar");p.classList.remove("hidden");var h=0,f=setInterval(function(){h>100&&clearInterval(f),h+=1,p.style.width=h+"%"},20);document.getElementById("checkoutMessageOnProcess").classList.remove("hidden"),document.getElementById("checkoutMessageOnIdle").classList.add("hidden"),a.setState({stripe_opened:!1})}},a.resetPage=function(){var e=document.getElementById("progressBar");e.classList.add("hidden"),setTimeout(function(){e.style.width="0%"},2200);for(var t=document.getElementsByClassName("paymentGatewayBlock"),a=0;a<t.length;a++)t[a].classList.remove("no-click");document.getElementById("checkoutMessageOnProcess").classList.add("hidden"),document.getElementById("checkoutMessageOnIdle").classList.remove("hidden")},a.getFinalDeliveryCharge=function(e){var t=a.props.restaurant_info;if(0===parseFloat(e))return console.log("Delivery charges are already 0"),Object(I.a)(0);var r=parseFloat(e);if(console.log("Final Delivery Charge Before Surcharge:",r),t&&t.zone){var o=parseFloat(t.zone.delivery_surcharge_rate);if(t.zone.delivery_surcharge_active&&o>0)if("fixed"===t.zone.delivery_surcharge_type)r+=o,console.log("Added Fixed Surcharge:",o);else if("percentage"===t.zone.delivery_surcharge_type){var l=r*(o/100);r+=parseFloat(l),console.log("Added Percentage Surcharge:",l)}}return console.log("Final Delivery Charge:",r),Object(I.a)(Math.ceil(r))},a.getTotalAfterCalculation=function(){var e=a.props,t=e.coupon,r=e.restaurant_info,o=e.user,l=JSON.parse(localStorage.getItem("cart_tips")),n=a.props.cartTotal.totalPrice,c=0;if(console.log("getTotalAfterCalculation Inputs:",{total:parseFloat(n),delivery_charges:a.state.delivery_charges,restaurant_charges:parseFloat(r.restaurant_charges||0),coupon:t,wallet_balance:o.data?o.data.wallet_balance:0,walletRedeemed:a.state.walletRedeemed,canPayFullWithWallet:a.state.canPayFullWithWallet,tips:l?l.value:0,taxApplicable:localStorage.getItem("taxApplicable"),taxPercentage:localStorage.getItem("taxPercentage")}),t.code)if(t.is_used_for_delivery&&"FREE"===t.discount_type)t.delivery_discount_percentage&&t.delivery_discount_percentage<100?(console.log("Applying ".concat(t.delivery_discount_percentage,"% Delivery Discount")),c=parseFloat(n)+parseFloat(r.restaurant_charges||0)+parseFloat(a.getFinalDeliveryCharge(a.state.delivery_charges)||0)):(console.log("Applying Free Delivery Coupon"),c=parseFloat(n)+parseFloat(r.restaurant_charges||0));else{var s=parseFloat(t.appliedAmount||t.discount||0);console.log("Applying Coupon Discount:",s),c=parseFloat(n)-s+parseFloat(r.restaurant_charges||0)+parseFloat(a.getFinalDeliveryCharge(a.state.delivery_charges)||0)}else c=parseFloat(n)+parseFloat(r.restaurant_charges||0)+parseFloat(a.getFinalDeliveryCharge(a.state.delivery_charges)||0);if(console.log("Subtotal Before Tax:",c),"true"===localStorage.getItem("taxApplicable")){var i=c*(parseFloat(localStorage.getItem("taxPercentage"))/100);c+=i,console.log("Tax Added:",i,"(".concat(localStorage.getItem("taxPercentage"),"%)"))}if(console.log("Subtotal After Tax:",c),l&&l.value>0&&(c+=parseFloat(l.value),console.log("Tips Added:",l.value)),c=Math.max(0,c),a.state.walletRedeemed&&o.data&&o.data.wallet_balance>0&&o.data.wallet_balance<c&&!a.state.isZeroTotalWithFreeDelivery){var m=Math.min(o.data.wallet_balance,c);c-=m,console.log("Partial Wallet Deduction:",m)}return console.log("Final Total After Calculation:",c),Object(I.a)(c)},a.__handleRedeemWallet=function(){a.setState({walletRedeemed:!0})},a.__handleKhaltiPayment=function(){a.props.handleLoading(!0);var e=Object(f.a)(Object(f.a)(a)),t={publicKey:localStorage.getItem("khaltiPublicKey"),productIdentity:localStorage.getItem("storeName"),productName:localStorage.getItem("storeName"),productUrl:localStorage.getItem("storeUrl"),eventHandler:{onSuccess:function(t){e.__handleKhaltiPaymentSuccess(t)},onError:function(e){console.log(e),window.alert("\u062d\u062f\u062b \u062e\u0637\u0623. \u062d\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.")},onClose:function(){e.props.handleLoading(!1)}}},r=new re.a(t),o=100*parseFloat(a.getTotalAfterCalculation());r.show({amount:o})},a.__handleKhaltiPaymentSuccess=function(e){O.a.get(w.Y,{params:{token:e.token,amount:e.amount}}).then(function(e){e.data.success&&a.__placeOrder(e.data.idx,"KHALTI")}).catch(function(e){window.alert("\u062d\u062f\u062b \u062e\u0637\u0623."),this.props.handleLoading(!1)})},a.__handleRazorPay=function(e,t){var r=Object(f.a)(Object(f.a)(a));a.setState({razorpay_opened:!0}),O.a.post(w.kb,{order_id:e}).then(function(o){if(o.data.razorpay_success){var l={key:localStorage.getItem("razorpayKeyId"),name:localStorage.getItem("storeName"),currency:localStorage.getItem("currencyId"),order_id:o.data.response.id,handler:function(a){O.a.post(w.lb,{order_id:e,razorpay_order_id:a.razorpay_order_id,razorpay_payment_id:a.razorpay_payment_id,razorpay_signature:a.razorpay_signature}).then(function(e){e&&e.data&&e.data.success&&r.context.router.history.push("/running-order/"+t)})},modal:{ondismiss:function(){r.setState({razorpay_opened:!1,razorpay_success:!1}),r.context.router.history.push("/my-orders")}},prefill:{name:a.props.user.data.name,email:a.props.user.data.email,contact:a.props.user.data.phone}};new window.Razorpay(l).open()}}).catch(function(e){console.log(e)})},a.handleInput=function(e){var t=e.target,r=t.name,o=t.value;a.setState(Object(h.a)({},r,o))},a.__showPaymongoForm=function(){a.setState({showPaymongoForm:!0})},a.handlePaymongo=function(e){e.preventDefault();var t=a.state.paymongoCCNumber,r=a.state.paymongoCCExp,o=a.state.paymongoCCCvv;if(""===t||""===r||""===o)a.setState({placeOrderError:!0,errorMessage:"Please enter credit card details."});else{a.props.handleLoading(!0),a.setState({paymongo_processing:!0});var l=Object(f.a)(Object(f.a)(a));a.setState({paymongo_opened:!0,showPaymongoForm:!1,placeOrderError:!1,errorMessage:""});var n=Object(I.a)(parseFloat(a.getTotalAfterCalculation()));O.a.post(w.gb,{amount:n,name:a.props.user.data.name,email:a.props.user.data.email,phone:a.props.user.data.phone,ccNum:t,ccExp:r,ccCvv:o}).then(function(e){e.data.paymongo_success&&("succeeded"===e.data.status?(l.setState({paymongo_opened:!1,paymongo_success:!0}),a.__placeOrder(e.data.token,"PAYMONGO",!1)):"awaiting_next_action"===e.data.status?(l.setState({paymongo_opened:!1,paymongo_success:!0,paymongoRedirect:e.data.redirect_url}),a.__placeOrder(e.data.token,"PAYMONGO",!0)):(a.props.handleLoading(!1),l.setState({paymongo_processing:!1,paymongo_opened:!0,paymongo_success:!1,placeOrderError:!0,errorMessage:"Payment failed: "+e.data.error})))}).catch(function(e){console.log(e)})}},a.handlePayWithStripeCardToggle=function(e){a.setState({payWithStripeCard:!a.state.payWithStripeCard},function(){a.state.payWithStripeCard?(a.refs.payWithStripeCardToggle.classList.add("stripe-toggle-active"),a.refs.payWithStripeCardToggle.scrollIntoView({behavior:"instant",block:"start"})):a.refs.payWithStripeCardToggle.classList.remove("stripe-toggle-active")})},a.handlePayWithStripeIdealToggle=function(e){a.setState({payWithStripeIdeal:!a.state.payWithStripeIdeal},function(){a.state.payWithStripeIdeal?(a.refs.payWithStripeIdealToggle.classList.add("stripe-toggle-active"),a.refs.payWithStripeIdealToggle.scrollIntoView({behavior:"instant",block:"start"})):a.refs.payWithStripeIdealToggle.classList.remove("stripe-toggle-active")})},a.handlePayWithStripeFpxToggle=function(e){a.setState({payWithStripeFpx:!a.state.payWithStripeFpx},function(){a.state.payWithStripeFpx?(a.refs.payWithStripeFpxToggle.classList.add("stripe-toggle-active"),a.refs.payWithStripeFpxToggle.scrollIntoView({behavior:"instant",block:"start"})):a.refs.payWithStripeFpxToggle.classList.remove("stripe-toggle-active")})},a.handlePaymentGatewayRedirect=function(e){var t=e+"&order_id="+a.props.checkout.id;window.location.replace(t)},a.__processFlutterWave=function(){for(var e=document.getElementsByClassName("paymentGatewayBlock"),t=0;t<e.length;t++)e[t].classList.add("no-click");document.getElementsByClassName("flutterwave-btn")[0].click()},a.__showCashChangeBlock=function(e){a.refs.cashAmountBlock.classList.remove("hidden");for(var t=document.getElementsByClassName("paymentGatewayBlock"),r=0;r<t.length;r++)t[r].classList.add("hidden");a.refs.paymentListTitle.innerHTML=localStorage.getItem("cashChangeTitle")},a.__handleCashInput=function(e){var t=e.target.value;(""===t||a.state.regexp.test(t))&&t.length<=8&&a.setState(Object(h.a)({},e.target.name,t))},a.__handleCashInputConfirm=function(e){e.target.disabled=!0,a.__placeOrder("","COD")},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.user,r=t.coupon,o=t.restaurant_info;null!==localStorage.getItem("activeRestaurant")&&this.props.getRestaurantInfoById(localStorage.getItem("activeRestaurant")).then(function(t){t&&t.payload.id&&e.__doesRestaurantOperatesAtThisLocation(t.payload)}),a.success&&this.props.updateUserInfo(a.data.id,a.data.auth_token,null);var l=o.delivery_charges||0;r.code&&r.is_used_for_delivery&&"FREE"===r.discount_type?r.delivery_discount_percentage&&r.delivery_discount_percentage<100?(l*=1-r.delivery_discount_percentage/100,console.log("Applied ".concat(r.delivery_discount_percentage,"% Delivery Discount: ").concat(l))):(console.log("Free Delivery Coupon Applied \ud83d\ude0d"),l=0):"SELFPICKUP"===localStorage.getItem("userSelected")?l=0:parseFloat(o.free_delivery_subtotal)>0&&parseFloat(this.props.cartTotal.totalPrice)>=parseFloat(o.free_delivery_subtotal)&&(console.log("Free Delivery \ud83d\ude0d"),l=0);console.log("Initial Delivery Charges:",l),this.setState({delivery_charges:Math.ceil(l)}),"SELFPICKUP"===localStorage.getItem("userSelected")?this.setState({showCod:"true"===localStorage.getItem("enCODonSF")}):this.setState({showCod:!0})}},{key:"componentWillReceiveProps",value:function(e){if(e.gatewayStatus&&this.setState({payment_gateway_loading:!1}),e.checkout!==this.props.checkout){if(localStorage.removeItem("appliedCoupon"),"PAYMONGO"===e.checkout.data.payment_mode&&""!==this.state.paymongoRedirect)return window.location=this.state.paymongoRedirect,null;if("MERCADOPAGO"===e.checkout.data.payment_mode)return window.location=w.eb+"/"+e.checkout.data.id,null;if(8!==e.checkout.data.orderstatus_id&&this.context.router.history.push("/running-order/"+e.checkout.data.unique_order_id),"PAYTM"===e.checkout.data.payment_mode)return window.location=w.hb+"/"+e.checkout.data.id,null;if("RAZORPAY"===e.checkout.data.payment_mode)return"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android?window.Android.startRazorpaySdkProcess(e.checkout.data.id,e.checkout.data.unique_order_id,e.user.data.name,e.user.data.email,e.user.data.phone):this.__handleRazorPay(e.checkout.data.id,e.checkout.data.unique_order_id),null}if(!1===e.googleLoadingStatus){var t=0===parseFloat(e.cartTotal.totalPrice),a=0===parseFloat(this.state.delivery_charges),r=parseFloat(this.getTotalAfterCalculation());t&&a&&0===r?this.setState({isZeroTotalWithFreeDelivery:!0,showCod:!0}):(e.user.data&&e.user.data.wallet_balance>0&&e.user.data.wallet_balance<r&&this.setState({canPayPartialWithWallet:!0,canPayFullWithWallet:!1,isZeroTotalWithFreeDelivery:!1}),e.user.data&&e.user.data.wallet_balance>0&&e.user.data.wallet_balance>=r&&this.setState({canPayFullWithWallet:!0,canPayPartialWithWallet:!1,isZeroTotalWithFreeDelivery:!1}))}}},{key:"render",value:function(){var e=this,t={sandbox:localStorage.getItem("paypalSandboxKey"),production:localStorage.getItem("paypalProductionKey")},a=parseFloat(this.getTotalAfterCalculation());console.log("Total to Pay in render:",a),this.props.toPay(Object(I.a)(a));var r=this.props.coupon.code&&"AMOUNT"===this.props.coupon.discount_type&&0===a;return this.props.restaurant_info&&!this.props.restaurant_info.is_active?(console.log("store is closed"),i.a.createElement($.a,{to:"/cart"})):i.a.createElement(i.a.Fragment,null,this.state.placeOrderError&&i.a.createElement("div",{className:"auth-error ongoing-payment"},i.a.createElement("div",{className:"error-shake"},this.state.errorMessage)),this.props.paymentgateways.some(function(e){return"Razorpay"===e.name})&&i.a.createElement(b.Helmet,null,i.a.createElement("script",{src:"https://checkout.razorpay.com/v1/checkout.js"})),(this.state.stripe_opened||this.state.razorpay_opened||this.state.albaraka_processing)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"height-80 overlay-loading ongoing-payment-spin"},i.a.createElement("div",{className:"spin-load"})),i.a.createElement("div",{className:"auth-error ongoing-payment"},i.a.createElement("div",{className:"error-shake"},localStorage.getItem("checkoutPaymentInProcess")))),this.state.albaraka_html&&i.a.createElement("div",{style:{height:"100vh"}},i.a.createElement("iframe",{srcDoc:this.state.albaraka_html,style:{width:"100%",height:"100%",border:"none"},title:"AlBaraka Payment Gateway"})),!this.state.albaraka_html&&i.a.createElement("div",{className:"col-12 mb-50"},this.state.payment_gateway_loading?i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement(v.a,{height:70,width:window.innerWidth,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},i.a.createElement("rect",{x:"320",y:"10",rx:"4",ry:"4",width:"55",height:"55"}),i.a.createElement("rect",{x:"0",y:"10",rx:"0",ry:"0",width:"85",height:"20"}),i.a.createElement("rect",{x:"0",y:"40",rx:"0",ry:"0",width:"190",height:"18"}))))),i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement(v.a,{height:70,width:window.innerWidth,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},i.a.createElement("rect",{x:"320",y:"10",rx:"4",ry:"4",width:"55",height:"55"}),i.a.createElement("rect",{x:"0",y:"10",rx:"0",ry:"0",width:"85",height:"20"}),i.a.createElement("rect",{x:"0",y:"40",rx:"0",ry:"0",width:"190",height:"18"})))))):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row"},!r&&this.state.canPayPartialWithWallet&&!this.state.isZeroTotalWithFreeDelivery&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/wallet.png",alt:localStorage.getItem("walletName"),className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("walletName"),":",i.a.createElement("span",{style:{color:localStorage.getItem("storeColor")}},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.user.data.wallet_balance,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},this.state.walletRedeemed?i.a.createElement("span",null,"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.user.data.wallet_balance,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")," ",localStorage.getItem("willbeDeductedText")," when selecting COD."):i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,localStorage.getItem("payPartialWithWalletText")||"Pay partially with wallet balance"),i.a.createElement("button",{className:"btn btn-sm btn-primary ml-2",style:{backgroundColor:localStorage.getItem("storeColor"),borderColor:localStorage.getItem("storeColor")},onClick:this.__handleRedeemWallet},localStorage.getItem("walletRedeemButtonText")||"Redeem"))))),i.a.createElement("hr",{className:"mb-4"}))),i.a.createElement("hr",null),i.a.createElement("div",{className:"col-12 text-center mb-0 mt-4"},i.a.createElement("h4",{className:"text-muted",ref:"paymentListTitle"},localStorage.getItem("checkoutPaymentListTitle"))),!r&&this.state.canPayFullWithWallet&&!this.state.isZeroTotalWithFreeDelivery&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__placeOrder("","WALLET")}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/wallet.png",alt:localStorage.getItem("walletName"),className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("walletName")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("payFullWithWalletText"),i.a.createElement("br",null),i.a.createElement("span",{style:{color:localStorage.getItem("storeColor")}},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),parseFloat(this.getTotalAfterCalculation()),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))," ",localStorage.getItem("willbeDeductedText")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.user.data.wallet_balance,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))))),i.a.createElement("hr",null)),i.a.createElement("div",{className:"col-12"},"true"===localStorage.getItem("stripeAcceptIdealPayment")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 p-0",ref:"payWithStripeIdealToggle",onClick:this.handlePayWithStripeIdealToggle},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/ideal.png",alt:"stripe-ideal",className:"img-fluid",style:{width:"50px"}})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutStripeIdealText"),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutStripeIdealSubText")))))),this.state.payWithStripeIdeal&&i.a.createElement("div",{className:"stripe-card-container"},i.a.createElement(Y,{user:this.props.user,total:Object(I.a)(parseFloat(this.getTotalAfterCalculation())),handlePaymentProcessing:this.props.handleLoading,placeOrder:this.__placeOrder,handlePaymentGatewayRedirect:this.handlePaymentGatewayRedirect,checkout:this.props.checkout})))),i.a.createElement("div",{className:"col-12"},"true"===localStorage.getItem("stripeAcceptFpxPayment")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 p-0",ref:"payWithStripeFpxToggle",onClick:this.handlePayWithStripeFpxToggle},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/fpx.png",alt:"stripe-fpx",className:"img-fluid",style:{width:"50px"}})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutStripeFpxText"),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutStripeFpxSubText")))))),this.state.payWithStripeFpx&&i.a.createElement("div",{className:"stripe-card-container"},i.a.createElement(Q,{user:this.props.user,total:Object(I.a)(parseFloat(this.getTotalAfterCalculation())),handlePaymentProcessing:this.props.handleLoading,placeOrder:this.__placeOrder,handlePaymentGatewayRedirect:this.handlePaymentGatewayRedirect,checkout:this.props.checkout})))),this.props.paymentgateways.map(function(a){return i.a.createElement(i.a.Fragment,{key:a.id},"Stripe"===a.name&&i.a.createElement("div",{className:"col-12 paymentGatewayBlock stripe-gateway-block"},i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 p-0",ref:"payWithStripeCardToggle",onClick:e.handlePayWithStripeCardToggle},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/stripe.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutStripeText"),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutStripeSubText")))))),e.state.payWithStripeCard&&i.a.createElement("div",{className:"stripe-card-container"},i.a.createElement(z,{user:e.props.user,total:Object(I.a)(parseFloat(e.getTotalAfterCalculation())),handlePaymentProcessing:e.props.handleLoading,placeOrder:e.__placeOrder})))),"AlBaraka"===a.name&&i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:e.__handleAlBarakaPayment},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block d-flex align-items-center justify-between"},i.a.createElement("div",{className:"flex-grow-1"},i.a.createElement("div",{className:"font-size-h3 font-w600"},"Pay with AlBaraka"),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},"Pay securely with AlBaraka"),i.a.createElement("div",{className:"font-size-sm font-w400 text-muted"},"A 1% transaction fee will be applied")),i.a.createElement("div",{className:"ml-3"},i.a.createElement("img",{src:"/assets/img/various/albaraka.png",alt:"AlBaraka",style:{width:"80px"}}))))),e.state.showCod&&"COD"===a.name&&i.a.createElement(i.a.Fragment,null,"true"===localStorage.getItem("showCashChange")?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__showCashChangeBlock()}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/cod.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutCodText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutCodSubText"))))),i.a.createElement("div",{className:"col-12 hidden",ref:"cashAmountBlock"},i.a.createElement("div",{className:"text-left"},i.a.createElement("input",{type:"tel",name:"cashChange",value:e.state.cashChange,className:"form-control cash-change-input",placeholder:localStorage.getItem("cashChangeInputPlaceholder"),onChange:e.__handleCashInput}),i.a.createElement("button",{className:"btn btn-main",style:{backgroundColor:localStorage.getItem("cartColorBg")},onClick:e.__handleCashInputConfirm},localStorage.getItem("cashChangeConfirmButton")),i.a.createElement("p",{className:"pt-2"},localStorage.getItem("cashChangeHelpText"))))):i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__placeOrder("","COD")}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/cod.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutCodText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutCodSubText")))))),"Khalti"===a.name&&i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__handleKhaltiPayment()}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/khalti.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutKhaltiText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutKhaltiSubText"))))),"Paytm"===a.name&&i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__placeOrder("","PAYTM")}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/paytm.svg",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutPaytmText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutPaytmSubText"))))),"Flutterwave"===a.name&&i.a.createElement(i.a.Fragment,null,i.a.createElement(te,{user:e.props.user,total:Object(I.a)(parseFloat(e.getTotalAfterCalculation())),placeOrder:e.__placeOrder,reset:e.resetPage}),i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__processFlutterWave()}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/flutterwave.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutFlutterwaveText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutFlutterwaveSubText")))))),"Razorpay"===a.name&&i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__placeOrder("","RAZORPAY")}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/razorpay.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutRazorpayText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutRazorpaySubText"))))),"PayStack"===a.name&&i.a.createElement("div",{className:"col-12 mb-4 mt-4 paymentGatewayBlock"},i.a.createElement("img",{src:"/assets/img/various/paystack.png",alt:a.name,className:"paystack-absolute-logo"}),i.a.createElement(_.a,{text:localStorage.getItem("paystackPayText"),class:"payButton",callback:e.callback,close:e.close,disabled:!1,embed:!1,reference:e.getReference(),email:e.props.user.data.email,amount:parseInt(parseFloat(100*e.getTotalAfterCalculation())),paystackkey:localStorage.getItem("paystackPublicKey"),tag:"button",currency:localStorage.getItem("currencyId")})),"Paypal"===a.name&&i.a.createElement("div",{className:"col-12 paymentGatewayBlock"},i.a.createElement(E.a,{env:localStorage.getItem("paypalEnv"),client:t,currency:localStorage.getItem("currencyId"),total:parseFloat(e.getTotalAfterCalculation()),shipping:1,onError:e.onError,onSuccess:e.onSuccess,onCancel:e.onCancel,style:{size:"responsive",color:"silver",shape:"rect"}})),"MercadoPago"===a.name&&i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__placeOrder("","MERCADOPAGO")}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/mercadopago.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutMercadoPagoText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutMercadoPagoSubText"))))),"PayMongo"===a.name&&(e.state.showPaymongoForm?i.a.createElement("div",{className:"col-12 paymentGatewayBlock"},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("form",{onSubmit:e.handlePaymongo},i.a.createElement(X.a,null,function(t){var a=t.meta,r=t.getCardNumberProps,o=t.getExpiryDateProps,l=t.getCVCProps;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"font-size-h4 font-w600 mb-2"},localStorage.getItem("checkoutPayMongoText")),i.a.createElement("input",Object.assign({className:"form-control edit-address-input"},r({onChange:e.handleInput}),{name:"paymongoCCNumber",value:e.state.paymongoCCNumber,placeholder:localStorage.getItem("checkoutCardNumber")})),i.a.createElement("input",Object.assign({className:"form-control edit-address-input"},o({onChange:e.handleInput}),{name:"paymongoCCExp",value:e.state.paymongoCCExp,placeholder:localStorage.getItem("checkoutCardExpiration")})),i.a.createElement("input",Object.assign({className:"form-control edit-address-input"},l({onChange:e.handleInput}),{value:e.state.paymongoCCCvv,name:"paymongoCCCvv",placeholder:localStorage.getItem("checkoutCardCvv")})),a.isTouched&&a.error&&i.a.createElement("span",null,"Error: ",a.error))}),i.a.createElement("div",{className:"mt-20 px-15 pt-15 button-block"},i.a.createElement("button",{type:"submit",className:"btn btn-main",style:{backgroundColor:localStorage.getItem("storeColor")}},localStorage.getItem("checkoutPayText")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),e.getTotalAfterCalculation(),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))))))):i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__showPaymongoForm()}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/paymongo.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutPayMongoText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutPayMongoSubText")))))))})))),i.a.createElement("div",{className:"progress push m-0 progress-transparent",style:{height:"8px"}},i.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated hidden",role:"progressbar",id:"progressBar",style:{backgroundColor:localStorage.getItem("storeColor"),width:"10%"}})),i.a.createElement("div",{className:"mb-0 px-15",id:"checkoutMessageOnIdle"},"<p><br></p>"!==localStorage.getItem("checkoutMessageOnIdle")&&"null"!==localStorage.getItem("checkoutMessageOnIdle")&&""!==localStorage.getItem("checkoutMessageOnIdle")&&i.a.createElement("div",{dangerouslySetInnerHTML:{__html:localStorage.getItem("checkoutMessageOnIdle")}})),i.a.createElement("p",{id:"checkoutMessageOnProcess",className:"checkout-message-on-process mb-0 mt-15 text-center hidden"},localStorage.getItem("checkoutMessageOnProcess")))}}]),t}(s.Component);oe.contextTypes={router:function(){return null}};var le=Object(m.b)(function(e){return{user:e.user.user,addresses:e.addresses.addresses,cartProducts:e.cart.products,cartTotal:e.total.data,coupon:e.coupon.coupon,checkout:e.checkout.checkout,restaurant_info:e.items.restaurant_info}},{placeOrder:C.a,updateUserInfo:N.p,getRestaurantInfoById:T.d})(Object(u.a)(oe)),ne=a(210),ce=a(238),se=a(12),ie=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(n.a)(t)).call.apply(e,[this].concat(c)))).state={loading:!1,process_distance_calc_loading:!1,continueFetchPaymentGateway:!0,gateways_received:!1,toPay:""},a.handleLoading=function(e){a.setState({loading:e})},a.fetchPaymentGateways=function(e){a.state.continueFetchPaymentGateway?(console.log("fetching again..."),a.props.getPaymentGateways(e,localStorage.getItem("activeRestaurant")).then(function(e){e&&e.payload&&a.setState({continueFetchPaymentGateway:!1,gateways_received:!0})})):clearInterval(a.retryPaymentGatewaySetInterval)},a.handleProcessDistanceCalcLoading=function(e){a.setState({process_distance_calc_loading:e})},a.handleToPayText=function(e){setTimeout(function(){a.setState({toPay:e})},200)},a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user;t&&this.props.getPaymentGateways(t.data.auth_token,localStorage.getItem("activeRestaurant")).then(function(a){a&&a.payload?e.setState({gateways_received:!0}):(console.error("fetching payment gateways failed... trying again after 2.5s"),e.retryPaymentGatewaySetInterval=setInterval(function(){e.fetchPaymentGateways(t.data.auth_token)},2500))}),this.props.cartProducts.length&&document.getElementsByTagName("body")[0].classList.add("bg-grey-light")}},{key:"componentWillUnmount",value:function(){document.getElementsByTagName("body")[0].classList.remove("bg-grey-light"),clearInterval(this.retryPaymentGatewaySetInterval)}},{key:"render",value:function(){return this.props.cartProducts.length?window.innerWidth>768?i.a.createElement(d.a,{to:"/"}):this.props.confirmCart?null===localStorage.getItem("storeColor")?i.a.createElement(d.a,{to:"/"}):i.a.createElement(i.a.Fragment,null,this.state.loading&&i.a.createElement(se.a,null),this.state.process_distance_calc_loading&&i.a.createElement(se.a,null),i.a.createElement(p.a,{seotitle:localStorage.getItem("checkoutPageTitle"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),i.a.createElement(g.a,{boxshadow:!0,has_title:!0,title:this.state.toPay,disable_search:!0,from_checkout:!0}),i.a.createElement("div",{className:"pt-50"},i.a.createElement("div",{className:"pt-30"}),i.a.createElement(le,{handleProcessDistanceCalcLoading:this.handleProcessDistanceCalcLoading,googleLoadingStatus:this.state.process_distance_calc_loading,paymentgateways:this.props.paymentgateways,gatewayStatus:this.state.gateways_received,handleLoading:this.handleLoading,toPay:this.handleToPayText,google:this.props.google}))):i.a.createElement(d.a,{to:"/cart"}):i.a.createElement(d.a,{to:"/cart"})}}]),t}(s.Component);t.default=Object(ce.GoogleApiWrapper)({apiKey:localStorage.getItem("googleApiKey"),LoadingContainer:se.a})(Object(m.b)(function(e){return{total:e.total.total,user:e.user.user,cartProducts:e.cart.products,cartTotal:e.total.data,coupon:e.coupon.coupon,confirmCart:e.confirmCart.confirmCart,paymentgateways:e.paymentgateways.paymentgateways}},{getPaymentGateways:function(e,t){return function(a){return O.a.post(w.E,{token:e,restaurant_id:t}).then(function(e){var t=e.data;return a({type:ne.a,payload:t})}).catch(function(e){console.log(e)})}}})(Object(u.a)(ie)))}}]);