(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{222:function(e,t,a){"use strict";function o(e,t){var a=t.left,o=t.right,n=t.mirror,r=t.opposite,s=(a?1:0)|(o?2:0)|(n?16:0)|(r?32:0)|(e?64:0);if(p.hasOwnProperty(s))return p[s];if(!n!=!(e&&r)){var l=[o,a];a=l[0],o=l[1]}var c=a?"-100%":o?"100%":"0",u=e?"from {\n        opacity: 1;\n      }\n      to {\n        transform: translate3d("+c+", 0, 0) skewX(30deg);\n        opacity: 0;\n      }\n    ":"from {\n        transform: translate3d("+c+", 0, 0) skewX(-30deg);\n        opacity: 0;\n      }\n      60% {\n        transform: skewX(20deg);\n        opacity: 1;\n      }\n      80% {\n        transform: skewX(-5deg);\n        opacity: 1;\n      }\n      to {\n        transform: none;\n        opacity: 1;\n      }";return p[s]=(0,i.animation)(u),p[s]}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.defaults,t=e.children,a=(e.out,e.forever),n=e.timeout,r=e.duration,s=void 0===r?i.defaults.duration:r,c=e.delay,u=void 0===c?i.defaults.delay:c,p=e.count,m=void 0===p?i.defaults.count:p,d=function(e,t){var a={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=e[o]);return a}(e,["children","out","forever","timeout","duration","delay","count"]),g={make:o,duration:void 0===n?s:n,delay:u,forever:a,count:m,style:{animationFillMode:"both"}};return d.left,d.right,d.mirror,d.opposite,(0,l.default)(d,g,g,t)}Object.defineProperty(t,"__esModule",{value:!0});var r,s=a(77),l=(r=s)&&r.__esModule?r:{default:r},c=a(1),i=a(58),u={out:c.bool,left:c.bool,right:c.bool,mirror:c.bool,opposite:c.bool,duration:c.number,timeout:c.number,delay:c.number,count:c.number,forever:c.bool},p={};n.propTypes=u,t.default=n,e.exports=t.default},223:function(e,t,a){"use strict";var o=a(6),n=a(7),r=a(9),s=a(8),l=a(10),c=a(0),i=a.n(c),u=a(18),p=a.n(u),m=a(222),d=a.n(m),g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(r.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={shareButton:!1,androidShareButton:!1},a.shareLink=function(e){navigator.share&&navigator.share({url:e.link}).then(function(){return console.log("Successful share")}).catch(function(e){return console.log("Error sharing",e)})},a.shareLinkViaAndroidApp=function(e){"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&window.Android.shareDataThroughIntent(e.link)},a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){navigator.share&&this.setState({shareButton:!0}),"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&this.setState({shareButton:!1,androidShareButton:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,this.state.shareButton&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-share-btn",style:{position:"relative"},onClick:function(){return e.shareLink(e.props)}},i.a.createElement("i",{className:"si si-share"}),i.a.createElement(p.a,{duration:"500"})),this.state.androidShareButton&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-share-btn",style:{position:"relative"},onClick:function(){return e.shareLinkViaAndroidApp(e.props)}},i.a.createElement("i",{className:"si si-share"}),i.a.createElement(p.a,{duration:"500"})))}}]),t}(c.Component),h=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 p-0 fixed",style:{zIndex:"9"}},i.a.createElement("div",{className:"block m-0"},i.a.createElement("div",{className:"block-content p-0 ".concat(this.props.dark&&"nav-dark")},i.a.createElement("div",{className:"input-group ".concat(this.props.boxshadow&&"search-box")},!this.props.disable_back_button&&i.a.createElement("div",{className:"input-group-prepend"},this.props.back_to_home&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(p.a,{duration:"500"})),this.props.goto_orders_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-orders")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(p.a,{duration:"500"})),this.props.goto_accounts_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-account")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(p.a,{duration:"500"})),!this.props.back_to_home&&!this.props.goto_orders_page&&!this.props.goto_accounts_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns ".concat(this.props.dark&&"nav-dark"),style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.goBack()},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(p.a,{duration:"500"}))),i.a.createElement("p",{className:"form-control search-input d-flex align-items-center ".concat(this.props.dark&&"nav-dark")},this.props.logo&&i.a.createElement("img",{src:"/assets/img/logos/logo.png",alt:localStorage.getItem("storeName"),width:"120"}),this.props.has_title?i.a.createElement(i.a.Fragment,null,this.props.from_checkout?i.a.createElement("span",{className:"nav-page-title",id:"checkoutNavPageTitle"},localStorage.getItem("cartToPayText")," ",i.a.createElement("span",{style:{color:localStorage.getItem("storeColor")}},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.title,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))):i.a.createElement("span",{className:"nav-page-title"},this.props.title)):null,this.props.has_delivery_icon&&i.a.createElement(d.a,{left:!0},i.a.createElement("img",{src:"/assets/img/various/delivery-bike.png",alt:this.props.title,className:"nav-page-title"}))),this.props.has_restaurant_info?i.a.createElement("div",{className:"fixed-restaurant-info hidden",ref:function(t){e.heading=t}},i.a.createElement("span",{className:"font-w700 fixedRestaurantName"},this.props.restaurant.name),i.a.createElement("br",null),i.a.createElement("span",{className:"font-w400 fixedRestaurantTime"},i.a.createElement("i",{className:"si si-clock"})," ",this.props.restaurant.delivery_time," ",localStorage.getItem("homePageMinsText"))):null,i.a.createElement("div",{className:"input-group-append"},!this.props.disable_search&&i.a.createElement("button",{type:"submit",className:"btn search-navs-btns",style:{position:"relative"}},i.a.createElement("i",{className:"si si-magnifier"}),i.a.createElement(p.a,{duration:"500"})),this.props.homeButton&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-home-btn",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},i.a.createElement("i",{className:"si si-home"}),i.a.createElement(p.a,{duration:"500"})),this.props.shareButton&&i.a.createElement(g,{link:window.location.href})))))))}}]),t}(c.Component);h.contextTypes={router:function(){return null}};t.a=h},230:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"c",function(){return c}),a.d(t,"b",function(){return i});var o=a(192),n=a(5),r=a(4),s=a.n(r),l=function(e,t,a,r){return function(l){return s.a.post(n.e,{token:e,coupon:t,restaurant_id:a,subtotal:r}).then(function(e){var t=e.data;return[l({type:o.a,payload:t}),l({type:o.b,payload:null})]}).catch(function(e){if(console.log(e),401===e.response.status)return l({type:o.b,payload:"NOTLOGGEDIN"})})}},c=function(){return function(e){console.log("Triggred Coupon Removed");return e({type:o.a,payload:{hideMessage:!0,coupon_error:""}})}},i=function(e,t){return function(a){return e.appliedAmount=t,a({type:o.a,payload:e})}}},334:function(e,t,a){"use strict";a.r(t);var o=a(28),n=a.n(o),r=a(42),s=a(6),l=a(7),c=a(9),i=a(8),u=a(10),p=a(0),m=a.n(p),d=a(18),g=a.n(d),h=a(223),f=a(230),b=a(17),v=a(4),y=a.n(v),S=a(5),E=a(12),N=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!0,inputCoupon:null,couponFailed:!1,couponFailedType:"",couponSubtotalMessage:"",coupons:null,couponsList:!1,error:!1,errorMessage:null},a.handleInput=function(e){a.setState({inputCoupon:e.target.value})},a.handleSubmit=function(e){a.setState({loading:!0}),e.preventDefault();var t=a.props.user.success?a.props.user.data.auth_token:null;localStorage.setItem("restaurant_id",a.props.restaurant_info.id),a.props.applyCoupon(t,a.state.inputCoupon,localStorage.getItem("restaurant_id"),localStorage.getItem("orderSubtotal")),y.a.post(S.e,{token:t,coupon:a.state.inputCoupon,restaurant_id:localStorage.getItem("restaurant_id"),subtotal:localStorage.getItem("orderSubtotal")}).then(function(e){var t=e.data;!0===t.success?(localStorage.setItem("Couponpopup","true"),localStorage.setItem("appliedCoupon",t.code),a.redirectToCart()):(a.setState({loading:!1}),a.setState({error:!0}),a.setState({errorMessage:t.message}))})},a.redirectToCart=function(){window.location.href="/cart"},a.__getRestaurantCoupons=function(){var e=a.props.user,t=e.success?a.props.user.data.auth_token:null,o=a.props.restaurant_info.id;e.success?y.a.post(S.L,{token:t,restaurant_id:o,subtotal:localStorage.getItem("orderSubtotal")}).then(function(e){!0===e.data.success&&(a.setState({couponsList:!0}),a.setState({coupons:e.data.coupons})),a.setState({loading:!1})}).catch(function(e){console.log(e.response.data)}):a.setState({loading:!1})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user.success?this.props.user.data.auth_token:null;this.__getRestaurantCoupons(),localStorage.getItem("appliedCoupon")&&this.setState({inputCoupon:localStorage.getItem("appliedCoupon")},function(){e.refs.couponInput.defaultValue=localStorage.getItem("appliedCoupon"),e.props.applyCoupon(t,localStorage.getItem("appliedCoupon"),e.props.restaurant_info.id,localStorage.getItem("orderSubtotal")),y.a.post(S.e,{token:t,coupon:localStorage.getItem("appliedCoupon"),restaurant_id:e.props.restaurant_info.id,subtotal:localStorage.getItem("orderSubtotal")}).then(function(e){var t=e.data;localStorage.setItem("Couponpopup","true"),localStorage.setItem("appliedCoupon",t.code)})})}},{key:"componentWillReceiveProps",value:function(e){console.log(e),this.props.coupon!==e.coupon&&(e.coupon.success?(console.log("SUCCESS COUPON"),localStorage.setItem("appliedCoupon",e.coupon.code),this.setState({couponFailed:!1})):(console.log("COUPON Removed"),console.log("FAILED COUPON"),localStorage.removeItem("appliedCoupon"),this.setState({couponFailed:!e.coupon.hideMessage,couponFailedType:e.coupon.type,couponSubtotalMessage:e.coupon.message})))}},{key:"handleApply",value:function(){var e=Object(r.a)(n.a.mark(function e(t){var a,o,r,s,l=this;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),a=document.querySelector('[data-id="coupon-'.concat(t,'"][data-code]')),!(o=a?a.dataset.code:null)){e.next=11;break}return r=this.props.user,s=r.success?this.props.user.data.auth_token:null,localStorage.setItem("restaurant_id",this.props.restaurant_info.id),e.next=9,this.props.applyCoupon(s,o,localStorage.getItem("restaurant_id"),localStorage.getItem("orderSubtotal"));case 9:this.setState({inputCoupon:o}),y.a.post(S.e,{token:s,coupon:o,restaurant_id:localStorage.getItem("restaurant_id"),subtotal:localStorage.getItem("orderSubtotal")}).then(function(e){var t=e.data;sessionStorage.setItem("couponDescription",t.description),!0===t.success?(localStorage.setItem("appliedCoupon",t.code),localStorage.setItem("Couponpopup","true"),l.redirectToCart()):(l.setState({loading:!1}),l.setState({error:!0}),l.setState({errorMessage:t.message}))});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.coupon,o=t.user;return m.a.createElement(m.a.Fragment,null,this.state.loading&&m.a.createElement(E.a,null),m.a.createElement(h.a,{boxshadow:!0,has_title:!0,title:localStorage.getItem("applyCouponButtonText")+" "+localStorage.getItem("cartCouponText"),disable_search:!0,homeButton:!0,replace:!0}),this.state.error&&m.a.createElement("div",{className:"auth-error no-click"},m.a.createElement("div",{className:"error-shake"},this.state.errorMessage)),m.a.createElement("div",{className:"input-group px-15 pb-15"},m.a.createElement("form",{className:"coupon-form ".concat(!o.success&&"coupon-block-not-loggedin"),style:{marginTop:"6rem"},onSubmit:function(){return e.handleSubmit()}},m.a.createElement("div",{className:"input-group"},m.a.createElement("div",{className:"input-group-prepend"},m.a.createElement("button",{className:"btn apply-coupon-btn"},m.a.createElement("i",{className:"si si-tag"}))),m.a.createElement("input",{type:"text",className:"form-control apply-coupon-input",placeholder:localStorage.getItem("cartCouponText"),onChange:this.handleInput,style:{color:localStorage.getItem("storeColor")},spellCheck:"false",ref:"couponInput"}),m.a.createElement("div",{className:"input-group-append"},m.a.createElement("button",{type:"submit",className:"btn apply-coupon-btn",onClick:this.handleSubmit},m.a.createElement("span",{style:{backgroundColor:localStorage.getItem("cartColorBg"),color:localStorage.getItem("cartColorText")}},localStorage.getItem("applyCouponButtonText")),m.a.createElement(g.a,{duration:"500"}))))),m.a.createElement("div",{className:"coupon-status"},a.code&&m.a.createElement("div",{className:"coupon-success pt-10 pb-10"},"true"===localStorage.getItem("showCouponDescriptionOnSuccess")?m.a.createElement(m.a.Fragment,null,a.description):m.a.createElement(m.a.Fragment,null,'"'+a.code+'"'," ",localStorage.getItem("cartApplyCoupon")," ","PERCENTAGE"===a.discount_type?a.discount+"%":m.a.createElement(m.a.Fragment,null,"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")+a.discount,"right"===localStorage.getItem("currencySymbolAlign")&&a.discount+localStorage.getItem("currencyFormat")," ",localStorage.getItem("cartCouponOffText")))),this.state.couponFailed&&("MINSUBTOTAL"===this.state.couponFailedType?m.a.createElement("div",{className:"coupon-fail pt-10 pb-10"},this.state.couponSubtotalMessage):m.a.createElement("div",{className:"coupon-fail pt-10 pb-10"},localStorage.getItem("cartInvalidCoupon"))),!o.success&&m.a.createElement("div",{className:"coupon-not-loggedin-message pt-10 pb-10"},m.a.createElement("i",{className:"si si-info mr-2"}),localStorage.getItem("couponNotLoggedin"))),m.a.createElement("hr",null),m.a.createElement("div",{className:"listed-cart-coupons",style:{width:"100%"}},!1===this.state.couponsList&&m.a.createElement("div",{className:"text-center mt-50 font-w600 text-muted"},"No Coupons Available!"),!0===this.state.couponsList&&this.state.coupons&&this.state.coupons.length>0&&this.state.coupons.map(function(t,a){return m.a.createElement("div",{key:a,className:"position-relative",onClick:function(){return e.handleApply(a)},"data-id":"coupon-".concat(a),"data-code":t.code},m.a.createElement("div",{className:"single-cart-coupon mt-3"},m.a.createElement("div",{className:"d-flex justify-content-start mr-2"},m.a.createElement("img",{src:"/assets/img/various/offer.png",alt:"Coupon",className:"single-cart-coupon-image mr-3",style:{width:"5rem",height:"auto"}}),m.a.createElement("div",{className:"position-relative"},m.a.createElement("p",{className:"mb-0"},m.a.createElement("b",null,t.code)),m.a.createElement("p",{className:"mb-0"},"AMOUNT"===t.discount_type?m.a.createElement("div",{className:"coupon-sentence"},m.a.createElement("p",{className:"mb-0"},m.a.createElement("b",null,localStorage.getItem("currencyFormat"),t.discount," Off")," ",null!==t.max_discount&&"Upto "+localStorage.getItem("currencyFormat")+t.max_discount),m.a.createElement("p",{className:"mb-0"},null!==t.min_subtotal&&t.min_subtotal>0&&"Above "+localStorage.getItem("currencyFormat")+t.min_subtotal)):m.a.createElement("div",{className:"coupon-sentence"},m.a.createElement("p",{className:"mb-0"},m.a.createElement("b",null,t.discount,"% Off")," ",null!==t.max_discount&&"Upto "+localStorage.getItem("currencyFormat")+t.max_discount),m.a.createElement("p",{className:"mb-0"},null!==t.min_subtotal&&t.min_subtotal>0&&"Above "+localStorage.getItem("currencyFormat")+t.min_subtotal))))),m.a.createElement("div",null,m.a.createElement("button",{className:"btn btn-success"},"Apply"))),m.a.createElement(g.a,{duration:"500"}))}))))}}]),t}(p.Component);N.contextTypes={router:function(){return null}};t.default=Object(b.b)(function(e){return{coupon:e.coupon.coupon,restaurant_info:e.items.restaurant_info,user:e.user.user}},{applyCoupon:f.a})(N)}}]);