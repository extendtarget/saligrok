(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{222:function(e,t,a){"use strict";function r(e,t){var a=t.left,r=t.right,n=t.mirror,o=t.opposite,l=(a?1:0)|(r?2:0)|(n?16:0)|(o?32:0)|(e?64:0);if(m.hasOwnProperty(l))return m[l];if(!n!=!(e&&o)){var i=[r,a];a=i[0],r=i[1]}var s=a?"-100%":r?"100%":"0",d=e?"from {\n        opacity: 1;\n      }\n      to {\n        transform: translate3d("+s+", 0, 0) skewX(30deg);\n        opacity: 0;\n      }\n    ":"from {\n        transform: translate3d("+s+", 0, 0) skewX(-30deg);\n        opacity: 0;\n      }\n      60% {\n        transform: skewX(20deg);\n        opacity: 1;\n      }\n      80% {\n        transform: skewX(-5deg);\n        opacity: 1;\n      }\n      to {\n        transform: none;\n        opacity: 1;\n      }";return m[l]=(0,c.animation)(d),m[l]}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,a=(e.out,e.forever),n=e.timeout,o=e.duration,l=void 0===o?c.defaults.duration:o,s=e.delay,d=void 0===s?c.defaults.delay:s,m=e.count,u=void 0===m?c.defaults.count:m,p=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["children","out","forever","timeout","duration","delay","count"]),g={make:r,duration:void 0===n?l:n,delay:d,forever:a,count:u,style:{animationFillMode:"both"}};return p.left,p.right,p.mirror,p.opposite,(0,i.default)(p,g,g,t)}Object.defineProperty(t,"__esModule",{value:!0});var o,l=a(77),i=(o=l)&&o.__esModule?o:{default:o},s=a(1),c=a(58),d={out:s.bool,left:s.bool,right:s.bool,mirror:s.bool,opposite:s.bool,duration:s.number,timeout:s.number,delay:s.number,count:s.number,forever:s.bool},m={};n.propTypes=d,t.default=n,e.exports=t.default},223:function(e,t,a){"use strict";var r=a(6),n=a(7),o=a(9),l=a(8),i=a(10),s=a(0),c=a.n(s),d=a(18),m=a.n(d),u=a(222),p=a.n(u),g=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={shareButton:!1,androidShareButton:!1},a.shareLink=function(e){navigator.share&&navigator.share({url:e.link}).then(function(){return console.log("Successful share")}).catch(function(e){return console.log("Error sharing",e)})},a.shareLinkViaAndroidApp=function(e){"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&window.Android.shareDataThroughIntent(e.link)},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){navigator.share&&this.setState({shareButton:!0}),"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&this.setState({shareButton:!1,androidShareButton:!0})}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,this.state.shareButton&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-share-btn",style:{position:"relative"},onClick:function(){return e.shareLink(e.props)}},c.a.createElement("i",{className:"si si-share"}),c.a.createElement(m.a,{duration:"500"})),this.state.androidShareButton&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-share-btn",style:{position:"relative"},onClick:function(){return e.shareLinkViaAndroidApp(e.props)}},c.a.createElement("i",{className:"si si-share"}),c.a.createElement(m.a,{duration:"500"})))}}]),t}(s.Component),v=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"col-12 p-0 fixed",style:{zIndex:"9"}},c.a.createElement("div",{className:"block m-0"},c.a.createElement("div",{className:"block-content p-0 ".concat(this.props.dark&&"nav-dark")},c.a.createElement("div",{className:"input-group ".concat(this.props.boxshadow&&"search-box")},!this.props.disable_back_button&&c.a.createElement("div",{className:"input-group-prepend"},this.props.back_to_home&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(m.a,{duration:"500"})),this.props.goto_orders_page&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-orders")},200)}},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(m.a,{duration:"500"})),this.props.goto_accounts_page&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-account")},200)}},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(m.a,{duration:"500"})),!this.props.back_to_home&&!this.props.goto_orders_page&&!this.props.goto_accounts_page&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns ".concat(this.props.dark&&"nav-dark"),style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.goBack()},200)}},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(m.a,{duration:"500"}))),c.a.createElement("p",{className:"form-control search-input d-flex align-items-center ".concat(this.props.dark&&"nav-dark")},this.props.logo&&c.a.createElement("img",{src:"/assets/img/logos/logo.png",alt:localStorage.getItem("storeName"),width:"120"}),this.props.has_title?c.a.createElement(c.a.Fragment,null,this.props.from_checkout?c.a.createElement("span",{className:"nav-page-title",id:"checkoutNavPageTitle"},localStorage.getItem("cartToPayText")," ",c.a.createElement("span",{style:{color:localStorage.getItem("storeColor")}},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.title,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))):c.a.createElement("span",{className:"nav-page-title"},this.props.title)):null,this.props.has_delivery_icon&&c.a.createElement(p.a,{left:!0},c.a.createElement("img",{src:"/assets/img/various/delivery-bike.png",alt:this.props.title,className:"nav-page-title"}))),this.props.has_restaurant_info?c.a.createElement("div",{className:"fixed-restaurant-info hidden",ref:function(t){e.heading=t}},c.a.createElement("span",{className:"font-w700 fixedRestaurantName"},this.props.restaurant.name),c.a.createElement("br",null),c.a.createElement("span",{className:"font-w400 fixedRestaurantTime"},c.a.createElement("i",{className:"si si-clock"})," ",this.props.restaurant.delivery_time," ",localStorage.getItem("homePageMinsText"))):null,c.a.createElement("div",{className:"input-group-append"},!this.props.disable_search&&c.a.createElement("button",{type:"submit",className:"btn search-navs-btns",style:{position:"relative"}},c.a.createElement("i",{className:"si si-magnifier"}),c.a.createElement(m.a,{duration:"500"})),this.props.homeButton&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-home-btn",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},c.a.createElement("i",{className:"si si-home"}),c.a.createElement(m.a,{duration:"500"})),this.props.shareButton&&c.a.createElement(g,{link:window.location.href})))))))}}]),t}(s.Component);v.contextTypes={router:function(){return null}};t.a=v},224:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r=function(e){if(e){var t=parseFloat(e);return t=t.toFixed(2)}return 0}},236:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return s});var r=a(193),n=a(5),o=a(4),l=a.n(o),i=function(e,t,a,o,i){return function(s){l.a.post(n.rb,{token:e,user_id:t,delivery_lat:a,delivery_long:o,heading:i}).then(function(e){var t=e.data;return s({type:r.b,payload:t})}).catch(function(e){console.log(e)})}},s=function(e,t){return function(a){l.a.post(n.u,{token:e,order_id:t}).then(function(e){var t=e.data;return a({type:r.a,payload:t})}).catch(function(e){console.log(e)})}}},254:function(e,t,a){"use strict";var r=a(6),n=a(7),o=a(9),l=a(8),i=a(10),s=a(0),c=a.n(s),d=a(17),m=a(236),u=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={gpsAccessError:!1,lat:null,lng:null},a.__sendGpsLocation=function(e){a.props.sendDeliveryGuyGpsLocation(a.props.delivery_user.data.auth_token,a.props.delivery_user.data.id,e.coords.latitude,e.coords.longitude,e.coords.heading)},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=navigator&&navigator.geolocation;t&&(this.refreshSetInterval=setInterval(function(){t.getCurrentPosition(function(t){e.__sendGpsLocation(t)},function(t){"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android?e.setState({gpsAccessError:!1}):(console.log("Inside error"),console.log(t),e.setState({gpsAccessError:!0}))},{enableHighAccuracy:!0})},15e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshSetInterval),console.log("Cleared API CALL")}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"pt-50"},this.state.gpsAccessError&&c.a.createElement("div",{className:"auth-error location-error",style:{bottom:"5rem"}},c.a.createElement("div",{className:"error-shake"},localStorage.getItem("allowLocationAccessMessage")))))}}]),t}(s.Component);t.a=Object(d.b)(function(e){return{delivery_user:e.delivery_user.delivery_user}},{sendDeliveryGuyGpsLocation:m.b})(u)},353:function(e,t,a){"use strict";a.r(t);var r=a(6),n=a(7),o=a(9),l=a(8),i=a(10),s=a(0),c=a.n(s),d=a(197),m=a(206),u=a(5),p=a(4),g=a.n(p),v=a(223),y=a(49),h=a(43),f=a(226),_=a.n(f),b=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props.item;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",null,c.a.createElement("span",{className:"delivery-order-item-quantity"},e.quantity,"x")),c.a.createElement("div",{style:{maxWidth:"200px",minWidth:"200px"}},c.a.createElement("strong",null,e.name)),"true"===localStorage.getItem("showPriceAndOrderCommentsDelivery")&&c.a.createElement("div",{className:"cart-item-price"},c.a.createElement(c.a.Fragment,null,"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),e.price*e.quantity,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")))),"true"===localStorage.getItem("showOrderAddonsDelivery")&&c.a.createElement("div",{className:"delivery-items-addons-block"},e&&e.order_item_addons.map(function(t,a){return c.a.createElement(c.a.Fragment,{key:e.id+t.id+a},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",null,t.addon_name),c.a.createElement("div",null,"true"===localStorage.getItem("showPriceAndOrderCommentsDelivery")&&c.a.createElement(c.a.Fragment,null,"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")," ",t.addon_price,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")))))})),c.a.createElement("hr",{className:"single-item-division-hr"}))}}]),t}(s.Component),E=a(317),S=a(17),N=a(254),k=c.a.createRef(),w=c.a.createRef(),x="ontouchstart"in document.documentElement,I=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).isDragging=!1,a.sliderLeft=0,a.state={},a.onDrag=function(e){a.unmounted||a.state.unlocked||a.isDragging&&(a.sliderLeft=x?Math.min(Math.max(0,e.touches[0].clientX-a.startX),a.containerWidth):Math.min(Math.max(0,e.clientX-a.startX),a.containerWidth),a.updateSliderStyle())},a.updateSliderStyle=function(){a.unmounted||a.state.unlocked||(k.current.style.left=a.sliderLeft+80+"px")},a.stopDrag=function(){a.unmounted||a.state.unlocked||a.isDragging&&(a.isDragging=!1,a.sliderLeft>.9*a.containerWidth?(a.sliderLeft=a.containerWidth,a.onSuccess(),a.props.onSuccess&&a.props.onSuccess()):(a.sliderLeft=0,a.props.onFailure&&a.props.onFailure()),a.updateSliderStyle())},a.startDrag=function(e){a.unmounted||a.state.unlocked||(a.isDragging=!0,a.startX=x?e.touches&&e.touches[0].clientX:e.clientX)},a.onSuccess=function(){w.current.style.width=w.current.clientWidth+"px",a.setState({unlocked:!0})},a.getText=function(){return a.state.unlocked?a.props.text_unlocked||c.a.createElement("i",{className:"si si-check"}):a.props.text||"Slide to Proceed"},a.reset=function(){a.unmounted||a.setState({unlocked:!1},function(){a.sliderLeft=0,a.updateSliderStyle()})},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){x?(document.addEventListener("touchmove",this.onDrag),document.addEventListener("touchend",this.stopDrag)):(document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.stopDrag)),this.containerWidth=w.current.clientWidth-80}},{key:"componentWillReceiveProps",value:function(e){e.reset&&this.reset()}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){return console.log("Swipe Button Color:",this.props.color),c.a.createElement("div",{className:"ReactSwipeButton"},c.a.createElement("div",{className:"rsbContainer slider-bg-color ".concat(this.state.unlocked&&"rsbContainerUnlocked"),ref:w,style:{"--swipe-button-color":this.props.color||"#000"}},c.a.createElement("div",{className:"rsbcSlider",ref:k,onMouseDown:this.startDrag,onTouchStart:this.startDrag},c.a.createElement("span",{className:"rsbcSliderText"},this.getText()),c.a.createElement("span",{className:"rsbcSliderArrow"})),c.a.createElement("div",{className:"rsbcText"},this.getText())))}}]),t}(s.Component),O=a(78),D=a.n(O),T=a(224),C=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={initLoading:!0,loading:!1,already_accepted:!1,accepted_order:!1,picked_up:!1,delivered:!1,delivery_pin:"",delivery_pin_error:!1,reset:!1,max_order:!1},a.__acceptToDeliver=function(){a.props.acceptToDeliverOrder(a.props.delivery_user.data.auth_token,a.props.delivery_user.data.id,a.props.single_delivery_order.id),a.setState({loading:!0})},a.__pickedUp=function(){a.props.pickupOrder(a.props.delivery_user.data.auth_token,a.props.single_delivery_order.id),a.setState({loading:!0})},a.__delivered=function(){a.props.deliverOrder(a.props.delivery_user.data.auth_token,a.props.single_delivery_order.id,a.state.delivery_pin),a.setState({loading:!0})},a.__getDirectionToRestaurant=function(e,t){var a="http://maps.google.com/maps?q=".concat(e,",").concat(t);window.open(a,"_blank")},a.__getDirectionToUser=function(e){if(a.state.accepted_order&&e)try{var t=JSON.parse(e);if(!t.lat||!t.lng)throw new Error("Invalid location coordinates");var r="http://maps.google.com/maps?q=".concat(t.lat,",").concat(t.lng);window.open(r,"_blank")}catch(o){console.error("Error parsing user location:",o);var n="http://maps.google.com/maps?q=".concat(encodeURIComponent(e));window.open(n,"_blank")}else console.warn("User location is not available.")},a.__handleDeliveryPinInput=function(e){a.setState({delivery_pin:e.target.value})},a.formatCurrency=function(e){return c.a.createElement(c.a.Fragment,null,"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),Object(T.a)(e),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))},a.isFreeDeliveryEligible=function(e){var t=e.sub_total?parseFloat(e.sub_total):parseFloat(e.total),a=e.restaurant&&e.restaurant.free_delivery_subtotal?parseFloat(e.restaurant.free_delivery_subtotal):0,r=e.delivery_distance?parseFloat(e.delivery_distance):null,n=e.restaurant&&e.restaurant.free_delivery_distance?parseFloat(e.restaurant.free_delivery_distance):0;if(console.log("Free Delivery Check:",{total:t,freeDeliverySubtotal:a,deliveryDistance:r,freeDeliveryDistance:n,isSubTotalDefined:!!e.sub_total,isDeliveryDistanceDefined:!!e.delivery_distance}),!e.sub_total)return console.warn("sub_total is undefined, cannot determine free delivery eligibility"),!1;if(null===r)return console.warn("Delivery distance is undefined, assuming not eligible for free delivery"),!1;var o=a>0&&t>=a&&(0===n||r<=n);return console.log("Is Free Delivery Eligible:",o),o},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.getElementsByTagName("body")[0].classList.remove("bg-grey"),document.getElementsByTagName("body")[0].classList.add("delivery-dark-bg"),this.props.delivery_user.success&&this.props.getSingleDeliveryOrder(this.props.delivery_user.data.auth_token,this.props.match.params.unique_order_id).then(function(t){t&&t.payload&&t.payload.id&&e.setState({initLoading:!1})})}},{key:"componentWillReceiveProps",value:function(e){e.single_delivery_order&&e.single_delivery_order.id?(console.log("Order payment details:",{payment_mode:e.single_delivery_order.payment_mode,is_wallet_payment:e.single_delivery_order.is_wallet_payment,wallet_amount:e.single_delivery_order.wallet_amount,remaining_amount:e.single_delivery_order.remaining_amount,total:e.single_delivery_order.total,adjusted_total:e.single_delivery_order.adjusted_total,free_delivery_cost:e.single_delivery_order.restaurant&&e.single_delivery_order.restaurant.free_delivery_cost,free_delivery_subtotal:e.single_delivery_order.restaurant&&e.single_delivery_order.restaurant.free_delivery_subtotal,free_delivery_distance:e.single_delivery_order.restaurant&&e.single_delivery_order.restaurant.free_delivery_distance,delivery_distance:e.single_delivery_order.delivery_distance,sub_total:e.single_delivery_order.sub_total,coupon_delivery_discount:e.single_delivery_order.coupon_delivery_discount,commission:e.single_delivery_order.commission}),2===e.single_delivery_order.orderstatus_id&&(e.single_delivery_order.max_order&&this.setState({max_order:!0,reset:!0}),this.setState({loading:!1})),3===e.single_delivery_order.orderstatus_id&&(e.single_delivery_order.already_accepted&&this.setState({already_accepted:!0,reset:!0}),this.setState({accepted_order:!0}),this.setState({loading:!1})),4===e.single_delivery_order.orderstatus_id&&(this.setState({accepted_order:!0,picked_up:!0}),this.setState({loading:!1})),e.single_delivery_order.delivery_pin_error&&this.setState({delivery_pin_error:!0,reset:!0}),5===e.single_delivery_order.orderstatus_id&&(this.setState({loading:!1}),this.context.router.history.push("/delivery"))):console.warn("Invalid order data received:",e.single_delivery_order)}},{key:"render",value:function(){var e=this;if(window.innerWidth>768)return c.a.createElement(E.a,{to:"/"});var t=this.props.single_delivery_order;if(this.state.initLoading||!t||!t.id)return c.a.createElement("div",{className:"pt-50"},c.a.createElement(y.a,{height:150,width:400,speed:1.2,primaryColor:"true"===localStorage.getItem("deliveryAppLightMode")?"#E0E0E0":"#161b31",secondaryColor:"true"===localStorage.getItem("deliveryAppLightMode")?"#fefefe":"#222b45"},c.a.createElement("rect",{x:"20",y:"70",rx:"4",ry:"4",width:"80",height:"78"}),c.a.createElement("rect",{x:"144",y:"85",rx:"0",ry:"0",width:"115",height:"18"}),c.a.createElement("rect",{x:"144",y:"115",rx:"0",ry:"0",width:"165",height:"16"})));this.isFreeDeliveryEligible(t)||t.coupon_delivery_discount>0||"0.00"===t.delivery_charge&&t.free_delivery_cost;var a=function(e){if(!e||""===e||"0"===e)return 0;var t=String(e).replace(/[^0-9.-]+/g,""),a=Number(t);return isNaN(a)?0:a},r=a(t.delivery_charge)||0,n=a(t.sub_total)||0,o=a(t.total)||0,l=999999.99!==n?n:o-r,i=a(t.coupon_amount)||0,s=a(t.wallet_amount)||0,d=a(t.free_delivery_cost)||0,m=a(t.commission)||0,u=a(t.payable)||a(t.remaining_amount)||0;console.log("Raw order.total:",t.total),console.log("Raw order.sub_total:",t.sub_total),console.log("Cleaned orderTotal:",l),console.log("Raw commission:",t.commission),console.log("Cleaned commission:",m),t.commission||console.warn("Commission is missing or zero:",{order_id:t.id,commission:t.commission});var p=[{label:localStorage.getItem("deliveryOrderTotalText")||"\u0627\u0644\u062f\u0641\u0639 \u0644\u0644\u0645\u0637\u0639\u0645 ",value:l,sign:""},i>0?{label:localStorage.getItem("deliveryCouponText")||"\u0627\u0644\u0643\u0648\u0628\u0648\u0646",value:-i,sign:"-"}:null,d>0?{label:localStorage.getItem("deliveryRestaurantDeliveryText")||"\u0631\u0633\u0648\u0645 \u0627\u0644\u062a\u0648\u0635\u064a\u0644 \u0627\u0644\u0645\u062c\u0627\u0646\u064a \u0645\u0646 \u0627\u0644\u0645\u0637\u0639\u0645    ",value:d,sign:"+"}:null,s>0?{label:localStorage.getItem("deliveryWalletText")||"\u0627\u0644\u0645\u062d\u0641\u0638\u0629",value:-s,sign:"-"}:null].filter(function(e){return e}),g=l-i+d-s;return g!==m&&console.warn("Commission calculation mismatch:",{order_id:t.id,calculatedTotal:g,commission:m,orderTotal:l,couponAmount:i,restaurantDelivery:d,walletAmount:s}),c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{seotitle:localStorage.getItem("deliveryOrdersTitle")||"\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u062a\u0648\u0635\u064a\u0644",seodescription:localStorage.getItem("seoMetaDescription")||"\u0625\u062f\u0627\u0631\u0629 \u0637\u0644\u0628\u0627\u062a \u0627\u0644\u062a\u0648\u0635\u064a\u0644",ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle")||"\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u062a\u0648\u0635\u064a\u0644",ogdescription:localStorage.getItem("seoOgDescription")||"\u0625\u062f\u0627\u0631\u0629 \u0637\u0644\u0628\u0627\u062a \u0627\u0644\u062a\u0648\u0635\u064a\u0644",ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle")||"\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u062a\u0648\u0635\u064a\u0644",twitterdescription:localStorage.getItem("seoTwitterDescription")||"\u0625\u062f\u0627\u0631\u0629 \u0637\u0644\u0628\u0627\u062a \u0627\u0644\u062a\u0648\u0635\u064a\u0644"}),c.a.createElement(v.a,{boxshadow:!0,has_title:!0,title:t.unique_order_id&&"#"+t.unique_order_id.substr(t.unique_order_id.length-8),disable_search:!0,dark:!0}),c.a.createElement(c.a.Fragment,null,this.state.loading&&c.a.createElement("div",{className:"height-100 overlay-loading ongoing-payment-spin"},c.a.createElement("div",{className:"spin-load"})),!this.state.delivered&&c.a.createElement(c.a.Fragment,null,this.state.max_order&&c.a.createElement("div",{className:"delivery-error delivery-max-order-reached"},c.a.createElement("div",{className:"error-shake"},localStorage.getItem("deliveryMaxOrderReachedMsg")||"\u062a\u0645 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0637\u0644\u0628\u0627\u062a")),this.state.already_accepted?c.a.createElement("div",{className:"delivery-error delivery-already-accepted-error"},c.a.createElement("div",{className:"error-shake"},localStorage.getItem("deliveryAlreadyAccepted")||"\u062a\u0645 \u0642\u0628\u0648\u0644 \u0627\u0644\u0637\u0644\u0628 \u0628\u0627\u0644\u0641\u0639\u0644")):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"view-delivery-order",style:{paddingBottom:"20rem",paddingTop:"4rem"}},c.a.createElement("div",{className:"pt-20 px-15 pb-15"},c.a.createElement("div",{className:"p-15 single-order-earnings-block",style:{backgroundColor:"#222b45",borderRadius:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"}},c.a.createElement("div",{className:"d-flex justify-content-between mb-2"},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("i",{className:"si si-basket mr-2",style:{fontSize:"1.2rem",color:"#f28c38"}}),c.a.createElement("span",{style:{fontWeight:700}},localStorage.getItem("deliveryOrderTotalText")||" \u0627\u0644\u062f\u0641\u0639 \u0644\u0644\u0645\u0637\u0639\u0645")),c.a.createElement("div",{style:{fontSize:"1.2rem",fontWeight:600,color:"#f28c38"}},this.formatCurrency(l))),i>0&&c.a.createElement("div",{className:"d-flex justify-content-between mb-2"},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("i",{className:"si si-ticket mr-2 text-info",style:{fontSize:"1.2rem"}}),c.a.createElement("span",null,localStorage.getItem("deliveryCouponText")||"\u0627\u0644\u0643\u0648\u0628\u0648\u0646")),c.a.createElement("div",{className:"text-success",style:{fontSize:"1.2rem",fontWeight:600}},"-",this.formatCurrency(i))),s>0&&c.a.createElement("div",{className:"d-flex justify-content-between mb-2"},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("i",{className:"si si-wallet mr-2 text-success",style:{fontSize:"1.2rem"}}),c.a.createElement("span",null,localStorage.getItem("deliveryWalletText")||"\u0627\u0644\u0645\u062d\u0641\u0638\u0629")),c.a.createElement("div",{className:"text-success",style:{fontSize:"1.2rem",fontWeight:600}},"-",this.formatCurrency(s))),d>0&&c.a.createElement("div",{className:"d-flex justify-content-between mb-2"},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("i",{className:"si si-truck mr-2 text-info",style:{fontSize:"1.2rem"}}),c.a.createElement("span",null,localStorage.getItem("deliveryRestaurantDeliveryText")||"  \u0631\u0633\u0648\u0645 \u0627\u0644\u062a\u0648\u0635\u064a\u0644 \u0627\u0644\u0645\u062c\u0627\u0646\u064a \u0645\u0646 \u0627\u0644\u0645\u0637\u0639\u0645  ")),c.a.createElement("div",{className:"text-info",style:{fontSize:"1.2rem",fontWeight:600}},"+",this.formatCurrency(d))),void 0!==m&&c.a.createElement("div",{className:"d-flex justify-content-between mb-2 mt-3 pt-2",style:{borderTop:"1px solid #3a444e"}},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("i",{className:"si si-wallet mr-2 text-success",style:{fontSize:"1.2rem"}}),c.a.createElement("span",{style:{fontWeight:700}},localStorage.getItem("deliveryCommissionText")||"\u0627\u0644\u0639\u0645\u0648\u0644\u0629",m<0?" (".concat(localStorage.getItem("deliveryCommissionOwedSuffix")||"\u0645\u062f\u064a\u0646 \u0644\u0644\u0634\u0631\u0643\u0629",")"):"")),c.a.createElement("div",{className:m<0?"text-danger":"text-success",style:{fontSize:"1.2rem",fontWeight:600}},this.formatCurrency(m))),void 0!==m&&c.a.createElement("div",{className:"ml-4 mt-2"},p.map(function(t,a){return c.a.createElement("div",{key:a,className:"d-flex justify-content-between",style:{fontSize:"0.9rem",color:"#adb5bd"}},c.a.createElement("span",null,t.label),c.a.createElement("span",null,t.sign," ",e.formatCurrency(Math.abs(t.value))))}),c.a.createElement("div",{className:"d-flex justify-content-between mt-2",style:{fontSize:"0.9rem",fontWeight:600,color:"#fff"}},c.a.createElement("span",null,localStorage.getItem("deliveryTotalText")||"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"),c.a.createElement("span",null,"= ",this.formatCurrency(m)))),c.a.createElement("div",{className:"d-flex justify-content-between mt-3 pt-2",style:{borderTop:"1px solid #3a444e"}},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("i",{className:"si si-user mr-2",style:{fontSize:"1.2rem",color:"#ff0000"}}),c.a.createElement("span",{style:{fontWeight:700}},localStorage.getItem("deliveryCustomerTotalText")||" \u0627\u0644\u0642\u0628\u0636 \u0645\u0646 \u0627\u0644\u0639\u0645\u064a\u0644")),c.a.createElement("div",{style:{fontSize:"1.3rem",fontWeight:700,color:"#ff0000"}},this.formatCurrency(u))))),null!==t.cash_change_amount&&"0"!==t.cash_change_amount&&""!==t.cash_change_amount&&t.cash_change_amount>0&&c.a.createElement("div",{className:"p-15"},c.a.createElement("div",{className:"single-order-metas d-flex justify-content-between"},c.a.createElement("div",null,c.a.createElement("i",{className:"si si-calculator mr-5"}),localStorage.getItem("deliveryAppRequestedCashChangeMsg")||"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0637\u0644\u0648\u0628 \u062a\u063a\u064a\u064a\u0631\u0647",":"," ",c.a.createElement("b",null,this.formatCurrency(t.cash_change_amount))))),null!==t.schedule_slot&&"{}"!==t.schedule_slot&&c.a.createElement("div",{className:"p-15"},c.a.createElement("div",{className:"d-flex justify-content-between p-15 mb-3 delivery-scheduleSlot-block"},c.a.createElement("div",{className:"delivery-scheduleSlot-view-title"},c.a.createElement("b",null,localStorage.getItem("scheduledOrderStatusText")||"\u062d\u0627\u0644\u0629 \u0627\u0644\u0637\u0644\u0628 \u0627\u0644\u0645\u062c\u062f\u0648\u0644")),c.a.createElement("div",{className:"delivery-scheduleSlot-view-slot"},c.a.createElement("b",null,JSON.parse(t.schedule_date).day,","," ",JSON.parse(t.schedule_date).date," (",JSON.parse(t.schedule_slot).open," -"," ",JSON.parse(t.schedule_slot).close,")")))),c.a.createElement("div",{className:"p-15"},c.a.createElement("div",{className:"single-order-metas d-flex justify-content-between"},c.a.createElement("div",null,c.a.createElement("i",{className:"si si-clock mr-5"})," ",localStorage.getItem("deliveryOrderPlacedText")||"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628",":"," ",c.a.createElement(_.a,{fromNow:!0,interval:5e3},t.created_at))),c.a.createElement("ul",{className:"list list-timeline list-timeline-modern delivery-address-timeline pull-t pb-20"},c.a.createElement("li",null,c.a.createElement("i",{className:"list-timeline-icon si si-basket-loaded bg-del-timeline-icon"}),c.a.createElement(D.a,{bottom:!0,duration:500},c.a.createElement("div",{className:"list-timeline-content"},c.a.createElement("p",{className:"m-0 font-w700"},t.restaurant.name),c.a.createElement("p",{className:"m-0 single-order-restaurant-description"},t.restaurant.description),c.a.createElement("p",{className:"m-0"},t.restaurant.address),c.a.createElement("p",{className:"mb-2"},t.restaurant.pincode),c.a.createElement("div",{onClick:function(){return e.__getDirectionToRestaurant(t.restaurant.latitude,t.restaurant.longitude)}},c.a.createElement("button",{className:"btn btn-get-direction"},c.a.createElement("i",{className:"si si-action-redo mr-5"}),localStorage.getItem("deliveryGetDirectionButton")||"\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0627\u062a\u062c\u0627\u0647\u0627\u062a"))))),this.state.accepted_order&&t.user&&c.a.createElement("li",{className:"mt-20"},c.a.createElement("i",{className:"list-timeline-icon si si-pointer bg-del-timeline-icon"}),c.a.createElement(D.a,{bottom:!0,duration:1e3},c.a.createElement("div",{className:"list-timeline-content"},c.a.createElement("p",{className:"font-w700"},t.user.name||localStorage.getItem("unknownText")||"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641"),c.a.createElement("p",{className:"mb-0"},t.user.phone||localStorage.getItem("notAvailableText")||"\u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631"),c.a.createElement("p",{className:"mb-2"},t.address||localStorage.getItem("noAddressText")||"\u0644\u0627 \u064a\u0648\u062c\u062f \u0639\u0646\u0648\u0627\u0646"),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-get-direction mr-2",onClick:function(){return e.__getDirectionToUser(t.location)}},c.a.createElement("i",{className:"si si-action-redo mr-5"}),localStorage.getItem("deliveryGetDirectionButton")||"\u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0627\u062a\u062c\u0627\u0647\u0627\u062a"),c.a.createElement("a",{className:"btn btn-get-direction",href:t.user.phone?"tel:".concat(t.user.phone):"#"},c.a.createElement("i",{className:"si si-call-out mr-5"}),localStorage.getItem("callNowButton")||"\u0627\u062a\u0635\u0644 \u0627\u0644\u0622\u0646"))))))),c.a.createElement("div",{className:"pt-15 px-15"},c.a.createElement("div",{className:"single-order-items-title"},c.a.createElement("i",{className:"si si-list mr-2"}),localStorage.getItem("deliveryOrderItems")||"\u0639\u0646\u0627\u0635\u0631 \u0627\u0644\u0637\u0644\u0628"),c.a.createElement("div",{className:"p-15 single-order-items-list"},Array.isArray(t.orderitems)&&t.orderitems.length>0?t.orderitems.map(function(e){return c.a.createElement(b,{item:e,key:e.id})}):c.a.createElement("p",null,localStorage.getItem("noItemsAvailableText")||"\u0644\u0627 \u062a\u0648\u062c\u062f \u0639\u0646\u0627\u0635\u0631 \u0645\u062a\u0627\u062d\u0629"),"true"===localStorage.getItem("showPriceAndOrderCommentsDelivery")&&c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,t.order_comment),c.a.createElement("div",{className:"clearfix"})))),this.state.picked_up&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"pt-15 px-15"},"COD"===t.payment_mode||"PARTIAL"===t.payment_mode&&t.remaining_amount>0?c.a.createElement("button",{className:"btn btn-cod"},localStorage.getItem("deliveryCashOnDelivery")||"\u0627\u0644\u062f\u0641\u0639 \u0639\u0646\u062f \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645",":"," ",this.formatCurrency(t.remaining_amount)):c.a.createElement("button",{className:"btn btn-payed-online"},c.a.createElement("i",{className:"si si-check mr-5"})," ",0===t.total?localStorage.getItem("deliveryFreeDueToCoupon")||"\u0645\u062c\u0627\u0646\u064a \u0628\u0633\u0628\u0628 \u0627\u0644\u0643\u0648\u0628\u0648\u0646":localStorage.getItem("deliveryOnlinePayment")||"\u0627\u0644\u062f\u0641\u0639 \u0623\u0648\u0646\u0644\u0627\u064a\u0646")),"true"===localStorage.getItem("enableDeliveryPin")&&c.a.createElement("div",{className:"pt-10 px-15 delivery-pin-block"},c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("input",{type:"tel",className:"form-control",placeholder:localStorage.getItem("deliveryDeliveryPinPlaceholder")||"\u0623\u062f\u062e\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u0648\u0635\u064a\u0644",onChange:this.__handleDeliveryPinInput}),this.state.delivery_pin_error&&c.a.createElement("div",{className:"delivery-pin-error",style:{zIndex:"9",marginBottom:"4rem"}},c.a.createElement("div",{className:"error-shake"},localStorage.getItem("deliveryInvalidDeliveryPin")||"\u0631\u0645\u0632 \u0627\u0644\u062a\u0648\u0635\u064a\u0644 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d"))))))),c.a.createElement("div",{className:"delivery-action"},!this.state.accepted_order&&!this.state.picked_up&&!this.state.delivered&&c.a.createElement(I,{text:localStorage.getItem("deliveryAcceptOrderButton")||"\u0642\u0628\u0648\u0644 \u0627\u0644\u0637\u0644\u0628",color:"#18c775",onSuccess:this.__acceptToDeliver,reset:this.state.reset}),this.state.accepted_order&&!this.state.picked_up&&!this.state.delivered&&c.a.createElement(I,{text:localStorage.getItem("deliveryPickedUpButton")||"\u062a\u0645 \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645",color:"#FF6200",onSuccess:this.__pickedUp,reset:this.state.reset}),this.state.accepted_order&&this.state.picked_up&&!this.state.delivered&&c.a.createElement(I,{text:localStorage.getItem("deliveryDeliveredButton")||"\u062a\u0645 \u0627\u0644\u062a\u0648\u0635\u064a\u0644",color:"#FF0000",onSuccess:this.__delivered,reset:this.state.reset}),this.state.accepted_order&&this.state.picked_up&&this.state.delivered&&c.a.createElement("button",{type:"button",className:"btn btn-accept",style:{backgroundColor:localStorage.getItem("storeColor")||"#18C775"}},c.a.createElement("i",{className:"si si-check mr-5"}),localStorage.getItem("deliveryOrderCompletedButton")||"\u0627\u0643\u062a\u0645\u0644 \u0627\u0644\u0637\u0644\u0628")))))),c.a.createElement(N.a,null))}}]),t}(s.Component);C.contextTypes={router:function(){return null}};t.default=Object(S.b)(function(e){return{delivery_user:e.delivery_user.delivery_user,single_delivery_order:e.single_delivery_order.single_delivery_order,accepted_order:e.accepted_order.accepted_order}},{getSingleDeliveryOrder:function(e,t){return function(a){return g.a.post(u.T,{token:e,unique_order_id:t}).then(function(e){var t=e.data;return a({type:m.a,payload:t})}).catch(function(e){console.log(e)})}},acceptToDeliverOrder:function(e,t,a){return function(r){g.a.post(u.a,{token:e,delivery_guy_id:t,order_id:a}).then(function(e){var t=e.data;r({type:d.a,payload:t}),r({type:m.a,payload:t})}).catch(function(e){console.log(e)})}},pickupOrder:function(e,t){return function(a){g.a.post(u.ib,{token:e,order_id:t}).then(function(e){var t=e.data;a({type:d.c,payload:t}),a({type:m.a,payload:t})}).catch(function(e){console.log(e)})}},deliverOrder:function(e,t,a){return function(r){g.a.post(u.o,{token:e,order_id:t,delivery_pin:a}).then(function(e){var t=e.data;r({type:d.b,payload:t}),r({type:m.a,payload:t})}).catch(function(e){console.log(e)})}}})(C)}}]);