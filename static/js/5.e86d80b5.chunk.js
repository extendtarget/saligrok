(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{190:function(e,t,a){"use strict";a.r(t);var r=a(6),n=a(7),l=a(9),o=a(8),s=a(10),i=a(0),c=a.n(i),d=a(49),m=a(43),u=a(317),g=a(17),p=a(211),y=a(5),h=a(4),v=a.n(h),f=a(239),E=a(18),b=a.n(E),_=a(226),w=a.n(_),N=a(162),x=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).__refreshOrders=function(){a.refs.btnSpinner&&a.refs.btnSpinner.classList.add("fa-spin"),setTimeout(function(){a.refs.btnSpinner&&a.refs.btnSpinner.classList.remove("fa-spin")},2e3),a.props.refreshOrders()},a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){document.getElementsByTagName("body")[0].classList.remove("bg-grey"),document.getElementsByTagName("body")[0].classList.add("delivery-dark-bg")}},{key:"render",value:function(){var e=this.props,t=e.new_orders,a=e.delivery_user;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"mb-100"},c.a.createElement("div",{className:"d-flex justify-content-between nav-dark"},a.data.status?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"delivery-tab-title px-20 py-15"},localStorage.getItem("deliveryNewOrdersTitle")||"\u0627\u0644\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u062c\u062f\u064a\u062f\u0629"),c.a.createElement("div",{className:"delivery-order-refresh"},c.a.createElement("button",{className:"btn btn-refreshOrders mr-15",onClick:this.__refreshOrders,style:{position:"relative"}},localStorage.getItem("deliveryOrdersRefreshBtn")||"\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0637\u0644\u0628\u0627\u062a"," ",c.a.createElement("i",{ref:"btnSpinner",className:"fa fa-refresh"}),c.a.createElement(b.a,{duration:1200})))):null),a.data.status?c.a.createElement(c.a.Fragment,null,0===t.length?c.a.createElement("p",{className:"text-center text-muted py-15 mb-10 bg-white"},localStorage.getItem("deliveryNoNewOrders")||"\u0644\u0627 \u062a\u0648\u062c\u062f \u0637\u0644\u0628\u0627\u062a \u062c\u062f\u064a\u062f\u0629"):c.a.createElement("div",{className:"p-15"},c.a.createElement("div",{className:"delivery-list-wrapper pb-20"},t.slice(0,10).map(function(e){return c.a.createElement(N.a,{to:"/delivery/orders/".concat(e.unique_order_id),key:e.id,style:{position:"relative"}},c.a.createElement("div",{className:"delivery-list-item px-15 pb-5 pt-15"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",null,c.a.createElement("p",{className:"m-0"},"true"===localStorage.getItem("showFromNowDate")?c.a.createElement(w.a,{fromNow:!0},e.updated_at):c.a.createElement(w.a,{format:"DD/MM/YYYY hh:mma"},e.updated_at))),c.a.createElement("div",null,c.a.createElement("p",{className:"m-0 font-w700"},"#",e.unique_order_id.substr(e.unique_order_id.length-8)))),c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",{className:"font-w700 list-delivery-store-name"},e.restaurant.name)),c.a.createElement("p",null,"true"===localStorage.getItem("showDeliveryFullAddressOnList")?c.a.createElement("span",null,e.address):c.a.createElement("span",{className:"d-flex align-items-center"},c.a.createElement("i",{className:"si si-pointer mr-2"}),c.a.createElement("span",{style:{maxWidth:"100%",display:"block"},className:"truncate-text"},e.address))),void 0!==e.delivery_charge&&c.a.createElement("div",{className:"d-flex justify-content-between mt-2"},c.a.createElement("div",null,e.delivery_charge<0?localStorage.getItem("deliveryChargeRefundText")||"\u0627\u0633\u062a\u0631\u062f\u0627\u062f \u0631\u0633\u0648\u0645 \u0627\u0644\u062a\u0648\u0635\u064a\u0644":localStorage.getItem("deliveryChargeText")||"\u0631\u0633\u0648\u0645 \u0627\u0644\u062a\u0648\u0635\u064a\u0644"),c.a.createElement("div",{className:e.delivery_charge<0?"text-success":""},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),e.delivery_charge,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))),e.coupon_amount&&c.a.createElement("div",{className:"d-flex justify-content-between mt-2"},c.a.createElement("div",null,localStorage.getItem("deliveryCouponAppliedText")||"\u0627\u0644\u062e\u0635\u0645"),c.a.createElement("div",{className:"text-success"},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),e.coupon_amount,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")))),c.a.createElement(b.a,{duration:"500",hasTouch:"true"}))})))):c.a.createElement("div",{className:"d-flex justify-content-center pt-100"},c.a.createElement("div",{className:"delivery-guy-status delivery-guy-offline"},c.a.createElement("span",null,localStorage.getItem("deliveryAppYouAreOfflineBtn")||"\u0623\u0646\u062a \u063a\u064a\u0631 \u0645\u062a\u0635\u0644")))))}}]),t}(i.Component),S=a(253),O=a.n(S),k=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).__refreshOrders=function(){a.refs.btnSpinner&&a.refs.btnSpinner.classList.add("fa-spin"),setTimeout(function(){a.refs.btnSpinner&&a.refs.btnSpinner.classList.remove("fa-spin")},2e3),a.props.refreshOrders()},a.getDeliveryGuyTotalEarning=function(e){var t=0;return e.commission&&(t+=parseFloat(e.commission)),e.tip_amount&&(t+=parseFloat(e.tip_amount)),t},a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){document.getElementsByTagName("body")[0].classList.remove("bg-grey"),document.getElementsByTagName("body")[0].classList.add("delivery-dark-bg")}},{key:"render",value:function(){var e=this,t=this.props.accepted_orders;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"mb-100"},c.a.createElement("div",{className:"d-flex justify-content-between nav-dark"},c.a.createElement("div",{className:"delivery-tab-title px-20 py-15"},localStorage.getItem("deliveryAcceptedOrdersTitle")),c.a.createElement("div",{className:"delivery-order-refresh"},c.a.createElement("button",{className:"btn btn-refreshOrders mr-15",onClick:this.__refreshOrders,style:{position:"relative"}},localStorage.getItem("deliveryOrdersRefreshBtn")," ",c.a.createElement("i",{ref:"btnSpinner",className:"fa fa-refresh"}),c.a.createElement(b.a,{duration:1200})))),0===t.length?c.a.createElement("p",{className:"text-center text-muted py-15 mb-10 bg-white"},localStorage.getItem("deliveryNoOrdersAccepted")):c.a.createElement("div",{className:"p-15"},c.a.createElement("div",{className:"delivery-list-wrapper pb-20"},t.map(function(t){return c.a.createElement(N.a,{to:"/delivery/orders/".concat(t.unique_order_id),key:t.id,style:{position:"relative"}},c.a.createElement("div",{className:"delivery-list-item px-15 pb-5 pt-15"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",null,c.a.createElement("p",{className:"m-0"},"true"===localStorage.getItem("showFromNowDate")?c.a.createElement(w.a,{fromNow:!0},t.updated_at):c.a.createElement(w.a,{format:"DD/MM/YYYY hh:mma"},t.updated_at))),c.a.createElement("div",null,"true"===localStorage.getItem("enableDeliveryGuyEarning")&&c.a.createElement("p",{className:"m-0 list-delivery-commission"},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),c.a.createElement(O.a,{to:e.getDeliveryGuyTotalEarning(t),speed:1e3,digits:2}),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")))),c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",{className:"font-w700 list-delivery-store-name"},t.restaurant.name),c.a.createElement("div",null,c.a.createElement("p",{className:"m-0 font-w700"},"#",t.unique_order_id.substr(t.unique_order_id.length-8)))),c.a.createElement("p",null,"true"===localStorage.getItem("showDeliveryFullAddressOnList")?c.a.createElement("span",null,t.address):c.a.createElement("span",{className:"d-flex align-items-center"},c.a.createElement("i",{className:"si si-pointer mr-2"}),c.a.createElement("span",{style:{maxWidth:"100%",display:"block"},className:"truncate-text"},t.address)))),c.a.createElement(b.a,{duration:"500",hasTouch:"true"}))})))))}}]),t}(i.Component),I=a(237),D=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this.props.order;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"delivery-account-orders-block p-15 mb-20"},c.a.createElement("div",{className:"d-flex justify-content-between mb-2"},c.a.createElement("div",{className:"font-w700"},c.a.createElement("h4",{className:"mb-0 ".concat("true"===localStorage.getItem("deliveryAppLightMode")?"text-dark":"text-white")},"#",e.order.unique_order_id.substr(e.order.unique_order_id.length-6))),c.a.createElement("div",null,"true"===localStorage.getItem("showFromNowDate")?c.a.createElement(w.a,{fromNow:!0},e.updated_at):c.a.createElement(w.a,{format:"DD/MM/YYYY hh:mma"},e.updated_at))),c.a.createElement("div",{className:"d-flex justify-content-between mb-2"},c.a.createElement("div",{className:"mr-4"},e.is_complete?c.a.createElement("span",{className:"btn btn-sm btn-delivery-success min-width-125"},localStorage.getItem("deliveryCompletedText")):c.a.createElement("span",{className:"btn btn-sm btn-delivery-ongoing min-width-125"},localStorage.getItem("deliveryOnGoingText"))),c.a.createElement("div",null,"COD"===e.order.payment_mode?c.a.createElement("span",{className:"btn btn-sm btn-delivery-success min-width-175"},localStorage.getItem("deliveryCashOnDelivery"),":"," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),e.order.payable,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")):c.a.createElement("span",{className:"btn btn-sm btn-delivery-success min-width-175"},c.a.createElement("i",{className:"si si-check mr-2"})," ",localStorage.getItem("deliveryOnlinePayment")))),c.a.createElement("div",null,c.a.createElement("i",{className:"si si-pointer mr-1"})," ",e.order.address)))}}]),t}(i.Component),T=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).getRatingStars=function(e){var t="rating-green";return e<=3&&(t="rating-orange"),e<=2&&(t="rating-red"),c.a.createElement("span",{className:"store-rating "+t},e," ",c.a.createElement("i",{className:"fa fa-star text-white"}))},a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"delivery-account-orders-block p-15 mb-20"},c.a.createElement("p",{className:"mb-0"},c.a.createElement("span",{className:"ml-1"},this.getRatingStars(this.props.rating))),c.a.createElement("p",{className:"mb-2"},this.props.review)))}}]),t}(i.Component),A=a(12),j=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={loading:!1,show_orderhistory:!0,show_reviews:!1,show_completedOrders:!1,show_wallet:!1,delivery_status:null,no_completedOrders:!1,completedOrders:[],next_page:y.n,loading_more:!1,wallet_tab:"add",add_amount:"",add_amount_description:"",substract_amount:"",substract_amount_description:"",wallet_loading:!1},a.addMoneyToWallet=function(e){e.preventDefault();var t=a.props.delivery_user,r=a.state,n=r.add_amount,l=r.add_amount_description;n&&l?(a.setState({wallet_loading:!0}),v.a.post("/admin/add-money-to-wallet",{user_id:t.data.id,add_amount:parseFloat(n),add_amount_description:l,token:t.data.auth_token}).then(function(e){if(!e.data.success)throw new Error(e.data.message||"Failed to add money.");a.props.updateDeliveryUserInfo(t.data.id,t.data.auth_token),a.setState({wallet_loading:!1,add_amount:"",add_amount_description:""}),alert("Money added successfully!")}).catch(function(e){a.setState({wallet_loading:!1}),alert("Error: ".concat(e.message))})):alert("Please fill in all fields.")},a.substractMoneyFromWallet=function(e){e.preventDefault();var t=a.props.delivery_user,r=a.state,n=r.substract_amount,l=r.substract_amount_description;n&&l?(a.setState({wallet_loading:!0}),v.a.post("/admin/substract-money-from-wallet",{user_id:t.data.id,substract_amount:parseFloat(n),substract_amount_description:l,token:t.data.auth_token}).then(function(e){if(!e.data.success)throw new Error(e.data.message||"Failed to deduct money.");a.props.updateDeliveryUserInfo(t.data.id,t.data.auth_token),a.setState({wallet_loading:!1,substract_amount:"",substract_amount_description:""}),alert("Money deducted successfully!")}).catch(function(e){a.setState({wallet_loading:!1}),alert("Error: ".concat(e.message))})):alert("Please fill in all fields.")},a.filterOnGoingOrders=function(){a.props.updateDeliveryOrderHistory(a.props.delivery_user.data.orders.filter(function(e){return 0===e.is_complete})),a.setState({show_orderhistory:!0,show_completedOrders:!1}),a.removeScrollEvent(),a.setState({completedOrders:[],next_page:y.n})},a.filterCompletedOrders=function(){a.__getCompletedOrder(a.props.delivery_user.data.auth_token),a.setState({show_orderhistory:!1,show_reviews:!1,show_completedOrders:!0})},a.__getCompletedOrder=function(e){a.state.loading||(a.setState({loading:!0}),a.registerScrollEvent(),v.a.post(a.state.next_page,{token:e}).then(function(e){var t=e.data,r=t.data;console.log("Next Page URL: "+t.next_page_url),r.length?a.setState({completedOrders:[].concat(Object(I.a)(a.state.completedOrders),Object(I.a)(r)),next_page:t.next_page_url,loading:!1,loading_more:!1}):a.setState({completedOrders:[],loading:!1,loading_more:!1}),t.next_page_url||a.removeScrollEvent()}))},a.scrollFunc=function(){if(document.documentElement.scrollTop+50+window.innerHeight>document.documentElement.offsetHeight||document.documentElement.scrollTop+50+window.innerHeight===document.documentElement.offsetHeight){var e=a.props.delivery_user;a.setState({loading_more:!0}),a.__getCompletedOrder(e.data.auth_token)}},a.showReviews=function(){a.setState({show_orderhistory:!1,show_reviews:!0,show_completedOrders:!1}),a.removeScrollEvent(),a.setState({completedOrders:[],next_page:y.n})},a.handleToggleLightDarkMode=function(){null!==localStorage.getItem("deliveryAppLightMode")?new Promise(function(e){localStorage.removeItem("deliveryAppLightMode"),e("Removed Light State")}).then(function(){window.location.reload()}):new Promise(function(e){localStorage.setItem("deliveryAppLightMode","true"),e("Set Light State")}).then(function(){window.location.reload()})},a.toggleDeliveryOnOffStatus=function(){a.setState({loading:!0});var e=a.props.delivery_user;a.props.toggleDeliveryGuyStatus(e.data.auth_token).then(function(){a.setState({loading:!1})})},a.__changeStatusAndLogoutDelivery=function(){var e=a.props.delivery_user;e.success&&"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&window.Android.logoutDelivery(),a.props.toggleDeliveryGuyStatus(e.data.auth_token,!0).then(function(){a.props.logoutDeliveryUser()})},a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.delivery_user;this.props.updateDeliveryUserInfo(e.data.id,e.data.auth_token),document.getElementsByTagName("body")[0].classList.remove("bg-grey")}},{key:"registerScrollEvent",value:function(){window.addEventListener("scroll",this.scrollFunc)}},{key:"removeScrollEvent",value:function(){window.removeEventListener("scroll",this.scrollFunc)}},{key:"componentWillReceiveProps",value:function(e){this.props.delivery_user!==e.delivery_user&&this.setState({delivery_status:e.delivery_user.data.status})}},{key:"componentWillUnmount",value:function(){this.removeScrollEvent()}},{key:"render",value:function(){var e=this,t=this.props,a=t.delivery_user,r=t.order_history,n=localStorage.getItem("deliveryGuyIncentiveData"),l=n?JSON.parse(n):[],o=Array.isArray(l)?l.map(function(e){return parseInt(e.order_count||0)}):[0],s=Array.isArray(l)?l.map(function(e){return parseInt(e.incentive_amount||0)}):[0],i=o[o.length-1]||1,d=o.map(function(e,t){return{step:e,incentiveAmount:s[t]}}),m=i>0?((a.data.todayCompletedCount||0)/i*100).toFixed(2):0;return m>75?sessionStorage.setItem("showGif","true"):sessionStorage.setItem("showGif","false"),c.a.createElement(c.a.Fragment,null,this.state.loading&&c.a.createElement(A.a,null),c.a.createElement("div",{className:"d-flex justify-content-between nav-dark"},c.a.createElement("div",{className:"delivery-tab-title px-20 py-15"},localStorage.getItem("deliveryWelcomeMessage")," ",a.data.name),c.a.createElement("div",{className:"delivery-order-refresh"},c.a.createElement("button",{className:"btn btn-delivery-logout mr-15",onClick:function(){return e.__changeStatusAndLogoutDelivery()}},localStorage.getItem("deliveryLogoutDelivery")," ",c.a.createElement("i",{className:"si si-logout"})))),c.a.createElement("div",null,c.a.createElement("button",{onClick:this.handleToggleLightDarkMode,className:"btn btn-default btn-block btn-toggleLightDark"},localStorage.getItem("deliveryToggleLightDarkMode"))),c.a.createElement("div",{onClick:this.toggleDeliveryOnOffStatus,className:"d-flex justify-content-center my-2"},null===this.state.delivery_status?c.a.createElement("div",{className:"delivery-guy-status delivery-guy-status-neutral"},c.a.createElement("span",null,c.a.createElement("div",{className:"spin-load"}))):c.a.createElement(c.a.Fragment,null,this.state.delivery_status?c.a.createElement("div",{className:"delivery-guy-status delivery-guy-online"},c.a.createElement("span",null,localStorage.getItem("deliveryAppYouAreOnlineBtn"))):c.a.createElement("div",{className:"delivery-guy-status delivery-guy-offline"},c.a.createElement("span",null,localStorage.getItem("deliveryAppYouAreOfflineBtn"))))),c.a.createElement("div",{className:"mb-100 pt-20"},c.a.createElement("div",{className:"row gutters-tiny px-15 mt-3"},"true"===localStorage.getItem("enableDeliveryGuyIncentive")&&c.a.createElement("div",{className:"col"},c.a.createElement("div",{className:"block shadow-light delivery-block-transparent",style:{position:"relative"}},"true"===sessionStorage.getItem("showGif")&&c.a.createElement("div",{className:"gif-container"},c.a.createElement("img",{className:"text-right float-right",style:{width:"100%",height:"12.5rem",position:"absolute",zIndex:"1",right:"0"},src:"assets/img/target-celebration.gif",alt:"Target Celebration"})),c.a.createElement("div",{className:"block-content block-content-full clearfix text-white"},c.a.createElement("div",{className:"mb-2 font-size-h5 font-w700 text-uppercase text-center"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},localStorage.getItem("deliveryCompletedText")," : ",a.data.todayCompletedCount),c.a.createElement("div",{className:"col"},"Achieved : ",m,"%"))),c.a.createElement("div",{className:"target-progress-bar-container mt-2 p-3",style:{position:"relative"}},c.a.createElement("div",{className:"row target-incentive-amount-block",style:{fontSize:"12px"}},"Incentive:",d.map(function(e,t){return c.a.createElement("div",{className:"target-incentive-amount",key:e.step,style:{fontSize:"10px",position:"absolute",left:"".concat(t===d.length-1?"calc(100% - 2.5px)":"".concat(e.step/i*100,"%")),right:"auto",transform:"translateX(-50%)"}},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),e.incentiveAmount,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))})),c.a.createElement("div",{className:"row progress push progress-transparent mt-1 bg-light",style:{height:"10px",borderRadius:"2px"}},c.a.createElement("div",{className:"progress-bar progress-bar-animated",style:{backgroundColor:m<30?"orangered":m>=30&&m<60?"darkorange":"limegreen",width:"".concat(m,"%"),animation:"progressBarTransition 1.5s ease"}})),c.a.createElement("div",{className:"row target-order-count-block mt-1",style:{fontSize:"12px"}},"Orders:",o.map(function(e,t){return c.a.createElement("div",{className:"target-order-count",key:e,style:{fontSize:"10px",position:"absolute",left:"".concat(t===o.length-1?"calc(100% - 2px)":"".concat(e/i*100,"%")),right:"auto",transform:"translateX(-50%)"}},e)}))),c.a.createElement("div",{className:"mt-3 font-size-h5 font-w700 text-uppercase text-center"},c.a.createElement("div",{className:""},"Today Target Vs. Achievement"))),c.a.createElement(b.a,{duration:"500",hasTouch:"true"})))),c.a.createElement("div",{className:"row gutters-tiny px-15 mt-20"},c.a.createElement("div",{className:"col-6 col-xl-3",onClick:function(){return e.filterOnGoingOrders()}},c.a.createElement("div",{className:"block shadow-medium delivery-block-ongoing",style:{position:"relative"}},c.a.createElement("div",{className:"block-content block-content-full clearfix text-white"},c.a.createElement("div",{className:"float-right mt-10"},c.a.createElement("i",{className:"si si-control-forward fa-3x"})),c.a.createElement(O.a,{to:a.data.onGoingCount,speed:1e3,className:"font-size-h3 font-w600",easing:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}),c.a.createElement("div",{className:"font-size-sm font-w600 text-uppercase"},localStorage.getItem("deliveryOnGoingText"))),c.a.createElement(b.a,{duration:"500",hasTouch:"true"}))),c.a.createElement("div",{className:"col-6 col-xl-3",onClick:function(){return e.filterCompletedOrders()}},c.a.createElement("div",{className:"block shadow-medium delivery-block-completed",style:{position:"relative"}},c.a.createElement("div",{className:"block-content block-content-full clearfix text-white"},c.a.createElement("div",{className:"float-right mt-10"},c.a.createElement("i",{className:"si si-check fa-3x"})),c.a.createElement(O.a,{to:a.data.completedCount,speed:1e3,className:"font-size-h3 font-w600",easing:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}),c.a.createElement("div",{className:"font-size-sm font-w600 text-uppercase"},localStorage.getItem("deliveryCompletedText"))),c.a.createElement(b.a,{duration:"500",hasTouch:"true"}))),c.a.createElement("div",{className:"col",onClick:function(){return e.showWallet()}},c.a.createElement("div",{className:"block shadow-light delivery-block-transparent",style:{position:"relative"}},c.a.createElement("div",{className:"block-content block-content-full clearfix text-white"},c.a.createElement("div",{className:"font-size-h3 font-w600"},c.a.createElement("i",{className:"icon-piggy-bank mr-1"}),"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),c.a.createElement(O.a,{to:this.props.delivery_user.data.wallet_balance||0,speed:1e3,className:"font-size-h3 font-w600",easing:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},digits:2}),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),c.a.createElement("div",{className:"font-size-sm font-w600 text-uppercase"},localStorage.getItem("walletBalanceText")||"Wallet Balance"))),c.a.createElement(b.a,{duration:"500",hasTouch:"true"}))),c.a.createElement("div",{className:"col",onClick:function(){return e.showReviews()}},c.a.createElement("div",{className:"block shadow-light delivery-block-transparent",style:{position:"relative"}},c.a.createElement("div",{className:"block-content block-content-full clearfix text-white"},c.a.createElement("div",{className:"font-size-h3 font-w600"},c.a.createElement("i",{className:"fa fa-star mr-1"}),a.data.averageRating,c.a.createElement("div",{className:"font-size-sm font-w600 text-uppercase"},localStorage.getItem("reviewsPageTitle")))),c.a.createElement(b.a,{duration:"500",hasTouch:"true"})))),this.state.show_completedOrders&&c.a.createElement("div",{className:"orders-history px-15 mt-20"},this.state.completedOrders&&this.state.completedOrders.length>0?this.state.completedOrders.map(function(e){return c.a.createElement(D,{order:e,key:e.id})}):null),this.state.show_orderhistory&&c.a.createElement("div",{className:"orders-history px-15 mt-20"},r&&r.length>0?r.map(function(e){return c.a.createElement(D,{order:e,key:e.id})}):null),this.state.show_reviews&&c.a.createElement("div",{className:"delivery-reviews px-15 mt-20"},a.data.ratings&&a.data.ratings.map(function(e){return c.a.createElement(T,{key:e.id,rating:e.rating_delivery,review:e.review_delivery})}))))}}]),t}(i.Component);j.contextTypes={router:function(){return null}};var F=Object(g.b)(function(e){return{delivery_user:e.delivery_user.delivery_user,order_history:e.delivery_user.order_history}},{updateDeliveryUserInfo:f.e,updateDeliveryOrderHistory:f.d,toggleDeliveryGuyStatus:f.c})(j),C=a(188),L=(a(309),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).__refreshOrders=function(){a.refs.btnSpinner&&a.refs.btnSpinner.classList.add("fa-spin"),setTimeout(function(){a.refs.btnSpinner&&a.refs.btnSpinner.classList.remove("fa-spin")},2e3),a.props.refreshOrders()},a.getDeliveryGuyTotalEarning=function(e){var t=0;return e.commission&&(t+=parseFloat(e.commission)),e.tip_amount&&(t+=parseFloat(e.tip_amount)),t},a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){document.getElementsByTagName("body")[0].classList.remove("bg-grey"),document.getElementsByTagName("body")[0].classList.add("delivery-dark-bg")}},{key:"render",value:function(){var e=this,t=this.props.pickedup_orders;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"mb-100"},c.a.createElement("div",{className:"d-flex justify-content-between nav-dark"},c.a.createElement("div",{className:"delivery-tab-title px-20 py-15"},localStorage.getItem("deliveryPickedupOrdersTitle")),c.a.createElement("div",{className:"delivery-order-refresh"},c.a.createElement("button",{className:"btn btn-refreshOrders mr-15",onClick:this.__refreshOrders,style:{position:"relative"}},localStorage.getItem("deliveryOrdersRefreshBtn")," ",c.a.createElement("i",{ref:"btnSpinner",className:"fa fa-refresh"}),c.a.createElement(b.a,{duration:1200})))),0===t.length?c.a.createElement("p",{className:"text-center text-muted py-15 mb-10 bg-white"},localStorage.getItem("deliveryNoPickedupOrdersMsg")):c.a.createElement("div",{className:"p-15"},c.a.createElement("div",{className:"delivery-list-wrapper pb-20"},t.map(function(t){return c.a.createElement(N.a,{to:"/delivery/orders/".concat(t.unique_order_id),key:t.id,style:{position:"relative"}},c.a.createElement("div",{className:"delivery-list-item px-15 pb-5 pt-15"},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",null,c.a.createElement("p",{className:"m-0"},"true"===localStorage.getItem("showFromNowDate")?c.a.createElement(w.a,{fromNow:!0},t.updated_at):c.a.createElement(w.a,{format:"DD/MM/YYYY hh:mma"},t.updated_at))),c.a.createElement("div",null,"true"===localStorage.getItem("enableDeliveryGuyEarning")&&c.a.createElement("p",{className:"m-0 list-delivery-commission"},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),c.a.createElement(O.a,{to:e.getDeliveryGuyTotalEarning(t),speed:1e3,digits:2}),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")))),c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",{className:"font-w700 list-delivery-store-name"},t.restaurant.name),c.a.createElement("div",null,c.a.createElement("p",{className:"m-0 font-w700"},"#",t.unique_order_id.substr(t.unique_order_id.length-8)))),c.a.createElement("p",null,"true"===localStorage.getItem("showDeliveryFullAddressOnList")?c.a.createElement("span",null,t.address):c.a.createElement("span",{className:"d-flex align-items-center"},c.a.createElement("i",{className:"si si-pointer mr-2"}),c.a.createElement("span",{style:{maxWidth:"100%",display:"block"},className:"truncate-text"},t.address)))),c.a.createElement(b.a,{duration:"500",hasTouch:"true"}))})))))}}]),t}(i.Component)),M=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).state={play:!1,tabIndex:0},a.audio=new Audio("/assets/audio/delivery-notification.mp3"),a.__refreshOrders=function(){var e=a.props.delivery_user;e.success&&e.data.status&&(console.log("refresh orders called"),a.props.getDeliveryOrders(a.props.delivery_user.data.auth_token))},a.getLocationName=function(e){try{return console.log("Came to try"),c.a.createElement("span",{style:{maxWidth:"100px",display:"block"},className:"truncate-text"},JSON.parse(e).address)}catch(t){return null}},a.onTabSelect=function(e){localStorage.setItem("deliveryTabIndex",e),a.setState({tabIndex:e})},a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.delivery_user.success&&this.props.getDeliveryOrders(this.props.delivery_user.data.auth_token),this.refreshSetInterval=setInterval(function(){e.__refreshOrders()},15e3)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.delivery_orders;t.new_orders&&e.delivery_orders.new_orders.length>0&&(!t.new_orders||0===t.new_orders.length)&&"FoodomaaAndroidWebViewUA"!==navigator.userAgent&&(this.audio.play(),"vibrate"in navigator&&navigator.vibrate(["100","150","100","100","150","100"]))}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshSetInterval)}},{key:"render",value:function(){var e=this;if(window.innerWidth>768)return c.a.createElement(u.a,{to:"/"});var t=this.props.delivery_orders,a=t.accepted_orders,r=t.new_orders,n=t.pickedup_orders;return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,{seotitle:"Delivery Orders",seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),c.a.createElement(C.d,{selectedIndex:null===localStorage.getItem("deliveryTabIndex")?this.state.tabIndex:parseInt(localStorage.getItem("deliveryTabIndex")),onSelect:function(t){return e.onTabSelect(t)}},c.a.createElement("div",{className:"content font-size-xs clearfix footer-fixed",style:{display:"block",width:"100%",padding:"0",height:"4.6rem"}},c.a.createElement(C.b,null,c.a.createElement(C.a,null,c.a.createElement("div",{className:"text-center"},c.a.createElement("span",{className:"cart-quantity-badge",style:{backgroundColor:"#f44336",top:"2px",left:"45px"}},r&&r.length>0?1:0),c.a.createElement("i",{className:"si si-bell fa-2x"})," ",c.a.createElement("br",null),localStorage.getItem("deliveryFooterNewTitle"),c.a.createElement(b.a,{duration:"500",hasTouch:"true"}))),c.a.createElement(C.a,null,c.a.createElement("div",{className:"text-center"},c.a.createElement("span",{className:"cart-quantity-badge",style:{backgroundColor:"#f44336",top:"2px",left:"45px"}},a&&a.length),c.a.createElement("i",{className:"si si-grid fa-2x"})," ",c.a.createElement("br",null),localStorage.getItem("deliveryFooterAcceptedTitle"),c.a.createElement(b.a,{duration:"500",hasTouch:"true"}))),c.a.createElement(C.a,null,c.a.createElement("div",{className:"text-center"},c.a.createElement("span",{className:"cart-quantity-badge",style:{backgroundColor:"#f44336",top:"2px",left:"45px"}},n&&n.length),c.a.createElement("i",{className:"si si-bag fa-2x"})," ",c.a.createElement("br",null),localStorage.getItem("deliveryFooterPickedup"),c.a.createElement(b.a,{duration:"500",hasTouch:"true"}))),c.a.createElement(C.a,null,c.a.createElement("div",{className:"text-center"},c.a.createElement("i",{className:"si si-user fa-2x"})," ",c.a.createElement("br",null),localStorage.getItem("deliveryFooterAccount"),c.a.createElement(b.a,{duration:"500",hasTouch:"true"}))))),c.a.createElement(C.c,null,this.props.delivery_orders.new_orders?c.a.createElement(x,{refreshOrders:this.__refreshOrders,getLocationName:this.getLocationName,new_orders:this.props.delivery_orders.new_orders,delivery_user:this.props.delivery_user}):c.a.createElement("div",{className:"pt-50"},c.a.createElement(d.a,{height:window.innerHeight,width:window.innerWidth,speed:1.2,primaryColor:"true"===localStorage.getItem("deliveryAppLightMode")?"#E0E0E0":"#161b31",secondaryColor:"true"===localStorage.getItem("deliveryAppLightMode")?"#fefefe":"#222b45"},c.a.createElement("rect",{x:"15",y:"30",rx:"0",ry:"0",width:"150",height:"30"}),c.a.createElement("rect",{x:"283",y:"30",rx:"0",ry:"0",width:"75",height:"30"}),c.a.createElement("rect",{x:"15",y:"70",rx:"0",ry:"0",width:"250",height:"23"}),c.a.createElement("rect",{x:"15",y:"173",rx:"0",ry:"0",width:"150",height:"30"}),c.a.createElement("rect",{x:"283",y:"173",rx:"0",ry:"0",width:"75",height:"30"}),c.a.createElement("rect",{x:"15",y:"213",rx:"0",ry:"0",width:"250",height:"23"}),c.a.createElement("rect",{x:"15",y:"316",rx:"0",ry:"0",width:"150",height:"30"}),c.a.createElement("rect",{x:"283",y:"316",rx:"0",ry:"0",width:"75",height:"30"}),c.a.createElement("rect",{x:"15",y:"356",rx:"0",ry:"0",width:"250",height:"23"})))),c.a.createElement(C.c,null,this.props.delivery_orders.accepted_orders?c.a.createElement(k,{refreshOrders:this.__refreshOrders,getLocationName:this.getLocationName,accepted_orders:this.props.delivery_orders.accepted_orders}):c.a.createElement("div",{className:"pt-50"},c.a.createElement(d.a,{height:window.innerHeight,width:window.innerWidth,speed:1.2,primaryColor:"#161b31",secondaryColor:"#222b45"},c.a.createElement("rect",{x:"15",y:"30",rx:"0",ry:"0",width:"150",height:"30"}),c.a.createElement("rect",{x:"283",y:"30",rx:"0",ry:"0",width:"75",height:"30"}),c.a.createElement("rect",{x:"15",y:"70",rx:"0",ry:"0",width:"250",height:"23"}),c.a.createElement("rect",{x:"15",y:"173",rx:"0",ry:"0",width:"150",height:"30"}),c.a.createElement("rect",{x:"283",y:"173",rx:"0",ry:"0",width:"75",height:"30"}),c.a.createElement("rect",{x:"15",y:"213",rx:"0",ry:"0",width:"250",height:"23"}),c.a.createElement("rect",{x:"15",y:"316",rx:"0",ry:"0",width:"150",height:"30"}),c.a.createElement("rect",{x:"283",y:"316",rx:"0",ry:"0",width:"75",height:"30"}),c.a.createElement("rect",{x:"15",y:"356",rx:"0",ry:"0",width:"250",height:"23"})))),c.a.createElement(C.c,null,this.props.delivery_orders.pickedup_orders?c.a.createElement(L,{refreshOrders:this.__refreshOrders,getLocationName:this.getLocationName,pickedup_orders:this.props.delivery_orders.pickedup_orders}):c.a.createElement("div",{className:"pt-50"},c.a.createElement(d.a,{height:window.innerHeight,width:window.innerWidth,speed:1.2,primaryColor:"#161b31",secondaryColor:"#222b45"},c.a.createElement("rect",{x:"15",y:"30",rx:"0",ry:"0",width:"150",height:"30"}),c.a.createElement("rect",{x:"283",y:"30",rx:"0",ry:"0",width:"75",height:"30"}),c.a.createElement("rect",{x:"15",y:"70",rx:"0",ry:"0",width:"250",height:"23"}),c.a.createElement("rect",{x:"15",y:"173",rx:"0",ry:"0",width:"150",height:"30"}),c.a.createElement("rect",{x:"283",y:"173",rx:"0",ry:"0",width:"75",height:"30"}),c.a.createElement("rect",{x:"15",y:"213",rx:"0",ry:"0",width:"250",height:"23"}),c.a.createElement("rect",{x:"15",y:"316",rx:"0",ry:"0",width:"150",height:"30"}),c.a.createElement("rect",{x:"283",y:"316",rx:"0",ry:"0",width:"75",height:"30"}),c.a.createElement("rect",{x:"15",y:"356",rx:"0",ry:"0",width:"250",height:"23"})))),c.a.createElement(C.c,null,c.a.createElement(F,{delivery_user:this.props.delivery_user,logoutDeliveryUser:this.props.logoutDeliveryUser}))))}}]),t}(i.Component);t.default=Object(g.b)(function(e){return{delivery_user:e.delivery_user.delivery_user,delivery_orders:e.delivery_orders.delivery_orders}},{getDeliveryOrders:function(e){return function(t){v.a.post(y.v,{token:e}).then(function(e){var a=e.data;return t({type:p.a,payload:a})}).catch(function(e){console.log(e)})}},logoutDeliveryUser:f.b})(M)},239:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i}),a.d(t,"e",function(){return c}),a.d(t,"d",function(){return d}),a.d(t,"c",function(){return m});var r=a(54),n=a(5),l=a(4),o=a.n(l),s=function(e,t){return function(a){o.a.post(n.Z,{email:e,password:t}).then(function(e){var t=e.data;return a({type:r.a,payload:t})}).catch(function(e){console.log(e)})}},i=function(){return function(e){e({type:r.b,payload:[]})}},c=function(e,t){return function(a){o.a.post(n.yb,{token:t,user_id:e}).then(function(e){var t={delivery_user:e.data,order_history:e.data.data.orders};return a({type:r.d,payload:t})}).catch(function(e){console.error(e)})}},d=function(e){return function(t){t({type:r.c,payload:e})}},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a){return o.a.post(n.xb,{token:e,toggle_status:!0,force_offline:t}).then(function(e){var t={delivery_user:e.data,order_history:e.data.data.orders};return a({type:r.d,payload:t})}).catch(function(e){console.log(e)})}}}}]);